(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{c3dU:function(t,e,l){"use strict";l.r(e);var n=l("8Y7J");class r{}var a=l("pMnS"),u=l("MKJQ"),i=l("sZkV"),o=l("sZXh"),s=l("UUxd"),b=l("mrSG"),c=l("iOEq"),h=l("Gbwi"),d=l("o1eX"),g=l("SqaD"),p=l("hq03");class v{constructor(t,e,l,n){this.coreService=t,this.alert=e,this.alertController=l,this.loadingController=n,this.calendarPlugins=[c.a,h.a],this.interval=null,this.events=[],this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}ngOnInit(){let t=this,e=new Date;this.getCurrentMonthData(String(e.getMonth()+1).padStart(2,"0")+"-"+e.getFullYear());var l=this.months[e.getMonth()]+" "+e.getFullYear();this.interval=setInterval(()=>{if(document.querySelector(".fc-left h2").innerHTML!=l){let e=document.querySelector(".fc-left h2").innerHTML,n=new Date(e),r=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear();t.getCurrentMonthData(r+"-"+a),l=e}},1e3)}ngOnDestroy(){clearInterval(this.interval)}showAlert(t,e){return b.a(this,void 0,void 0,(function*(){const l=yield this.alertController.create({header:t,subHeader:"",message:e,buttons:["OK"]});yield l.present()}))}getCurrentMonthData(t){return b.a(this,void 0,void 0,(function*(){let e=yield this.loadingController.create({message:"Please wait..."});yield e.present().then(()=>{let l=localStorage.getItem("userid");this.coreService.getRequest(g.a.API_URL+"timetabledata/"+l+"/"+t+"/").subscribe(t=>{if(null!=t.error)return this.alert.showAlert(t.error),void e.dismiss();this.events=[];for(let e of t)this.events.push({title:e.cnt,date:e.date});e.dismiss()})})}))}getDetailsByDate(t){return b.a(this,void 0,void 0,(function*(){let e=yield this.loadingController.create({message:"Please wait..."});yield e.present().then(()=>{let l=localStorage.getItem("userid");this.coreService.getRequest(g.a.API_URL+"timetable/"+l+"/"+t+"/").subscribe(l=>{if(null!=l.error)return this.alert.showAlert(l.error),void e.dismiss();e.dismiss();var n=new Date(t),r=n.getDate(),a=n.getMonth(),u=n.getFullYear();let i=r+"-"+this.months[a]+"-"+u;if(null==l.error){var o="";for(let t of l)o+="<p>"+t.subject+" "+t.printfrom+"-"+t.printto+" By "+t.name+"</p>";this.showAlert(i,o)}else this.showAlert("Status","No Data for "+i)})})}))}handleEventClick(t){let e=new Date(t.event._instance.range.start);var l=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();this.getDetailsByDate(r+"-"+n+"-"+l)}}var y=n.nb({encapsulation:0,styles:[[""]],data:{}});function m(t){return n.Kb(0,[(t()(),n.pb(0,0,null,null,10,"ion-header",[],null,null,null,u.L,u.l)),n.ob(1,49152,null,0,i.A,[n.h,n.k,n.x],{translucent:[0,"translucent"]},null),(t()(),n.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,u.Z,u.z)),n.ob(3,49152,null,0,i.yb,[n.h,n.k,n.x],{color:[0,"color"]},null),(t()(),n.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,u.D,u.d)),n.ob(5,49152,null,0,i.k,[n.h,n.k,n.x],null,null),(t()(),n.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,u.S,u.t)),n.ob(7,49152,null,0,i.Q,[n.h,n.k,n.x],null,null),(t()(),n.pb(8,0,null,0,2,"ion-title",[],null,null,null,u.Y,u.y)),n.ob(9,49152,null,0,i.wb,[n.h,n.k,n.x],null,null),(t()(),n.Ib(-1,0,["Timetable"])),(t()(),n.pb(11,0,null,null,7,"ion-content",[],null,null,null,u.K,u.k)),n.ob(12,49152,null,0,i.t,[n.h,n.k,n.x],null,null),(t()(),n.pb(13,0,null,0,5,"ion-card",[],null,null,null,u.I,u.e)),n.ob(14,49152,null,0,i.l,[n.h,n.k,n.x],null,null),(t()(),n.pb(15,0,null,0,3,"ion-card-content",[],null,null,null,u.E,u.f)),n.ob(16,49152,null,0,i.m,[n.h,n.k,n.x],null,null),(t()(),n.pb(17,0,null,0,1,"full-calendar",[["contentHeight","auto"],["contentWidth","auto"],["deepChangeDetection","true"],["defaultView","dayGridMonth"]],null,[[null,"eventClick"]],(function(t,e,l){var n=!0;return"eventClick"===e&&(n=!1!==t.component.handleEventClick(l)&&n),n}),o.b,o.a)),n.ob(18,7258112,null,0,s.a,[n.k],{deepChangeDetection:[0,"deepChangeDetection"],contentHeight:[1,"contentHeight"],defaultView:[2,"defaultView"],events:[3,"events"],plugins:[4,"plugins"]},{eventClick:"eventClick"})],(function(t,e){var l=e.component;t(e,1,0,!0),t(e,3,0,"primary"),t(e,18,0,"true","auto","dayGridMonth",l.events,l.calendarPlugins)}),null)}var f=n.lb("app-timetable",v,(function(t){return n.Kb(0,[(t()(),n.pb(0,0,null,null,1,"app-timetable",[],null,null,null,m,y)),n.ob(1,245760,null,0,v,[d.a,p.a,i.a,i.Cb],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),k=l("SVse"),w=l("s7LF"),S=l("iInd");class D{}l.d(e,"TimetablePageModuleNgFactory",(function(){return C}));var C=n.mb(r,[],(function(t){return n.xb([n.yb(512,n.j,n.X,[[8,[a.a,f]],[3,n.j],n.v]),n.yb(4608,k.l,k.k,[n.s,[2,k.t]]),n.yb(4608,w.i,w.i,[]),n.yb(4608,i.b,i.b,[n.x,n.g]),n.yb(4608,i.Eb,i.Eb,[i.b,n.j,n.p]),n.yb(4608,i.Ib,i.Ib,[i.b,n.j,n.p]),n.yb(1073742336,k.b,k.b,[]),n.yb(1073742336,w.h,w.h,[]),n.yb(1073742336,w.a,w.a,[]),n.yb(1073742336,i.Ab,i.Ab,[]),n.yb(1073742336,S.o,S.o,[[2,S.t],[2,S.m]]),n.yb(1073742336,D,D,[]),n.yb(1073742336,s.b,s.b,[]),n.yb(1073742336,r,r,[]),n.yb(1024,S.k,(function(){return[[{path:"",component:v}]]}),[])])}))}}]);