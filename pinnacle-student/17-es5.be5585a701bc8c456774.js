(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{nJzp:function(e,t,n){"use strict";n.r(t);var l=n("8Y7J");class a{}var u=n("pMnS"),r=n("MKJQ"),o=n("sZkV"),i=n("sZXh"),s=n("UUxd"),c=n("mrSG"),b=n("iOEq"),h=n("Gbwi"),d=n("o1eX"),g=n("SqaD");class p{constructor(e,t,n){this.coreService=e,this.alertController=t,this.loadingController=n,this.calendarPlugins=[b.a,h.a],this.interval=null,this.events=[],this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}ngOnInit(){let e=this,t=new Date;this.getCurrentMonthData(String(t.getMonth()+1).padStart(2,"0")+"-"+t.getFullYear());var n=this.months[t.getMonth()]+" "+t.getFullYear();this.interval=setInterval(()=>{if(document.querySelector(".fc-left h2").innerHTML!=n){let t=document.querySelector(".fc-left h2").innerHTML,l=new Date(t),a=String(l.getMonth()+1).padStart(2,"0"),u=l.getFullYear();e.getCurrentMonthData(a+"-"+u),n=t}},1e3)}ngOnDestroy(){clearInterval(this.interval)}showAlert(e,t){return c.a(this,void 0,void 0,(function*(){const n=yield this.alertController.create({header:e,subHeader:"",message:t,buttons:["OK"]});yield n.present()}))}getCurrentMonthData(e){return c.a(this,void 0,void 0,(function*(){let t=yield this.loadingController.create({message:"Please wait..."});yield t.present().then(()=>{let n=localStorage.getItem("userid");this.coreService.getRequest(g.a.API_URL+"attendancedata/"+n+"/"+e+"/").subscribe(e=>{if(t.dismiss(),null==e.error){this.events=[];for(let t of e)this.events.push({title:t.cnt,date:t.datetime})}})})}))}getDetailsByDate(e){return c.a(this,void 0,void 0,(function*(){let t=yield this.loadingController.create({message:"Please wait..."});yield t.present().then(()=>{let n=localStorage.getItem("userid");this.coreService.getRequest(g.a.API_URL+"attendance/"+n+"/"+e+"/").subscribe(n=>{t.dismiss();var l=new Date(e),a=l.getDate(),u=l.getMonth(),r=l.getFullYear();let o=a+"-"+this.months[u]+"-"+r;if(null==n.error){var i="";for(let e of n)i+="<p>"+e.date+"</p>";this.showAlert(o,i)}else this.showAlert("Status","No Data for "+o)})})}))}handleEventClick(e){let t=new Date(e.event._instance.range.start);var n=String(t.getDate()).padStart(2,"0"),l=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();this.getDetailsByDate(a+"-"+l+"-"+n)}}var v=l.nb({encapsulation:0,styles:[[""]],data:{}});function y(e){return l.Kb(0,[(e()(),l.pb(0,0,null,null,10,"ion-header",[],null,null,null,r.L,r.l)),l.ob(1,49152,null,0,o.A,[l.h,l.k,l.x],{translucent:[0,"translucent"]},null),(e()(),l.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,r.Z,r.z)),l.ob(3,49152,null,0,o.yb,[l.h,l.k,l.x],{color:[0,"color"]},null),(e()(),l.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,r.D,r.d)),l.ob(5,49152,null,0,o.k,[l.h,l.k,l.x],null,null),(e()(),l.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,r.S,r.t)),l.ob(7,49152,null,0,o.Q,[l.h,l.k,l.x],null,null),(e()(),l.pb(8,0,null,0,2,"ion-title",[],null,null,null,r.Y,r.y)),l.ob(9,49152,null,0,o.wb,[l.h,l.k,l.x],null,null),(e()(),l.Ib(-1,0,["Attendance"])),(e()(),l.pb(11,0,null,null,8,"ion-content",[],null,null,null,r.K,r.k)),l.ob(12,49152,null,0,o.t,[l.h,l.k,l.x],null,null),(e()(),l.pb(13,0,null,0,6,"ion-card",[],null,null,null,r.I,r.e)),l.ob(14,49152,null,0,o.l,[l.h,l.k,l.x],null,null),(e()(),l.pb(15,0,null,0,4,"ion-card-content",[],null,null,null,r.E,r.f)),l.ob(16,49152,null,0,o.m,[l.h,l.k,l.x],null,null),(e()(),l.pb(17,0,null,0,2,"full-calendar",[["contentHeight","auto"],["contentWidth","auto"],["deepChangeDetection","true"],["defaultView","dayGridMonth"]],null,[[null,"eventClick"]],(function(e,t,n){var l=!0;return"eventClick"===t&&(l=!1!==e.component.handleEventClick(n)&&l),l}),i.b,i.a)),l.ob(18,7258112,null,0,s.a,[l.k],{deepChangeDetection:[0,"deepChangeDetection"],hiddenDays:[1,"hiddenDays"],contentHeight:[2,"contentHeight"],defaultView:[3,"defaultView"],events:[4,"events"],plugins:[5,"plugins"]},{eventClick:"eventClick"}),l.Bb(19,1)],(function(e,t){var n=t.component;e(t,1,0,!0),e(t,3,0,"primary");var l=e(t,19,0,0);e(t,18,0,"true",l,"auto","dayGridMonth",n.events,n.calendarPlugins)}),null)}var f=l.lb("app-attendance",p,(function(e){return l.Kb(0,[(e()(),l.pb(0,0,null,null,1,"app-attendance",[],null,null,null,y,v)),l.ob(1,245760,null,0,p,[d.a,o.a,o.Cb],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),m=n("SVse"),D=n("s7LF"),k=n("iInd");class S{}n.d(t,"AttendancePageModuleNgFactory",(function(){return w}));var w=l.mb(a,[],(function(e){return l.xb([l.yb(512,l.j,l.X,[[8,[u.a,f]],[3,l.j],l.v]),l.yb(4608,m.l,m.k,[l.s,[2,m.t]]),l.yb(4608,D.i,D.i,[]),l.yb(4608,o.b,o.b,[l.x,l.g]),l.yb(4608,o.Eb,o.Eb,[o.b,l.j,l.p]),l.yb(4608,o.Ib,o.Ib,[o.b,l.j,l.p]),l.yb(1073742336,m.b,m.b,[]),l.yb(1073742336,D.h,D.h,[]),l.yb(1073742336,D.a,D.a,[]),l.yb(1073742336,o.Ab,o.Ab,[]),l.yb(1073742336,k.o,k.o,[[2,k.t],[2,k.m]]),l.yb(1073742336,S,S,[]),l.yb(1073742336,s.b,s.b,[]),l.yb(1073742336,a,a,[]),l.yb(1024,k.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);