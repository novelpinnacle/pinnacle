(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Sctm:function(c,t,e){"use strict";e.r(t),e.d(t,"CoursesModule",(function(){return hc}));var i=e("ofXK"),s=e("tyNb"),n=e("Dh3D"),o=e("M9IT"),a=e("+0xr"),r=e("0EQZ"),l=e("SP9e"),d=e("fXoL"),u=e("4KEQ"),h=e("QeEr"),b=e("aCk2"),g=e("G0I0"),m=e("bTqV"),f=e("NFeN"),j=e("V/o5"),p=e("bSwM");function v(c,t){if(1&c){const c=d.kc();d.jc(0,"th",22),d.jc(1,"mat-checkbox",23),d.rc("change",(function(t){d.Mc(c);const e=d.vc();return t?e.masterToggle():null})),d.ic(),d.ic()}if(2&c){const c=d.vc();d.Pb(1),d.Bc("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())}}function S(c,t){if(1&c){const c=d.kc();d.jc(0,"td",24),d.jc(1,"mat-checkbox",25),d.rc("click",(function(t){return d.Mc(c),t.stopPropagation()}))("change",(function(e){d.Mc(c);const i=t.$implicit,s=d.vc();return e?s.selection.toggle(i):null})),d.ic(),d.ic()}if(2&c){const c=t.$implicit,e=d.vc();d.Pb(1),d.Bc("disabled",c.batches.length>0)("checked",e.selection.isSelected(c))}}function P(c,t){1&c&&(d.jc(0,"th",26),d.Wc(1," Srno. "),d.ic())}function M(c,t){if(1&c&&(d.jc(0,"td",24),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Pb(1),d.Yc(" ",c.index," ")}}function C(c,t){1&c&&(d.jc(0,"th",27),d.Wc(1," Course "),d.ic())}function I(c,t){if(1&c&&(d.jc(0,"td",24),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Pb(1),d.Yc(" ",c.course," ")}}function w(c,t){1&c&&(d.jc(0,"th",22),d.Wc(1," Batches "),d.ic())}function B(c,t){if(1&c&&(d.jc(0,"td",24),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Pb(1),d.Yc(" ",c.batches," ")}}function k(c,t){1&c&&(d.jc(0,"th",22),d.Wc(1," Action "),d.ic())}function D(c,t){if(1&c){const c=d.kc();d.jc(0,"td",24),d.jc(1,"button",28),d.rc("click",(function(){d.Mc(c);const e=t.$implicit;return d.vc().editCourse(e.courseId)})),d.jc(2,"mat-icon"),d.Wc(3,"create"),d.ic(),d.ic(),d.Wc(4,"\xa0 "),d.jc(5,"button",29),d.rc("click",(function(){d.Mc(c);const e=t.$implicit;return d.vc().showDelete(e)})),d.jc(6,"mat-icon"),d.Wc(7,"delete"),d.ic(),d.ic(),d.ic()}if(2&c){const c=t.$implicit;d.Pb(5),d.Bc("disabled",c.batches.length>0)}}function O(c,t){1&c&&d.ec(0,"tr",30)}function _(c,t){1&c&&d.ec(0,"tr",31)}function x(c,t){1&c&&(d.jc(0,"div",32),d.Wc(1," No Records Found "),d.ic())}const W=function(){return[8]};let A=(()=>{class c{constructor(c,t,e){this.coreService=c,this.router=t,this.dialog=e,this.tableData=[],this.displayedColumns=["id","srno","course","batches","action"],this.dataSource=new a.k(this.tableData),this.selection=new r.c(!0,[]),this.loading=!0,this.courses=[],this.courseForEdit={courseId:0,course:null,batches:[]}}ngOnInit(){this.coreService.getRequest(l.a.API_URL+"courses").subscribe(c=>{this.loading=!1,this.courses=c,this.courses.forEach((c,t)=>{let e=[];c.batches.forEach(c=>{e.push(c.batch)}),this.tableData.push({courseId:c.courseId,course:c.course,batches:e,index:t+1}),this.setDataSource()})})}setDataSource(){this.dataSource=new a.k(this.tableData),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length-this.dataSource.data.filter(c=>c.batches.length>0).length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(c=>{0==c.batches.length&&this.selection.select(c)})}editCourse(c){let t=this.courses.find(t=>t.courseId==c);this.courseForEdit={courseId:t.courseId,course:t.course,batches:t.batches},sessionStorage.setItem("course",JSON.stringify(t)),this.router.navigate(["/users/courses/edit-course"])}showDeleteMultiple(){this.dialog.showDialog({content:"Are you sure to delete these courses?",title:"Confirm",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteMultipleCourses()}})}showDelete(c){this.dialog.showDialog({content:`Are you sure to delete course "${c.course}"?`,title:"Confirm",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteCourse(c)}})}deleteCourse(c){this.coreService.deleteRequest(l.a.API_URL+"courses/"+c.courseId).subscribe(t=>{let e=this.tableData.find(t=>t==c);this.selection.clear(),this.tableData.splice(this.tableData.indexOf(e),1),this.setDataSource()})}deleteMultipleCourses(){let c=[];this.selection.selected.forEach(t=>c.push(t.courseId)),this.coreService.deleteRequest(l.a.API_URL+"courses/multiple/"+c).subscribe(t=>{this.tableData=this.tableData.filter(t=>!c.includes(t.courseId)),this.setDataSource(),this.selection.clear()})}}return c.\u0275fac=function(t){return new(t||c)(d.dc(u.a),d.dc(s.b),d.dc(h.a))},c.\u0275cmp=d.Xb({type:c,selectors:[["app-courses-home"]],viewQuery:function(c,t){var e;1&c&&(d.Sc(n.a,!0),d.Sc(o.a,!0)),2&c&&(d.Hc(e=d.sc())&&(t.sort=e.first),d.Hc(e=d.sc())&&(t.paginator=e.first))},decls:33,vars:8,consts:[["id","page-content"],[1,"row","main-row"],[1,"btns-box"],["mat-raised-button","","routerLink","/users/courses/add-course"],[1,"fa","fa-plus"],["mat-raised-button","","color","warn",3,"disabled","click"],[2,"font-size","18px","margin-top","4px"],["mat-table","","matSort","",1,"shadow-sm",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srno"],["mat-header-cell","","mat-sort-header","","id","srnocol",4,"matHeaderCellDef"],["matColumnDef","course"],["mat-header-cell","","mat-sort-header","","id","subjectcol",4,"matHeaderCellDef"],["matColumnDef","batches"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-table",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"show"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"disabled","checked","click","change"],["mat-header-cell","","mat-sort-header","","id","srnocol"],["mat-header-cell","","mat-sort-header","","id","subjectcol"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"empty-table"]],template:function(c,t){1&c&&(d.ec(0,"admin-header"),d.ec(1,"admin-sidebar"),d.jc(2,"div",0),d.jc(3,"div",1),d.jc(4,"div",2),d.jc(5,"button",3),d.ec(6,"i",4),d.Wc(7," Add"),d.ic(),d.jc(8,"button",5),d.rc("click",(function(){return t.showDeleteMultiple()})),d.jc(9,"mat-icon",6),d.Wc(10,"delete"),d.ic(),d.Wc(11,"Delete "),d.ic(),d.ic(),d.ic(),d.jc(12,"table",7),d.hc(13,8),d.Vc(14,v,2,2,"th",9),d.Vc(15,S,2,2,"td",10),d.gc(),d.hc(16,11),d.Vc(17,P,2,0,"th",12),d.Vc(18,M,2,1,"td",10),d.gc(),d.hc(19,13),d.Vc(20,C,2,0,"th",14),d.Vc(21,I,2,1,"td",10),d.gc(),d.hc(22,15),d.Vc(23,w,2,0,"th",9),d.Vc(24,B,2,1,"td",10),d.gc(),d.hc(25,16),d.Vc(26,k,2,0,"th",9),d.Vc(27,D,8,1,"td",10),d.gc(),d.Vc(28,O,1,0,"tr",17),d.Vc(29,_,1,0,"tr",18),d.ic(),d.Vc(30,x,2,0,"div",19),d.ec(31,"mat-paginator",20),d.ic(),d.ec(32,"loading",21)),2&c&&(d.Pb(8),d.Bc("disabled",0==t.selection.selected.length),d.Pb(4),d.Bc("dataSource",t.dataSource),d.Pb(16),d.Bc("matHeaderRowDef",t.displayedColumns),d.Pb(1),d.Bc("matRowDefColumns",t.displayedColumns),d.Pb(1),d.Bc("ngIf",0==t.dataSource.filteredData.length),d.Pb(1),d.Bc("pageSizeOptions",d.Cc(7,W)),d.Pb(1),d.Bc("show",t.loading))},directives:[b.a,g.a,m.b,s.c,f.a,a.j,n.a,a.c,a.e,a.b,a.g,a.i,i.k,o.a,j.a,a.d,p.a,a.a,n.b,a.f,a.h],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}","",".main-row[_ngcontent-%COMP%]{justify-content:flex-end;padding:0 0 15px}table[_ngcontent-%COMP%]{width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}.empty-table[_ngcontent-%COMP%]{min-height:400px;background:#fff;font-size:1.2em;display:flex;justify-content:center;align-items:center}.mat-column-id[_ngcontent-%COMP%], .mat-column-srno[_ngcontent-%COMP%]{width:60px}.btns-box[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:10px}"]}),c})();var F=e("3Pt+"),y=e("kmnG"),R=e("qFsG"),V=e("d3UM"),$=e("FKr1");const q=["form"];function U(c,t){if(1&c&&(d.jc(0,"mat-option",13),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Bc("value",c.id),d.Pb(1),d.Xc(c.session)}}function L(c,t){if(1&c){const c=d.kc();d.jc(0,"button",19),d.rc("click",(function(){d.Mc(c);const t=d.vc().index;return d.vc().batches.splice(t,1)})),d.jc(1,"mat-icon"),d.Wc(2,"remove"),d.ic(),d.ic()}}function E(c,t){if(1&c){const c=d.kc();d.jc(0,"div",14),d.jc(1,"mat-form-field"),d.jc(2,"mat-label"),d.Wc(3,"Batch"),d.ic(),d.jc(4,"input",15,16),d.rc("ngModelChange",(function(e){return d.Mc(c),t.$implicit.batch=e})),d.ic(),d.ic(),d.jc(6,"button",17),d.rc("click",(function(t){d.Mc(c);const e=d.vc();return t.preventDefault(),e.batches.push({batch:null})})),d.jc(7,"mat-icon"),d.Wc(8,"add"),d.ic(),d.ic(),d.Vc(9,L,3,0,"button",18),d.ic()}if(2&c){const c=t.$implicit,e=t.index;d.Pb(4),d.Bc("ngModel",c.batch)("name","batch"+e),d.Pb(5),d.Bc("ngIf",e>0)}}let T=(()=>{class c{constructor(c,t){this.coreService=c,this.dialog=t,this.batches=[{batch:null}],this.course=null,this.disableButton=!1,this.loading=!1,this.sessionYears=[]}ngOnInit(){this.getSessionYears()}getSessionYears(){this.coreService.getRequest(l.a.API_URL+"utilities/session-years").subscribe(c=>{this.sessionYears=c})}saveCourse(){let c=[];Object.keys(this.batches).forEach((t,e)=>c.push(this.batches[t].batch));let t={course:this.course,batches:c,sessionId:this.sessionId};this.disableButton=!0,this.loading=!0,this.coreService.postRequest(l.a.API_URL+"courses",t).subscribe(c=>{this.loading=!1,this.form.resetForm(),this.disableButton=!1,this.dialog.showDialog({content:c.message})})}}return c.\u0275fac=function(t){return new(t||c)(d.dc(u.a),d.dc(h.a))},c.\u0275cmp=d.Xb({type:c,selectors:[["add-course"]],viewQuery:function(c,t){var e;1&c&&d.cd(q,!0),2&c&&d.Hc(e=d.sc())&&(t.form=e.first)},decls:24,vars:6,consts:[["id","page-content"],[1,"row"],[1,"col-sm-12","col-md-5","pr"],[1,"content-title"],[1,"content-box"],["form","ngForm"],["matInput","","name","course","required","",3,"ngModel","ngModelChange"],["cs","ngModel"],["name","sessionId",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","row batch",4,"ngFor","ngForOf"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"show"],[3,"value"],[1,"row","batch"],["matInput","",3,"ngModel","name","ngModelChange"],["bat","ngModel"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"]],template:function(c,t){if(1&c&&(d.ec(0,"admin-header"),d.ec(1,"admin-sidebar"),d.jc(2,"div",0),d.jc(3,"div",1),d.jc(4,"div",2),d.jc(5,"div",3),d.Wc(6,"Add Course"),d.ic(),d.jc(7,"div",4),d.jc(8,"form",null,5),d.jc(10,"mat-form-field"),d.jc(11,"mat-label"),d.Wc(12,"Course Name"),d.ic(),d.jc(13,"input",6,7),d.rc("ngModelChange",(function(c){return t.course=c})),d.ic(),d.ic(),d.jc(15,"mat-form-field"),d.jc(16,"mat-label"),d.Wc(17,"Select Session"),d.ic(),d.jc(18,"mat-select",8),d.rc("ngModelChange",(function(c){return t.sessionId=c})),d.Vc(19,U,2,2,"mat-option",9),d.ic(),d.ic(),d.Vc(20,E,10,3,"div",10),d.jc(21,"button",11),d.rc("click",(function(){return t.saveCourse()})),d.Wc(22,"Save"),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.ec(23,"loading",12),d.ic()),2&c){const c=d.Ic(14);d.Pb(13),d.Bc("ngModel",t.course),d.Pb(5),d.Bc("ngModel",t.sessionId),d.Pb(1),d.Bc("ngForOf",t.sessionYears),d.Pb(1),d.Bc("ngForOf",t.batches),d.Pb(1),d.Bc("disabled",c.invalid||t.disableButton),d.Pb(2),d.Bc("show",t.loading)}},directives:[b.a,g.a,F.v,F.l,F.m,y.b,y.e,R.a,F.b,F.r,F.k,F.n,V.a,i.j,m.b,j.a,$.h,f.a,i.k],styles:["",".row.batch[_ngcontent-%COMP%]{align-items:center}.row.batch[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 100px)}.row.batch[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]}),c})();function X(c,t){if(1&c){const c=d.kc();d.jc(0,"button",20),d.rc("click",(function(){d.Mc(c);const t=d.vc().index;return d.vc().batches.splice(t,1)})),d.jc(1,"mat-icon"),d.Wc(2,"delete"),d.ic(),d.ic()}}function N(c,t){if(1&c){const c=d.kc();d.jc(0,"div",15),d.jc(1,"mat-form-field"),d.jc(2,"mat-label"),d.Wc(3,"Batch"),d.ic(),d.jc(4,"input",16,17),d.rc("ngModelChange",(function(e){return d.Mc(c),t.$implicit.batch=e})),d.ic(),d.ic(),d.jc(6,"button",18),d.rc("click",(function(t){d.Mc(c);const e=d.vc();return t.preventDefault(),e.addMore()})),d.jc(7,"mat-icon"),d.Wc(8,"add"),d.ic(),d.ic(),d.Vc(9,X,3,0,"button",19),d.ic()}if(2&c){const c=t.$implicit,e=t.index;d.Pb(4),d.Bc("ngModel",c.batch)("name","batch"+e),d.Pb(2),d.Bc("disabled",!c.batch),d.Pb(3),d.Bc("ngIf",e>0)}}function Y(c,t){if(1&c){const c=d.kc();d.jc(0,"div",15),d.jc(1,"mat-form-field"),d.jc(2,"mat-label"),d.Wc(3,"Batch"),d.ic(),d.jc(4,"input",21,17),d.rc("ngModelChange",(function(e){return d.Mc(c),t.$implicit.batch=e})),d.ic(),d.ic(),d.jc(6,"button",22),d.rc("click",(function(){d.Mc(c);const e=t.$implicit;return d.vc().updateBatch(e)})),d.jc(7,"mat-icon"),d.Wc(8,"update"),d.ic(),d.ic(),d.jc(9,"button",20),d.rc("click",(function(){d.Mc(c);const e=t.$implicit,i=t.index;return d.vc().showDelete(e,i)})),d.jc(10,"mat-icon"),d.Wc(11,"delete"),d.ic(),d.ic(),d.ic()}if(2&c){const c=t.$implicit,e=t.index;d.Pb(4),d.Bc("ngModel",c.batch)("name","batch"+e)}}let H=(()=>{class c{constructor(c,t){this.coreService=c,this.dialog=t,this.batches=[{batch:null}],this.Activebatches=[],this.bids=[],this.disableButton=!1}ngOnInit(){if(null!=sessionStorage.getItem("course")){let c=JSON.parse(sessionStorage.getItem("course"));this.Activebatches=c.batches,this.course=c.course,this.courseId=c.courseId}}addMore(){this.batches.push({batch:null})}updateCourse(){this.loading=!0,this.coreService.putRequest(l.a.API_URL+"courses",{course:this.course,courseId:this.courseId}).subscribe(c=>{this.loading=!1,this.dialog.showDialog({content:c.message})})}updateBatch(c){this.loading=!0,this.coreService.putRequest(l.a.API_URL+"courses/batch",{batchId:c.batchId,batch:c.batch}).subscribe(c=>{this.loading=!1,this.dialog.showDialog({content:c.message})})}addNewBatches(){this.loading=!0,this.coreService.postRequest(l.a.API_URL+"courses/batches",{courseId:this.courseId,batches:this.batches}).subscribe(c=>{this.loading=!1,this.dialog.showDialog({content:c.message})})}showDelete(c,t){this.dialog.showDialog({content:`Are ypu sure to delete batch "${c.batch}"?`,title:"Confirm",callBackButtonText:"Delete",callBackButtonColor:"warn",callBack:()=>{this.deleteBatch(c.batchId,t)}})}deleteBatch(c,t){this.loading=!0,this.coreService.deleteRequest(l.a.API_URL+"courses/batch/"+c).subscribe(c=>{this.loading=!1,c.success&&this.Activebatches.splice(t,1)})}}return c.\u0275fac=function(t){return new(t||c)(d.dc(u.a),d.dc(h.a))},c.\u0275cmp=d.Xb({type:c,selectors:[["edit-course"]],decls:36,vars:6,consts:[["id","page-content"],[1,"row"],[1,"col-md-6","col-sm-12","pr"],[1,"row","edit-course-main-row"],[1,"col-sm-12"],[1,"content-title"],[1,"content-box"],["form","ngForm"],["matInput","","name","course","required","",3,"ngModel","ngModelChange"],["cs","ngModel"],["color","primary","mat-raised-button","",3,"disabled","click"],["addBatchForm","ngForm"],["class","row batch",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12","pl"],[3,"show"],[1,"row","batch"],["matInput","","required","",3,"ngModel","name","ngModelChange"],["bat","ngModel"],["mat-mini-fab","","color","primary",3,"disabled","click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"],["matInput","",3,"ngModel","name","ngModelChange"],["mat-mini-fab","","color","primary",3,"click"]],template:function(c,t){if(1&c&&(d.ec(0,"admin-header"),d.ec(1,"admin-sidebar"),d.jc(2,"div",0),d.jc(3,"div",1),d.jc(4,"div",2),d.jc(5,"div",3),d.jc(6,"div",4),d.jc(7,"div",5),d.Wc(8,"Edit Course"),d.ic(),d.jc(9,"div",6),d.jc(10,"form",null,7),d.jc(12,"mat-form-field"),d.jc(13,"mat-label"),d.Wc(14,"Course Name"),d.ic(),d.jc(15,"input",8,9),d.rc("ngModelChange",(function(c){return t.course=c})),d.ic(),d.ic(),d.jc(17,"button",10),d.rc("click",(function(){return t.updateCourse()})),d.Wc(18,"Update"),d.ic(),d.ic(),d.ic(),d.ic(),d.jc(19,"div",4),d.jc(20,"div",5),d.Wc(21,"Add Batches"),d.ic(),d.jc(22,"div",6),d.jc(23,"form",null,11),d.Vc(25,N,10,4,"div",12),d.jc(26,"button",10),d.rc("click",(function(){return t.addNewBatches()})),d.Wc(27,"Submit"),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.jc(28,"div",13),d.jc(29,"div",1),d.jc(30,"div",4),d.jc(31,"div",5),d.Wc(32,"Edit Batches"),d.ic(),d.jc(33,"div",6),d.Vc(34,Y,12,2,"div",12),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.ec(35,"loading",14)),2&c){const c=d.Ic(16),e=d.Ic(24);d.Pb(15),d.Bc("ngModel",t.course),d.Pb(2),d.Bc("disabled",c.invalid||t.disableButton),d.Pb(8),d.Bc("ngForOf",t.batches),d.Pb(1),d.Bc("disabled",e.invalid||t.disableButton),d.Pb(8),d.Bc("ngForOf",t.Activebatches),d.Pb(1),d.Bc("show",t.loading)}},directives:[b.a,g.a,F.v,F.l,F.m,y.b,y.e,R.a,F.b,F.r,F.k,F.n,m.b,i.j,j.a,f.a,i.k],styles:["",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.pl[_ngcontent-%COMP%]{padding-left:7.5px}.pr[_ngcontent-%COMP%]{padding-right:7.5px}.edit-course-main-row[_ngcontent-%COMP%]{align-items:stretch}.edit-course-main-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:15px}.row.batch[_ngcontent-%COMP%]{align-items:center}.row.batch[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.row.batch[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 100px)}"]}),c})();var z=e("n+G7"),G=e("W2jB"),Q=e("mrSG"),J=e("byUP"),K=e("FnMX");function Z(c,t){1&c&&(d.jc(0,"div",4),d.Wc(1,"Assign Subjects"),d.ic())}function cc(c,t){if(1&c&&(d.jc(0,"mat-option",19),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Bc("value",c.courseId),d.Pb(1),d.Xc(c.course)}}function tc(c,t){if(1&c&&(d.jc(0,"mat-option",19),d.Wc(1),d.ic()),2&c){const c=t.$implicit;d.Bc("value",c.batchId),d.Pb(1),d.Xc(c.batch)}}function ec(c,t){if(1&c&&(d.jc(0,"mat-option",25),d.Wc(1),d.ic()),2&c){const c=t.$implicit,e=d.vc(3);d.Bc("disabled",e.assignedSubjectsInDatabase.includes(c.subjectId)||e.assignedSubjectsInClientSide.includes(c.subjectId))("value",c.subjectId),d.Pb(1),d.Xc(c.subject)}}function ic(c,t){if(1&c){const c=d.kc();d.jc(0,"button",26),d.rc("click",(function(){d.Mc(c);const t=d.vc().index;return d.vc(2).choosedSubjects.splice(t,1)})),d.jc(1,"mat-icon"),d.Wc(2,"delete"),d.ic(),d.ic()}}function sc(c,t){if(1&c){const c=d.kc();d.jc(0,"div",20),d.jc(1,"mat-form-field"),d.jc(2,"mat-label"),d.Wc(3,"Select Subject"),d.ic(),d.jc(4,"mat-select",21),d.rc("ngModelChange",(function(e){return d.Mc(c),t.$implicit.subjectId=e}))("selectionChange",(function(){return d.Mc(c),d.vc(2).onSelectionChange()})),d.jc(5,"mat-option"),d.Wc(6,"Select Subject"),d.ic(),d.Vc(7,ec,2,3,"mat-option",22),d.ic(),d.ic(),d.jc(8,"button",23),d.rc("click",(function(t){d.Mc(c);const e=d.vc(2);return t.preventDefault(),e.addMore()})),d.jc(9,"mat-icon"),d.Wc(10,"add"),d.ic(),d.ic(),d.Vc(11,ic,3,0,"button",24),d.ic()}if(2&c){const c=t.$implicit,e=t.index;d.Pb(4),d.Bc("name","subject"+e)("ngModel",c.subjectId),d.Pb(3),d.Bc("ngForOf",c.subjects),d.Pb(4),d.Bc("ngIf",e>0)}}function nc(c,t){if(1&c){const c=d.kc();d.jc(0,"div",8),d.jc(1,"form",null,9),d.jc(3,"div",10),d.jc(4,"div",11),d.jc(5,"mat-form-field"),d.jc(6,"mat-label"),d.Wc(7,"Select Course"),d.ic(),d.jc(8,"mat-select",12),d.rc("ngModelChange",(function(t){return d.Mc(c),d.vc().courseId=t}))("selectionChange",(function(){d.Mc(c);const t=d.vc();return t.setBatches(t.courseId)})),d.jc(9,"mat-option"),d.Wc(10,"Select Course"),d.ic(),d.Vc(11,cc,2,2,"mat-option",13),d.ic(),d.ic(),d.ic(),d.jc(12,"div",14),d.jc(13,"mat-form-field"),d.jc(14,"mat-label"),d.Wc(15,"Select Batch"),d.ic(),d.jc(16,"mat-select",15),d.rc("ngModelChange",(function(t){return d.Mc(c),d.vc().batchId=t}))("selectionChange",(function(){return d.Mc(c),d.vc().filterSubjects()})),d.jc(17,"mat-option"),d.Wc(18,"Select Batch"),d.ic(),d.Vc(19,tc,2,2,"mat-option",13),d.ic(),d.ic(),d.ic(),d.Vc(20,sc,12,4,"div",16),d.jc(21,"div",17),d.jc(22,"button",18),d.rc("click",(function(){return d.Mc(c),d.vc().assign()})),d.Wc(23,"Assign"),d.ic(),d.ic(),d.ic(),d.ic(),d.ic()}if(2&c){const c=d.Ic(2),t=d.vc();d.Pb(8),d.Bc("ngModel",t.courseId),d.Pb(3),d.Bc("ngForOf",t.courses),d.Pb(5),d.Bc("ngModel",t.batchId),d.Pb(3),d.Bc("ngForOf",t.batches),d.Pb(1),d.Bc("ngForOf",t.choosedSubjects),d.Pb(2),d.Bc("disabled",!c.valid)}}function oc(c,t){if(1&c){const c=d.kc();d.jc(0,"mat-icon",30),d.rc("click",(function(){d.Mc(c);const t=d.vc(),e=t.$implicit,i=t.index,s=d.vc().index;return d.vc().showDeleteAssignedSubject(e.batchId,e.subjectId,s,i)})),d.Wc(1,"delete "),d.ic()}}function ac(c,t){if(1&c&&(d.jc(0,"div",28),d.Wc(1),d.Vc(2,oc,2,0,"mat-icon",29),d.ic()),2&c){const c=t.$implicit,e=d.vc(2);d.Pb(1),d.Yc("",c.subject," "),d.Pb(1),d.Bc("ngIf",e.permissions.deassign_course_subjects)}}function rc(c,t){if(1&c&&(d.jc(0,"tr"),d.jc(1,"td"),d.Wc(2),d.ic(),d.jc(3,"td"),d.Vc(4,ac,3,2,"div",27),d.ic(),d.ic()),2&c){const c=t.$implicit;d.Pb(2),d.Xc(c.batch),d.Pb(2),d.Bc("ngForOf",c.subjects)}}let lc=(()=>{class c{constructor(c,t,e){this.coreService=c,this.dialog=t,this.usersService=e,this.loading=!1,this.courses=[],this.batches=[],this.masterSubjects=[],this.subjects=[],this.choosedSubjects=[{subjectId:null,subjects:[]}],this.batches_subjects=[],this.assignedSubjectsInClientSide=[],this.assignedSubjectsInDatabase=[],this.batch_subjects=[],this.permissions=J.a}ngOnInit(){return Object(Q.a)(this,void 0,void 0,(function*(){this.getCourses(),this.getSubjects(),this.getAssignedSubjects(),this.getAssignedSubjectsForPrint(),this.permissions=yield this.usersService.getUserPermissions()}))}getAssignedSubjects(){this.coreService.getRequest(l.a.API_URL+"subjects/assigned-to-batches").subscribe(c=>{this.batches_subjects=c})}getAssignedSubjectsForPrint(){this.coreService.getRequest(l.a.API_URL+"courses/batches/assigned-subjects").subscribe(c=>{this.batch_subjects=c})}filterSubjects(){let c=this.batches_subjects.find(c=>c.batchId==this.batchId);this.assignedSubjectsInDatabase=c?c.subjectIds:[]}getSubjects(){this.coreService.getRequest(l.a.API_URL+"subjects").subscribe(c=>{this.masterSubjects=[...c],this.choosedSubjects[0].subjects=c})}getCourses(){this.coreService.getRequest(l.a.API_URL+"courses").subscribe(c=>{this.courses=c})}setBatches(c){let t=this.courses.find(t=>t.courseId==c).batches;this.batches=t}assign(){let c=[];this.choosedSubjects.forEach(t=>c.push(t.subjectId)),this.loading=!0,this.coreService.postRequest(l.a.API_URL+"subjects/assign-to-batches",{batchId:this.batchId,subjectIds:c}).subscribe(c=>{this.dialog.showDialog({content:c.message}),this.getAssignedSubjectsForPrint(),this.loading=!1})}onSelectionChange(){let c=[];this.choosedSubjects.forEach(t=>c.push(t.subjectId)),this.assignedSubjectsInClientSide=c}addMore(){let c=[...this.masterSubjects];this.choosedSubjects.push({subjectId:null,subjects:c})}showDeleteAssignedSubject(c,t,e,i){this.dialog.showDialog({title:"Confirm Deletion",content:"Are you sure to remove this subject from batch?",callBack:()=>{this.removeAssignedSubject(c,t,e,i)}})}removeAssignedSubject(c,t,e,i){this.loading=!0,this.coreService.deleteRequest(l.a.API_URL+"subjects/remove-assigned-subject/"+c+"/"+t).subscribe(c=>{this.loading=!1,c.success&&this.batch_subjects[e].subjects.splice(i,1)})}}return c.\u0275fac=function(t){return new(t||c)(d.dc(u.a),d.dc(h.a),d.dc(K.a))},c.\u0275cmp=d.Xb({type:c,selectors:[["app-assign-subject-to-batches"]],decls:16,vars:4,consts:[["id","page-content"],["class","content-title",4,"ngIf"],["class","content-box",4,"ngIf"],[2,"height","15px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],[3,"show"],[1,"content-box"],["form","ngForm"],[1,"row"],[1,"col-sm-6","pr"],["name","course","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6","pl"],["name","batch","required","",3,"ngModel","ngModelChange","selectionChange"],["class","col-sm-7 pr subject row",4,"ngFor","ngForOf"],[1,"col-sm-12"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"col-sm-7","pr","subject","row"],["required","",3,"name","ngModel","ngModelChange","selectionChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"disabled","value"],["mat-mini-fab","","color","warn",3,"click"],["class","assigned-items",4,"ngFor","ngForOf"],[1,"assigned-items"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(c,t){1&c&&(d.ec(0,"admin-header"),d.ec(1,"admin-sidebar"),d.jc(2,"div",0),d.Vc(3,Z,2,0,"div",1),d.Vc(4,nc,24,6,"div",2),d.ec(5,"div",3),d.jc(6,"div",4),d.Wc(7,"Assigned Subjects"),d.ic(),d.jc(8,"table",5),d.jc(9,"tr"),d.jc(10,"th"),d.Wc(11,"Batch"),d.ic(),d.jc(12,"th"),d.Wc(13,"Subjects"),d.ic(),d.ic(),d.Vc(14,rc,5,2,"tr",6),d.ic(),d.ic(),d.ec(15,"loading",7)),2&c&&(d.Pb(3),d.Bc("ngIf",t.permissions.assign_course_subjects),d.Pb(1),d.Bc("ngIf",t.permissions.assign_course_subjects),d.Pb(10),d.Bc("ngForOf",t.batch_subjects),d.Pb(1),d.Bc("show",t.loading))},directives:[b.a,g.a,i.k,i.j,j.a,F.v,F.l,F.m,y.b,y.e,V.a,F.r,F.k,F.n,$.h,m.b,f.a],styles:[".subject{align-items:center}.subject>button{margin-left:10px}.subject>mat-form-field{width:calc(100% - 140px)}@media screen and (max-width:576px){.pl,.pr{padding:0}}"],encapsulation:2}),c})();var dc=e("I9y+");const uc=[{path:"",component:A},{path:"dashboard",component:(()=>{class c{constructor(c){this.coreService=c,this.statisticsData=[],this.loading=!0}ngOnInit(){this.getDashboardData()}getDashboardData(){this.coreService.getRequest(l.a.API_URL+"reports/courses-dashboard").subscribe(c=>{this.loading=!1,this.statisticsData=[{title:"Total Courses",value:c.totalCourses,footerTitle:"Courses",link:"/users/courses/add-course"},{title:"Total Batches",value:c.totalBatches,footerTitle:"Batches",link:"/users/courses/add-course"},{title:"Total Subjects",value:c.totalSubjects,footerTitle:"Subjects",link:"/users/courses/subjects"}]})}}return c.\u0275fac=function(t){return new(t||c)(d.dc(u.a))},c.\u0275cmp=d.Xb({type:c,selectors:[["app-courses-dashboard"]],decls:4,vars:2,consts:[[3,"statisticsData"],[3,"show"]],template:function(c,t){1&c&&(d.ec(0,"admin-header"),d.ec(1,"admin-sidebar"),d.ec(2,"statistics-dashboard",0),d.ec(3,"loading",1)),2&c&&(d.Pb(2),d.Bc("statisticsData",t.statisticsData),d.Pb(1),d.Bc("show",t.loading))},directives:[b.a,g.a,dc.a,j.a],styles:[""]}),c})()},{path:"add-course",component:T},{path:"edit-course",component:H},{path:"subjects",component:G.a},{path:"assign-subjects-in-batches",component:lc}];let hc=(()=>{class c{}return c.\u0275mod=d.bc({type:c}),c.\u0275inj=d.ac({factory:function(t){return new(t||c)},imports:[[i.c,z.a,s.f.forChild(uc)]]}),c})()}}]);