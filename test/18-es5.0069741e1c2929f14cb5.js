function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var i=t[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{XPJw:function(e,t,c){"use strict";c.r(t),c.d(t,"FeaturesModule",(function(){return I}));var i,a=c("ofXK"),n=c("n+G7"),r=c("tyNb"),o=c("SP9e"),u=c("fXoL"),s=c("FM/7"),l=c("QeEr"),d=c("aCk2"),f=c("G0I0"),m=c("1jcm"),g=c("3Pt+"),p=c("kmnG"),h=c("qFsG"),v=c("bTqV"),b=c("ZMsq"),j=c("NFeN"),F=((i=function(){function e(t,c){_classCallCheck(this,e),this.cms=t,this.dialog=c}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"updateFeature",value:function(e){var t=this,c=new FormData;for(var i in c.append("image",this.selectedImage),c.append("id",this.feature.id+""),e)c.append(i,e[i]);this.cms.updateFeature(c).subscribe((function(e){e.success&&(t.modal.editFeatureModal=!1),t.dialog.showDialog({content:e.message})}))}}]),e}()).\u0275fac=function(e){return new(e||i)(u.dc(s.a),u.dc(l.a))},i.\u0275cmp=u.Xb({type:i,selectors:[["edit-feature"]],inputs:{modal:"modal",feature:"feature"},decls:16,vars:2,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title",3,"ngModel","ngModelChange"],["matInput","","name","description",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(e,t){if(1&e){var c=u.kc();u.jc(0,"form",0,1),u.rc("ngSubmit",(function(){u.Mc(c);var e=u.Ic(1);return t.updateFeature(e.value)})),u.jc(2,"mat-form-field"),u.jc(3,"mat-label"),u.Wc(4,"Title"),u.ic(),u.jc(5,"input",2),u.rc("ngModelChange",(function(e){return t.feature.title=e})),u.ic(),u.ic(),u.jc(6,"mat-form-field"),u.jc(7,"mat-label"),u.Wc(8,"Description"),u.ic(),u.jc(9,"textarea",3),u.rc("ngModelChange",(function(e){return t.feature.description=e})),u.ic(),u.ic(),u.jc(10,"div",4),u.jc(11,"div",5),u.jc(12,"input",6),u.rc("change",(function(e){return t.setSelectedImage(e)})),u.ic(),u.ic(),u.jc(13,"div",5),u.jc(14,"button",7),u.Wc(15,"Submit"),u.ic(),u.ic(),u.ic(),u.ic()}2&e&&(u.Pb(5),u.Bc("ngModel",t.feature.title),u.Pb(4),u.Bc("ngModel",t.feature.description))},directives:[g.v,g.l,g.m,p.b,p.e,h.a,g.b,g.k,g.n,v.b],styles:[""]}),i);function k(e,t){if(1&e){var c=u.kc();u.jc(0,"tr"),u.jc(1,"td"),u.ec(2,"img",22),u.ic(),u.jc(3,"td"),u.Wc(4),u.ic(),u.jc(5,"td"),u.Wc(6),u.ic(),u.jc(7,"td"),u.jc(8,"button",23),u.rc("click",(function(){u.Mc(c);var e=t.$implicit;return u.vc().setActiveFeature(e)})),u.jc(9,"mat-icon"),u.Wc(10,"create"),u.ic(),u.ic(),u.Wc(11,"\xa0 "),u.jc(12,"button",24),u.rc("click",(function(){u.Mc(c);var e=t.$implicit;return u.vc().deleteFeature(e.id)})),u.jc(13,"mat-icon"),u.Wc(14,"delete"),u.ic(),u.ic(),u.ic(),u.ic()}if(2&e){var i=t.$implicit,a=u.vc();u.Pb(2),u.Bc("src",a.WEBSITE_URL+"uploads/features/"+i.image,u.Pc),u.Pb(2),u.Xc(i.title),u.Pb(2),u.Xc(i.description)}}function M(e,t){if(1&e&&u.ec(0,"edit-feature",25),2&e){var c=u.vc();u.Bc("feature",c.activeFeature)("modal",c.modal)}}var w,y,C=function(){return{width:"60%"}},S=[{path:"",component:(w=function(){function e(t,c){_classCallCheck(this,e),this.cms=t,this.dialog=c,this.WEBSITE_URL=o.a.WEBSITE_URL,this.features=[],this.modal={editFeatureModal:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getFeatures(),this.getCMSStatus()}},{key:"getCMSStatus",value:function(){var e=this;this.cms.getCMSStatus("features").subscribe((function(t){e.showFeatures=t.status}))}},{key:"getFeatures",value:function(){var e=this;this.cms.getActiveFeatures().subscribe((function(t){e.features=t}))}},{key:"setActiveFeature",value:function(e){this.activeFeature=e,this.modal.editFeatureModal=!0}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"uploadFeature",value:function(e){var t=this,c=new FormData;for(var i in c.append("image",this.selectedImage),e)c.append(i,e[i]);this.cms.uploadFeature(c).subscribe((function(e){e.success&&t.features.unshift(e.feature),t.dialog.showDialog({content:e.message})}))}},{key:"deleteFeature",value:function(e){var t=this;this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this feature?",callBack:function(){t.cms.deleteFeature(e).subscribe((function(c){c.success&&t.features.splice(t.features.indexOf(t.features.find((function(t){return t.id==e}))),1)}))}})}},{key:"changeStatus",value:function(){this.cms.changeCMSStatus("features",this.showFeatures).subscribe((function(){}))}}]),e}(),w.\u0275fac=function(e){return new(e||w)(u.dc(s.a),u.dc(l.a))},w.\u0275cmp=u.Xb({type:w,selectors:[["app-upload-features"]],decls:45,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title","ngModel",""],["matInput","","name","description","ngModel",""],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"feature","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"feature","modal"]],template:function(e,t){if(1&e){var c=u.kc();u.ec(0,"admin-header"),u.ec(1,"admin-sidebar"),u.jc(2,"div",0),u.jc(3,"div",1),u.Wc(4,"Upload Feature "),u.jc(5,"mat-slide-toggle",2),u.rc("ngModelChange",(function(e){return t.showFeatures=e}))("change",(function(){return t.changeStatus()})),u.ic(),u.ic(),u.jc(6,"div",3),u.jc(7,"form",4,5),u.rc("ngSubmit",(function(){u.Mc(c);var e=u.Ic(8);return t.uploadFeature(e.value)})),u.jc(9,"mat-form-field"),u.jc(10,"mat-label"),u.Wc(11,"Title"),u.ic(),u.ec(12,"input",6),u.ic(),u.jc(13,"mat-form-field"),u.jc(14,"mat-label"),u.Wc(15,"Description"),u.ic(),u.ec(16,"textarea",7),u.ic(),u.jc(17,"div",8),u.jc(18,"div",9),u.jc(19,"input",10),u.rc("change",(function(e){return t.setSelectedImage(e)})),u.ic(),u.ic(),u.jc(20,"div",9),u.jc(21,"button",11),u.Wc(22,"Submit"),u.ic(),u.ic(),u.ic(),u.ic(),u.ic(),u.ec(23,"div",12),u.jc(24,"div",13),u.Wc(25,"Active Features"),u.ic(),u.jc(26,"table",14),u.jc(27,"tr"),u.jc(28,"th"),u.Wc(29,"Image"),u.ic(),u.jc(30,"th"),u.Wc(31,"Title"),u.ic(),u.jc(32,"th"),u.Wc(33,"Description"),u.ic(),u.jc(34,"th"),u.Wc(35,"Action"),u.ic(),u.ic(),u.Vc(36,k,15,3,"tr",15),u.ic(),u.ic(),u.jc(37,"div",16),u.jc(38,"div",17),u.jc(39,"div",18),u.Wc(40,"Edit Feature"),u.ic(),u.jc(41,"div",19),u.rc("click",(function(){return t.modal.editFeatureModal=!1})),u.Wc(42,"\xd7"),u.ic(),u.jc(43,"div",20),u.Vc(44,M,1,2,"edit-feature",21),u.ic(),u.ic(),u.ic()}2&e&&(u.Pb(5),u.Bc("ngModel",t.showFeatures),u.Pb(31),u.Bc("ngForOf",t.features),u.Pb(1),u.Bc("show",t.modal.editFeatureModal)("options",u.Cc(5,C)),u.Pb(7),u.Bc("ngIf",t.modal.editFeatureModal))},directives:[d.a,f.a,m.a,g.k,g.n,g.v,g.l,g.m,p.b,p.e,h.a,g.b,v.b,a.j,b.a,a.k,j.a,F],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),w)}],I=((y=function e(){_classCallCheck(this,e)}).\u0275mod=u.bc({type:y}),y.\u0275inj=u.ac({factory:function(e){return new(e||y)},imports:[[a.c,n.a,r.f.forChild(S)]]}),y)}}]);