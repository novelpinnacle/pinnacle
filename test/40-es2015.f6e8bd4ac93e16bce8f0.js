(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{IwBt:function(e,t,c){"use strict";c.r(t),c.d(t,"ManageUsersModule",(function(){return qe}));var i=c("tyNb"),n=c("n+G7"),s=c("SP9e"),o=c("fXoL"),a=c("4KEQ"),r=c("QeEr"),d=c("aCk2"),l=c("G0I0"),u=c("3Pt+"),g=c("kmnG"),m=c("qFsG"),h=c("QibW"),p=c("z17N"),b=c("bTqV"),f=c("d3UM"),j=c("FKr1"),v=c("ofXK"),M=c("V/o5");const C=["imageSRC"],I=["imageTarget"],P=["signatureSRC"],w=["signatureTarget"],B=["candidateForm"];function x(e,t){if(1&e&&(o.jc(0,"mat-option",17),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.roleId),o.Pb(1),o.Xc(e.roleName)}}function S(e,t){if(1&e&&(o.jc(0,"mat-option",17),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.userId),o.Pb(1),o.Xc(e.name)}}let O=(()=>{class e{constructor(e,t){this.coreService=e,this.dialog=t,this.form={username:null,password:null,name:null,email:null,gender:null,dob:null,employeeId:null,phone:null,qualification:null,biometricId:null,regDate:null,address:null,city:null,state:null,roleId:null,leaveSupervisorId:null},this.roles=[],this.users=[],this.loading=!1}ngOnInit(){setTimeout(()=>{this.showSelectedImage(this.imageSRC.nativeElement,this.imageTarget.nativeElement),this.showSelectedImage(this.signatureSRC.nativeElement,this.signatureTarget.nativeElement)},10),this.coreService.getRequest(s.a.API_URL+"users/roles").subscribe(e=>this.roles=e),this.coreService.getRequest(s.a.API_URL+"users").subscribe(e=>this.users=e)}showSelectedImage(e,t){var c=new FileReader;c.onload=function(e){t.src=this.result},e.addEventListener("change",(function(){c.readAsDataURL(e.files[0])}))}setSelectedImage(e){this.selectedImage=e.target.files[0]}setSelectedSignature(e){this.selectedSignature=e.target.files[0]}saveData(e){let t=new FormData;t.append("image",this.selectedImage),t.append("signature",this.selectedSignature),Object.keys(e.value).forEach(c=>{"dob"!=c&&"regDate"!=c||(e.value[c]=new Date(e.value[c]+" UTC").toISOString().slice(0,19).replace("T"," ")),t.append(c,e.value[c])}),this.loading=!0,this.coreService.uploadRequest(s.a.API_URL+"users/",t).subscribe(e=>{this.dialog.showDialog({content:e.message}),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["add-user"]],viewQuery:function(e,t){var c;1&e&&(o.cd(C,!0),o.cd(I,!0),o.cd(P,!0),o.cd(w,!0),o.cd(B,!0)),2&e&&(o.Hc(c=o.sc())&&(t.imageSRC=c.first),o.Hc(c=o.sc())&&(t.imageTarget=c.first),o.Hc(c=o.sc())&&(t.signatureSRC=c.first),o.Hc(c=o.sc())&&(t.signatureTarget=c.first),o.Hc(c=o.sc())&&(t.candidateForm=c.first))},decls:142,vars:31,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngSubmit"],["candidateForm","ngForm"],[1,"row","justify-content-between"],[1,"add-form-cols"],["matInput","","name","username","required","",3,"ngModel","ngModelChange"],["type","password","matInput","","name","password","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","name","email",3,"email","ngModel","ngModelChange"],[1,"add-form-cols-66-percent"],[1,"add-form-cols-50"],[2,"margin-top","10px"],["matInput","","name","name","required","",3,"ngModel","ngModelChange"],[2,"color","#666"],["id","gender-wrapper"],["name","gender","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","name","employeeId",3,"ngModel","ngModelChange"],["matInput","","name","phone","pattern","^[0-9]{10}$","minlength","10","maxlength","10",3,"ngModel","ngModelChange"],["phon","ngModel"],["name","dob","matInput","","placeholder","D.O.B","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dob",""],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["name","regDate","matInput","","placeholder","Date of Registration","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dt2",""],[1,"add-form-cols","upl"],[1,"row","upload"],[1,"upload-box"],["src","assets/images/upload-man.png"],["imageTarget",""],["type","file","name","image",3,"change"],["imageSRC",""],["type","button","color","primary","mat-raised-button","",3,"click"],["src","assets/images/signature.png"],["signatureTarget",""],["type","file","name","signature",3,"change"],["signatureSRC",""],["matInput","","name","qualification",3,"ngModel","ngModelChange"],["matInput","","name","biometricId",3,"ngModel","ngModelChange"],["matInput","","name","address","required","",3,"ngModel","ngModelChange"],["matInput","","name","state","required","",3,"ngModel","ngModelChange"],["matInput","","name","city","required","",3,"ngModel","ngModelChange"],["name","roleId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","leaveSupervisorId","required","",3,"ngModel","ngModelChange"],[1,"row",2,"justify-content","flex-end"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"show"]],template:function(e,t){if(1&e){const e=o.kc();o.ec(0,"admin-header"),o.ec(1,"admin-sidebar"),o.jc(2,"div",0),o.jc(3,"div",1),o.Wc(4,"Add User"),o.ic(),o.jc(5,"div",2),o.jc(6,"form",3,4),o.rc("ngSubmit",(function(){o.Mc(e);const c=o.Ic(7);return t.saveData(c)})),o.jc(8,"fieldset"),o.jc(9,"legend"),o.Wc(10,"Login Details & Email"),o.ic(),o.jc(11,"div",5),o.jc(12,"div",6),o.jc(13,"mat-form-field"),o.jc(14,"mat-label"),o.Wc(15,"Username"),o.ic(),o.jc(16,"input",7),o.rc("ngModelChange",(function(e){return t.form.username=e})),o.ic(),o.ic(),o.ic(),o.jc(17,"div",6),o.jc(18,"mat-form-field"),o.jc(19,"mat-label"),o.Wc(20,"Password"),o.ic(),o.jc(21,"input",8),o.rc("ngModelChange",(function(e){return t.form.password=e})),o.ic(),o.ic(),o.ic(),o.jc(22,"div",6),o.jc(23,"mat-form-field"),o.jc(24,"mat-label"),o.Wc(25,"Email"),o.ic(),o.jc(26,"input",9),o.rc("ngModelChange",(function(e){return t.form.email=e})),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(27,"fieldset"),o.jc(28,"legend"),o.Wc(29,"User Details"),o.ic(),o.jc(30,"div",5),o.jc(31,"div",10),o.jc(32,"div",5),o.jc(33,"div",11),o.jc(34,"mat-form-field",12),o.jc(35,"mat-label"),o.Wc(36,"Name"),o.ic(),o.jc(37,"input",13),o.rc("ngModelChange",(function(e){return t.form.name=e})),o.ic(),o.ic(),o.ic(),o.jc(38,"div",11),o.jc(39,"label",14),o.Wc(40,"Gender"),o.ic(),o.jc(41,"div",15),o.jc(42,"mat-radio-group",16),o.rc("ngModelChange",(function(e){return t.form.gender=e})),o.jc(43,"mat-radio-button",17),o.Wc(44,"Male"),o.ic(),o.jc(45,"mat-radio-button",17),o.Wc(46,"Female"),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(47,"div",11),o.jc(48,"mat-form-field"),o.jc(49,"mat-label"),o.Wc(50,"Employee Id"),o.ic(),o.jc(51,"input",18),o.rc("ngModelChange",(function(e){return t.form.employeeId=e})),o.ic(),o.ic(),o.ic(),o.jc(52,"div",11),o.jc(53,"mat-form-field"),o.jc(54,"mat-label"),o.Wc(55,"Mobile Number"),o.ic(),o.jc(56,"input",19,20),o.rc("ngModelChange",(function(e){return t.form.phone=e})),o.ic(),o.ic(),o.ic(),o.jc(58,"div",11),o.jc(59,"mat-form-field"),o.jc(60,"input",21,22),o.rc("ngModelChange",(function(e){return t.form.dob=e})),o.ic(),o.jc(62,"span",23),o.Wc(63,"calendar_today"),o.ic(),o.ec(64,"owl-date-time",24,25),o.ic(),o.ic(),o.jc(66,"div",11),o.jc(67,"mat-form-field"),o.jc(68,"input",26,22),o.rc("ngModelChange",(function(e){return t.form.regDate=e})),o.ic(),o.jc(70,"span",23),o.Wc(71,"calendar_today"),o.ic(),o.ec(72,"owl-date-time",24,27),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(74,"div",28),o.jc(75,"div",29),o.jc(76,"div",30),o.ec(77,"img",31,32),o.jc(79,"input",33,34),o.rc("change",(function(e){return t.setSelectedImage(e)})),o.ic(),o.ec(81,"br"),o.jc(82,"button",35),o.rc("click",(function(){return o.Mc(e),o.Ic(80).click()})),o.Wc(83,"Upload Image"),o.ic(),o.jc(84,"p"),o.Wc(85,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),o.ic(),o.ic(),o.jc(86,"div",30),o.ec(87,"img",36,37),o.jc(89,"input",38,39),o.rc("change",(function(e){return t.setSelectedSignature(e)})),o.ic(),o.ec(91,"br"),o.jc(92,"button",35),o.rc("click",(function(){return o.Mc(e),o.Ic(90).click()})),o.Wc(93,"Upload Image"),o.ic(),o.jc(94,"p"),o.Wc(95,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(96,"div",5),o.jc(97,"div",6),o.jc(98,"mat-form-field"),o.jc(99,"mat-label"),o.Wc(100,"Qualification"),o.ic(),o.jc(101,"input",40),o.rc("ngModelChange",(function(e){return t.form.qualification=e})),o.ic(),o.ic(),o.ic(),o.jc(102,"div",6),o.jc(103,"mat-form-field"),o.jc(104,"mat-label"),o.Wc(105,"Biometric Id"),o.ic(),o.jc(106,"input",41),o.rc("ngModelChange",(function(e){return t.form.biometricId=e})),o.ic(),o.ic(),o.ic(),o.jc(107,"div",6),o.jc(108,"mat-form-field"),o.jc(109,"mat-label"),o.Wc(110,"Address"),o.ic(),o.jc(111,"input",42),o.rc("ngModelChange",(function(e){return t.form.address=e})),o.ic(),o.ic(),o.ic(),o.jc(112,"div",6),o.jc(113,"mat-form-field"),o.jc(114,"mat-label"),o.Wc(115,"State"),o.ic(),o.jc(116,"input",43),o.rc("ngModelChange",(function(e){return t.form.state=e})),o.ic(),o.ic(),o.ic(),o.jc(117,"div",6),o.jc(118,"mat-form-field"),o.jc(119,"mat-label"),o.Wc(120,"City"),o.ic(),o.jc(121,"input",44),o.rc("ngModelChange",(function(e){return t.form.city=e})),o.ic(),o.ic(),o.ic(),o.jc(122,"div",6),o.jc(123,"mat-form-field"),o.jc(124,"mat-label"),o.Wc(125,"Role"),o.ic(),o.jc(126,"mat-select",45),o.rc("ngModelChange",(function(e){return t.form.roleId=e})),o.jc(127,"mat-option",17),o.Wc(128,"Select Role"),o.ic(),o.Vc(129,x,2,2,"mat-option",46),o.ic(),o.ic(),o.ic(),o.jc(130,"div",6),o.jc(131,"mat-form-field"),o.jc(132,"mat-label"),o.Wc(133,"Leave Supervisor"),o.ic(),o.jc(134,"mat-select",47),o.rc("ngModelChange",(function(e){return t.form.leaveSupervisorId=e})),o.jc(135,"mat-option",17),o.Wc(136,"Select Leave Supervisor"),o.ic(),o.Vc(137,S,2,2,"mat-option",46),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(138,"div",48),o.jc(139,"button",49),o.Wc(140,"Save"),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.ec(141,"loading",50)}if(2&e){const e=o.Ic(7),c=o.Ic(65),i=o.Ic(73);o.Pb(16),o.Bc("ngModel",t.form.username),o.Pb(5),o.Bc("ngModel",t.form.password),o.Pb(5),o.Bc("email",!0)("ngModel",t.form.email),o.Pb(11),o.Bc("ngModel",t.form.name),o.Pb(5),o.Bc("ngModel",t.form.gender),o.Pb(1),o.Bc("value","Male"),o.Pb(2),o.Bc("value","Female"),o.Pb(6),o.Bc("ngModel",t.form.employeeId),o.Pb(5),o.Bc("ngModel",t.form.phone),o.Pb(4),o.Bc("ngModel",t.form.dob)("owlDateTime",c)("owlDateTimeTrigger",c),o.Pb(4),o.Bc("pickerType","calendar"),o.Pb(4),o.Bc("ngModel",t.form.regDate)("owlDateTime",i)("owlDateTimeTrigger",i),o.Pb(4),o.Bc("pickerType","calendar"),o.Pb(29),o.Bc("ngModel",t.form.qualification),o.Pb(5),o.Bc("ngModel",t.form.biometricId),o.Pb(5),o.Bc("ngModel",t.form.address),o.Pb(5),o.Bc("ngModel",t.form.state),o.Pb(5),o.Bc("ngModel",t.form.city),o.Pb(5),o.Bc("ngModel",t.form.roleId),o.Pb(1),o.Bc("value",null),o.Pb(2),o.Bc("ngForOf",t.roles),o.Pb(5),o.Bc("ngModel",t.form.leaveSupervisorId),o.Pb(1),o.Bc("value",null),o.Pb(2),o.Bc("ngForOf",t.users),o.Pb(2),o.Bc("disabled",!e.valid),o.Pb(2),o.Bc("show",t.loading)}},directives:[d.a,l.a,u.v,u.l,u.m,g.b,g.e,m.a,u.b,u.r,u.k,u.n,u.c,h.b,h.a,u.q,u.g,u.f,p.b,p.d,g.f,p.a,b.b,f.a,j.h,v.j,M.a],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.add-form-row[_ngcontent-%COMP%]{justify-content:space-between}.add-form-cols[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%]{width:calc(66.66% - 10px)}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}fieldset[_ngcontent-%COMP%]{padding:0 10px 10px;margin-bottom:0;border:1px solid transparent}legend[_ngcontent-%COMP%]{padding:0;font-weight:500;color:#0063c6}#gender-wrapper[_ngcontent-%COMP%]{margin-top:10px}#gender-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row.upload[_ngcontent-%COMP%]{height:calc(100% - 17px);justify-content:space-between;align-items:center}.upload-box[_ngcontent-%COMP%]{padding:7px;border:1px solid #888;width:calc(50% - 10px);height:100%}.upload-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:90px;border:1px solid #888}.upload-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;padding:1px 10px;font-size:12px;border-radius:0;line-height:25px}.upload-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;margin-top:4px;font-size:10px;line-height:14px}[type=file][_ngcontent-%COMP%]{position:absolute;left:-1600px}@media screen and (max-width:920px){.add-form-cols[_ngcontent-%COMP%]{width:calc(50% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%], .add-form-cols.upl[_ngcontent-%COMP%]{width:100%}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),e})();var _=c("mrSG"),y=c("0EQZ"),k=c("M9IT"),W=c("Dh3D"),F=c("+0xr"),D=c("byUP"),R=c("Sz29"),U=c("FnMX"),T=c("NFeN"),$=c("ZMsq"),q=c("bSwM");const E=["imageSRC"],A=["imageTarget"],V=["signatureSRC"],L=["signatureTarget"];function N(e,t){if(1&e&&(o.jc(0,"mat-option",11),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.roleId),o.Pb(1),o.Xc(e.roleName)}}function H(e,t){if(1&e&&(o.jc(0,"mat-option",11),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.userId),o.Pb(1),o.Xc(e.name)}}let X=(()=>{class e{constructor(e,t){this.coreService=e,this.dialog=t,this.loading=!1,this.courses=[],this.batches=[],this.roles=[],this.users=[]}ngOnInit(){this.user.dob=new Date(this.user.dob),this.user.regDate=new Date(this.user.regDate),setTimeout(()=>{this.showSelectedImage(this.imageSRC.nativeElement,this.imageTarget.nativeElement),this.showSelectedImage(this.signatureSRC.nativeElement,this.signatureTarget.nativeElement)},10),this.coreService.getRequest(s.a.API_URL+"users/roles").subscribe(e=>this.roles=e),this.coreService.getRequest(s.a.API_URL+"users").subscribe(e=>this.users=e)}updateData(e){let t=new FormData;t.append("image",this.selectedImage),t.append("signature",this.selectedSignature),Object.keys(e.value).forEach(c=>{"dob"!=c&&"regDate"!=c||(e.value[c]=new Date(e.value[c]+" UTC").toISOString().slice(0,19).replace("T"," "),this.user[c]=e.value[c].split(" ")[0]),t.append(c,e.value[c])}),this.loading=!0,this.coreService.uploadRequest(s.a.API_URL+"users/update",t).subscribe(t=>{this.dialog.showDialog({content:t.message}),this.user.roleName=this.roles.find(t=>t.roleId==e.value.roleId).roleName,this.loading=!1,this.modals.showEditModal=!1})}showSelectedImage(e,t){let c=new FileReader;c.onload=function(e){t.src=this.result},e.addEventListener("change",(function(){c.readAsDataURL(e.files[0])}))}setSelectedImage(e){this.selectedImage=e.target.files[0]}setSelectedSignature(e){this.selectedSignature=e.target.files[0]}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["edit-user"]],viewQuery:function(e,t){var c;1&e&&(o.cd(E,!0),o.cd(A,!0),o.cd(V,!0),o.cd(L,!0)),2&e&&(o.Hc(c=o.sc())&&(t.imageSRC=c.first),o.Hc(c=o.sc())&&(t.imageTarget=c.first),o.Hc(c=o.sc())&&(t.signatureSRC=c.first),o.Hc(c=o.sc())&&(t.signatureTarget=c.first))},inputs:{user:"user",modals:"modals"},decls:119,vars:30,consts:[[3,"ngSubmit"],["candidateForm","ngForm"],[1,"row","justify-content-between"],[1,"add-form-cols-66-percent"],[1,"add-form-cols-50"],["type","hidden","name","userId",3,"ngModel","ngModelChange"],[2,"margin-top","10px"],["matInput","","name","name","required","",3,"ngModel","ngModelChange"],[2,"color","#666"],["id","gender-wrapper"],["name","gender","required","",3,"ngModel","ngModelChange"],[3,"value"],["type","email","matInput","","name","email","required","",3,"email","ngModel","ngModelChange"],["matInput","","name","employeeId",3,"ngModel","ngModelChange"],["matInput","","name","phone","minlength","10","maxlength","10","pattern","^[0-9]{10}$","required","",3,"ngModel","ngModelChange"],["name","dob","matInput","","placeholder","D.O.B","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dob",""],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["name","regDate","matInput","","placeholder","Date of Registration",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dor",""],["dt2",""],[1,"add-form-cols","upl"],[1,"row","upload"],[1,"upload-box"],["src","assets/images/upload-man.png"],["imageTarget",""],["type","file","name","image",3,"change"],["imageSRC",""],["type","button","color","primary","mat-raised-button","",3,"click"],["src","assets/images/signature.png"],["signatureTarget",""],["type","file","name","signature",3,"change"],["signatureSRC",""],[1,"add-form-cols"],["matInput","","name","qualification",3,"ngModel","ngModelChange"],["matInput","","name","biometricId",3,"ngModel","ngModelChange"],["matInput","","name","address","required","",3,"ngModel","ngModelChange"],["matInput","","name","state","required","",3,"ngModel","ngModelChange"],["matInput","","name","city","required","",3,"ngModel","ngModelChange"],["name","roleId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","leaveSupervisorId","required","",3,"ngModel","ngModelChange"],[1,"row",2,"justify-content","flex-end"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"show"]],template:function(e,t){if(1&e){const e=o.kc();o.jc(0,"form",0,1),o.rc("ngSubmit",(function(){o.Mc(e);const c=o.Ic(1);return t.updateData(c)})),o.jc(2,"div",2),o.jc(3,"div",3),o.jc(4,"div",2),o.jc(5,"div",4),o.jc(6,"input",5),o.rc("ngModelChange",(function(e){return t.user.userId=e})),o.ic(),o.jc(7,"mat-form-field",6),o.jc(8,"mat-label"),o.Wc(9,"Name"),o.ic(),o.jc(10,"input",7),o.rc("ngModelChange",(function(e){return t.user.name=e})),o.ic(),o.ic(),o.ic(),o.jc(11,"div",4),o.jc(12,"label",8),o.Wc(13,"Gender"),o.ic(),o.jc(14,"div",9),o.jc(15,"mat-radio-group",10),o.rc("ngModelChange",(function(e){return t.user.gender=e})),o.jc(16,"mat-radio-button",11),o.Wc(17,"Male"),o.ic(),o.jc(18,"mat-radio-button",11),o.Wc(19,"Female"),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(20,"div",4),o.jc(21,"mat-form-field"),o.jc(22,"mat-label"),o.Wc(23,"Email"),o.ic(),o.jc(24,"input",12),o.rc("ngModelChange",(function(e){return t.user.email=e})),o.ic(),o.ic(),o.ic(),o.jc(25,"div",4),o.jc(26,"mat-form-field"),o.jc(27,"mat-label"),o.Wc(28,"Employee Id"),o.ic(),o.jc(29,"input",13),o.rc("ngModelChange",(function(e){return t.user.employeeId=e})),o.ic(),o.ic(),o.ic(),o.jc(30,"div",4),o.jc(31,"mat-form-field"),o.jc(32,"mat-label"),o.Wc(33,"Mobile Number"),o.ic(),o.jc(34,"input",14),o.rc("ngModelChange",(function(e){return t.user.phone=e})),o.ic(),o.ic(),o.ic(),o.jc(35,"div",4),o.jc(36,"mat-form-field"),o.jc(37,"input",15,16),o.rc("ngModelChange",(function(e){return t.user.dob=e})),o.ic(),o.jc(39,"span",17),o.Wc(40,"calendar_today"),o.ic(),o.ec(41,"owl-date-time",18,19),o.ic(),o.ic(),o.jc(43,"div",4),o.jc(44,"mat-form-field"),o.jc(45,"input",20,21),o.rc("ngModelChange",(function(e){return t.user.regDate=e})),o.ic(),o.jc(47,"span",17),o.Wc(48,"calendar_today"),o.ic(),o.ec(49,"owl-date-time",18,22),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(51,"div",23),o.jc(52,"div",24),o.jc(53,"div",25),o.ec(54,"img",26,27),o.jc(56,"input",28,29),o.rc("change",(function(e){return t.setSelectedImage(e)})),o.ic(),o.ec(58,"br"),o.jc(59,"button",30),o.rc("click",(function(){return o.Mc(e),o.Ic(57).click()})),o.Wc(60,"Upload Image"),o.ic(),o.jc(61,"p"),o.Wc(62,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),o.ic(),o.ic(),o.jc(63,"div",25),o.ec(64,"img",31,32),o.jc(66,"input",33,34),o.rc("change",(function(e){return t.setSelectedSignature(e)})),o.ic(),o.ec(68,"br"),o.jc(69,"button",30),o.rc("click",(function(){return o.Mc(e),o.Ic(67).click()})),o.Wc(70,"Upload Image"),o.ic(),o.jc(71,"p"),o.Wc(72,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(73,"div",2),o.jc(74,"div",35),o.jc(75,"mat-form-field"),o.jc(76,"mat-label"),o.Wc(77,"Qualification"),o.ic(),o.jc(78,"input",36),o.rc("ngModelChange",(function(e){return t.user.qualification=e})),o.ic(),o.ic(),o.ic(),o.jc(79,"div",35),o.jc(80,"mat-form-field"),o.jc(81,"mat-label"),o.Wc(82,"Biometric Id"),o.ic(),o.jc(83,"input",37),o.rc("ngModelChange",(function(e){return t.user.bioid=e})),o.ic(),o.ic(),o.ic(),o.jc(84,"div",35),o.jc(85,"mat-form-field"),o.jc(86,"mat-label"),o.Wc(87,"Address"),o.ic(),o.jc(88,"input",38),o.rc("ngModelChange",(function(e){return t.user.address=e})),o.ic(),o.ic(),o.ic(),o.jc(89,"div",35),o.jc(90,"mat-form-field"),o.jc(91,"mat-label"),o.Wc(92,"State"),o.ic(),o.jc(93,"input",39),o.rc("ngModelChange",(function(e){return t.user.state=e})),o.ic(),o.ic(),o.ic(),o.jc(94,"div",35),o.jc(95,"mat-form-field"),o.jc(96,"mat-label"),o.Wc(97,"City"),o.ic(),o.jc(98,"input",40),o.rc("ngModelChange",(function(e){return t.user.city=e})),o.ic(),o.ic(),o.ic(),o.jc(99,"div",35),o.jc(100,"mat-form-field"),o.jc(101,"mat-label"),o.Wc(102,"Role"),o.ic(),o.jc(103,"mat-select",41),o.rc("ngModelChange",(function(e){return t.user.roleId=e})),o.jc(104,"mat-option",11),o.Wc(105,"Select Role"),o.ic(),o.Vc(106,N,2,2,"mat-option",42),o.ic(),o.ic(),o.ic(),o.jc(107,"div",35),o.jc(108,"mat-form-field"),o.jc(109,"mat-label"),o.Wc(110,"Leave Supervisor"),o.ic(),o.jc(111,"mat-select",43),o.rc("ngModelChange",(function(e){return t.user.leaveSupervisorId=e})),o.jc(112,"mat-option",11),o.Wc(113,"Select Leave Supervisor"),o.ic(),o.Vc(114,H,2,2,"mat-option",42),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(115,"div",44),o.jc(116,"button",45),o.Wc(117,"Save"),o.ic(),o.ic(),o.ic(),o.ec(118,"loading",46)}if(2&e){const e=o.Ic(1),c=o.Ic(42),i=o.Ic(50);o.Pb(6),o.Bc("ngModel",t.user.userId),o.Pb(4),o.Bc("ngModel",t.user.name),o.Pb(5),o.Bc("ngModel",t.user.gender),o.Pb(1),o.Bc("value","Male"),o.Pb(2),o.Bc("value","Female"),o.Pb(6),o.Bc("email",!0)("ngModel",t.user.email),o.Pb(5),o.Bc("ngModel",t.user.employeeId),o.Pb(5),o.Bc("ngModel",t.user.phone),o.Pb(3),o.Bc("ngModel",t.user.dob)("owlDateTime",c)("owlDateTimeTrigger",c),o.Pb(4),o.Bc("pickerType","calendar"),o.Pb(4),o.Bc("ngModel",t.user.regDate)("owlDateTime",i)("owlDateTimeTrigger",i),o.Pb(4),o.Bc("pickerType","calendar"),o.Pb(29),o.Bc("ngModel",t.user.qualification),o.Pb(5),o.Bc("ngModel",t.user.bioid),o.Pb(5),o.Bc("ngModel",t.user.address),o.Pb(5),o.Bc("ngModel",t.user.state),o.Pb(5),o.Bc("ngModel",t.user.city),o.Pb(5),o.Bc("ngModel",t.user.roleId),o.Pb(1),o.Bc("value",null),o.Pb(2),o.Bc("ngForOf",t.roles),o.Pb(5),o.Bc("ngModel",t.user.leaveSupervisorId),o.Pb(1),o.Bc("value",null),o.Pb(2),o.Bc("ngForOf",t.users),o.Pb(2),o.Bc("disabled",e.invalid),o.Pb(2),o.Bc("show",t.loading)}},directives:[u.v,u.l,u.m,u.b,u.k,u.n,g.b,g.e,m.a,u.r,h.b,h.a,u.c,u.g,u.f,u.q,p.b,p.d,g.f,p.a,b.b,f.a,j.h,v.j,M.a],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.add-form-row[_ngcontent-%COMP%]{justify-content:space-between}.add-form-cols[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%]{width:calc(66.66% - 10px)}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}fieldset[_ngcontent-%COMP%]{padding:0 10px 10px;margin-bottom:0;border:1px solid transparent}legend[_ngcontent-%COMP%]{padding:0;font-weight:500;color:#0063c6}#gender-wrapper[_ngcontent-%COMP%]{margin-top:10px}#gender-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row.upload[_ngcontent-%COMP%]{height:calc(100% - 17px);justify-content:space-between;align-items:center}.upload-box[_ngcontent-%COMP%]{padding:7px;border:1px solid #888;width:calc(50% - 10px);height:100%}.upload-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:90px;border:1px solid #888}.upload-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;padding:1px 10px;font-size:12px;border-radius:0;line-height:25px}.upload-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;margin-top:4px;font-size:10px;line-height:14px}[type=file][_ngcontent-%COMP%]{position:absolute;left:-1600px}@media screen and (max-width:920px){.add-form-cols[_ngcontent-%COMP%]{width:calc(50% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%], .add-form-cols.upl[_ngcontent-%COMP%]{width:100%}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}}","form[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(0,0,0,.25);padding:10px}"]}),e})();var z=c("CGWC");function Q(e,t){if(1&e){const e=o.kc();o.jc(0,"div",9),o.jc(1,"mat-checkbox",10),o.rc("ngModelChange",(function(c){o.Mc(e);const i=t.$implicit;return o.vc().$implicit.permissions[i]=c})),o.Wc(2),o.ic(),o.ic()}if(2&e){const e=t.$implicit,c=o.vc().$implicit,i=o.vc();o.Pb(1),o.Bc("ngModel",c.permissions[e]),o.Pb(1),o.Yc(" ",i.renameKeys(e)," ")}}function Y(e,t){if(1&e){const e=o.kc();o.jc(0,"div",4),o.ec(1,"div",5),o.wc(2,"safe"),o.jc(3,"mat-checkbox",6),o.rc("change",(function(c){o.Mc(e);const i=t.$implicit;return o.vc().toggleAll(i,c)})),o.ic(),o.jc(4,"div",7),o.Vc(5,Q,3,2,"div",8),o.ic(),o.ic()}if(2&e){const e=t.$implicit,c=o.vc();o.Pb(1),o.Bc("innerHTML",o.xc(2,2,e.permissionsTitle),o.Nc),o.Pb(4),o.Bc("ngForOf",c.getKeys(e.permissions))}}let G=(()=>{class e{constructor(e,t){this.coreService=e,this.dialog=t,this.permissions=[]}ngOnInit(){this.permissions=JSON.parse(this.user.permissions)}getKeys(e){return Object.keys(e)}renameKeys(e){return e.split("_").join(" ")}toggleAll(e,t){for(let c in e.permissions)e.permissions[c]=+t.checked}updatePermissions(){this.coreService.putRequest(s.a.API_URL+"users/permissions/",{userId:this.user.userId,permissions:this.permissions}).subscribe(e=>{this.user.permissions=JSON.stringify(this.permissions),this.dialog.showDialog({content:e.message}),this.modals.showEditPermissionsModal=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["edit-user-permissions"]],inputs:{user:"user",modals:"modals"},decls:5,vars:2,consts:[["mat-raised-button","","color","primary",3,"click"],["id","permissions-wrapper"],["class","permission-item",4,"ngFor","ngForOf"],[3,"show"],[1,"permission-item"],[1,"permission-title",3,"innerHTML"],[1,"toggle-checkbox",3,"change"],[1,"row"],["class","col-sm-2",4,"ngFor","ngForOf"],[1,"col-sm-2"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.jc(0,"button",0),o.rc("click",(function(){return t.updatePermissions()})),o.Wc(1,"Update"),o.ic(),o.jc(2,"div",1),o.Vc(3,Y,6,4,"div",2),o.ic(),o.ec(4,"loading",3)),2&e&&(o.Pb(3),o.Bc("ngForOf",t.permissions),o.Pb(1),o.Bc("show",t.loading))},directives:[b.b,v.j,M.a,q.a,u.k,u.n],pipes:[z.a],styles:["#permissions-wrapper[_ngcontent-%COMP%]{background-color:#fff;max-height:70vh;overflow-y:auto;margin-top:10px}.permission-item[_ngcontent-%COMP%]{padding:8px 15px;box-shadow:0 0 2px -1px rgba(0,0,0,.25);margin:15px 0;background:#fcfcfc}.permission-item[_ngcontent-%COMP%]:first-child{margin-top:0}.permission-title[_ngcontent-%COMP%]{display:inline-block;font-size:15px;font-weight:500;color:#555;margin-bottom:5px}mat-checkbox[_ngcontent-%COMP%]{margin-top:5px;display:block;text-transform:capitalize}.toggle-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-left:10px}"]}),e})();function K(e,t){1&e&&(o.jc(0,"button",30),o.ec(1,"i",31),o.Wc(2," Add"),o.ic())}function J(e,t){if(1&e){const e=o.kc();o.jc(0,"th",32),o.jc(1,"mat-checkbox",33),o.rc("change",(function(t){o.Mc(e);const c=o.vc();return t?c.masterToggle():null})),o.ic(),o.ic()}if(2&e){const e=o.vc();o.Pb(1),o.Bc("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Z(e,t){if(1&e){const e=o.kc();o.jc(0,"td",34),o.jc(1,"mat-checkbox",35),o.rc("click",(function(t){return o.Mc(e),t.stopPropagation()}))("change",(function(c){o.Mc(e);const i=t.$implicit,n=o.vc();return c?n.selection.toggle(i):null})),o.ic(),o.ic()}if(2&e){const e=t.$implicit,c=o.vc();o.Pb(1),o.Bc("checked",c.selection.isSelected(e))}}function ee(e,t){1&e&&(o.jc(0,"th",36),o.Wc(1," Name "),o.ic())}function te(e,t){if(1&e&&(o.jc(0,"td",34),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Pb(1),o.Yc(" ",e.name," ")}}function ce(e,t){1&e&&(o.jc(0,"th",36),o.Wc(1," Role "),o.ic())}function ie(e,t){if(1&e&&(o.jc(0,"td",34),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Pb(1),o.Yc(" ",e.roleName," ")}}function ne(e,t){1&e&&(o.jc(0,"th",36),o.Wc(1," Phone "),o.ic())}function se(e,t){if(1&e&&(o.jc(0,"td",34),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Pb(1),o.Yc(" ",e.phone," ")}}function oe(e,t){1&e&&(o.jc(0,"th",32),o.Wc(1," Action "),o.ic())}function ae(e,t){if(1&e){const e=o.kc();o.jc(0,"button",38),o.rc("click",(function(){o.Mc(e);const t=o.vc().$implicit;return o.vc().editUser(t)})),o.jc(1,"mat-icon"),o.Wc(2,"create"),o.ic(),o.ic()}}function re(e,t){if(1&e){const e=o.kc();o.jc(0,"button",41),o.rc("click",(function(){o.Mc(e);const t=o.vc().$implicit;return o.vc().showDelete(t)})),o.jc(1,"mat-icon"),o.Wc(2,"delete"),o.ic(),o.ic()}}function de(e,t){if(1&e){const e=o.kc();o.jc(0,"td",37),o.jc(1,"button",38),o.rc("click",(function(){o.Mc(e);const c=t.$implicit;return o.vc().showFullUser(c)})),o.jc(2,"mat-icon"),o.Wc(3,"open_in_full"),o.ic(),o.ic(),o.Wc(4,"\xa0 "),o.jc(5,"button",38),o.rc("click",(function(){o.Mc(e);const c=t.$implicit;return o.vc().editPermissions(c)})),o.jc(6,"mat-icon"),o.Wc(7,"lock"),o.ic(),o.ic(),o.Wc(8,"\xa0 "),o.Vc(9,ae,3,0,"button",39),o.Wc(10," \xa0"),o.Vc(11,re,3,0,"button",40),o.ic()}if(2&e){const e=o.vc();o.Pb(9),o.Bc("ngIf",e.permissions.edit_user),o.Pb(2),o.Bc("ngIf",e.permissions.delete_user)}}function le(e,t){1&e&&o.ec(0,"tr",42)}function ue(e,t){1&e&&o.ec(0,"tr",43)}function ge(e,t){if(1&e&&o.ec(0,"edit-user",44),2&e){const e=o.vc();o.Bc("modals",e.modals)("user",e.userToEdit)}}function me(e,t){if(1&e&&o.ec(0,"edit-user-permissions",44),2&e){const e=o.vc();o.Bc("modals",e.modals)("user",e.userToEdit)}}const he=function(){return[9]},pe=function(){return{width:"100%"}},be=["assignForm"];function fe(e,t){1&e&&(o.jc(0,"div",4),o.Wc(1,"Assign Batches"),o.ic())}function je(e,t){if(1&e&&(o.jc(0,"mat-option",14),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.userId),o.Pb(1),o.Xc(e.name)}}function ve(e,t){if(1&e&&(o.jc(0,"mat-option",14),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.courseId),o.Pb(1),o.Xc(e.course)}}function Me(e,t){if(1&e&&(o.jc(0,"mat-option",23),o.Wc(1),o.ic()),2&e){const e=t.$implicit,c=o.vc(3);o.Bc("value",e.batchId)("disabled",c.choosedBatchIds.includes(e.batchId)||c.userChoosedBatchIds.includes(e.batchId)),o.Pb(1),o.Yc(" ",e.batch,"")}}function Ce(e,t){if(1&e){const e=o.kc();o.jc(0,"button",24),o.rc("click",(function(){o.Mc(e);const t=o.vc().index;return o.vc(2).removeItem(t)})),o.jc(1,"mat-icon"),o.Wc(2,"delete"),o.ic(),o.ic()}}function Ie(e,t){if(1&e){const e=o.kc();o.jc(0,"div",15),o.jc(1,"div",16),o.jc(2,"mat-form-field"),o.jc(3,"mat-label"),o.Wc(4,"Select Course"),o.ic(),o.jc(5,"mat-select",17),o.rc("ngModelChange",(function(c){return o.Mc(e),t.$implicit.courseId=c}))("selectionChange",(function(){o.Mc(e);const c=t.$implicit,i=t.index;return o.vc(2).setBatches(c.courseId,i)})),o.Vc(6,ve,2,2,"mat-option",11),o.ic(),o.ic(),o.ic(),o.jc(7,"div",18),o.jc(8,"mat-form-field"),o.jc(9,"mat-label"),o.Wc(10,"Select Batch"),o.ic(),o.jc(11,"mat-select",17),o.rc("ngModelChange",(function(c){return o.Mc(e),t.$implicit.batchId=c}))("selectionChange",(function(){return o.Mc(e),o.vc(2).setChoosedIds()})),o.Vc(12,Me,2,3,"mat-option",19),o.ic(),o.ic(),o.ic(),o.jc(13,"div",20),o.jc(14,"button",21),o.rc("click",(function(t){o.Mc(e);const c=o.vc(2);return t.preventDefault(),c.addMore()})),o.jc(15,"mat-icon"),o.Wc(16,"add"),o.ic(),o.ic(),o.Wc(17,"\xa0\xa0 "),o.Vc(18,Ce,3,0,"button",22),o.ic(),o.ic()}if(2&e){const e=t.$implicit,c=t.index;o.Pb(5),o.Bc("ngModel",e.courseId)("name","courseId"+c),o.Pb(1),o.Bc("ngForOf",e.courses),o.Pb(5),o.Bc("ngModel",e.batchId)("name","batchId"+c),o.Pb(1),o.Bc("ngForOf",e.batches),o.Pb(6),o.Bc("ngIf",c>0)}}function Pe(e,t){if(1&e){const e=o.kc();o.jc(0,"div",8),o.jc(1,"form",null,9),o.jc(3,"mat-form-field"),o.jc(4,"mat-label"),o.Wc(5,"Select User"),o.ic(),o.jc(6,"mat-select",10),o.rc("ngModelChange",(function(t){return o.Mc(e),o.vc().userId=t}))("selectionChange",(function(){return o.Mc(e),o.vc().setUserChoosedIds()})),o.Vc(7,je,2,2,"mat-option",11),o.ic(),o.ic(),o.Vc(8,Ie,19,7,"div",12),o.jc(9,"button",13),o.rc("click",(function(){return o.Mc(e),o.vc().assignBatches()})),o.Wc(10,"Submit"),o.ic(),o.ic(),o.ic()}if(2&e){const e=o.Ic(2),t=o.vc();o.Pb(6),o.Bc("ngModel",t.userId),o.Pb(1),o.Bc("ngForOf",t.users),o.Pb(1),o.Bc("ngForOf",t.CourseBatches),o.Pb(1),o.Bc("disabled",e.invalid)}}function we(e,t){if(1&e){const e=o.kc();o.jc(0,"mat-icon",28),o.rc("click",(function(){o.Mc(e);const t=o.vc(),c=t.$implicit,i=t.index,n=o.vc().index;return o.vc().showRemoveBatchFromUser(c.userId,c.batchId,n,i)})),o.Wc(1,"delete"),o.ic()}}function Be(e,t){if(1&e&&(o.jc(0,"div",26),o.Wc(1),o.Vc(2,we,2,0,"mat-icon",27),o.ic()),2&e){const e=t.$implicit,c=o.vc(2);o.Pb(1),o.Yc(" ",e.course+" - "+e.batch," "),o.Pb(1),o.Bc("ngIf",c.permissions.deassign_user_batches)}}function xe(e,t){if(1&e&&(o.jc(0,"tr"),o.jc(1,"td"),o.Wc(2),o.ic(),o.jc(3,"td"),o.Vc(4,Be,3,2,"div",25),o.ic(),o.ic()),2&e){const e=t.$implicit;o.Pb(2),o.Xc(e.name),o.Pb(2),o.Bc("ngForOf",e.assignedBatches)}}const Se=["assignForm"];function Oe(e,t){if(1&e&&(o.jc(0,"mat-option",13),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.userId),o.Pb(1),o.Xc(e.name)}}function _e(e,t){if(1&e&&(o.jc(0,"mat-option",13),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.courseId),o.Pb(1),o.Xc(e.course)}}function ye(e,t){if(1&e&&(o.jc(0,"mat-option",13),o.Wc(1),o.ic()),2&e){const e=t.$implicit;o.Bc("value",e.batchId),o.Pb(1),o.Yc(" ",e.batch,"")}}function ke(e,t){if(1&e&&(o.jc(0,"mat-option",22),o.Wc(1),o.ic()),2&e){const e=t.$implicit,c=o.vc().$implicit,i=o.vc(2);o.Bc("value",e.subjectId)("disabled",i.choosedIds.includes(e.subjectId+"-"+c.batchId)||i.userChoosedIds.includes(e.subjectId+"-"+c.batchId)),o.Pb(1),o.Yc(" ",e.subjectId+" "+e.subject,"")}}function We(e,t){if(1&e){const e=o.kc();o.jc(0,"button",23),o.rc("click",(function(){o.Mc(e);const t=o.vc().index;return o.vc(2).removeItem(t)})),o.jc(1,"mat-icon"),o.Wc(2,"delete"),o.ic(),o.ic()}}function Fe(e,t){if(1&e){const e=o.kc();o.jc(0,"div",14),o.jc(1,"div",15),o.jc(2,"mat-form-field"),o.jc(3,"mat-label"),o.Wc(4,"Select Course"),o.ic(),o.jc(5,"mat-select",16),o.rc("ngModelChange",(function(c){return o.Mc(e),t.$implicit.courseId=c}))("selectionChange",(function(){o.Mc(e);const c=t.$implicit,i=t.index;return o.vc(2).setBatches(c.courseId,i)})),o.Vc(6,_e,2,2,"mat-option",10),o.ic(),o.ic(),o.ic(),o.jc(7,"div",17),o.jc(8,"mat-form-field"),o.jc(9,"mat-label"),o.Wc(10,"Select Batch"),o.ic(),o.jc(11,"mat-select",16),o.rc("ngModelChange",(function(c){return o.Mc(e),t.$implicit.batchId=c}))("selectionChange",(function(){o.Mc(e);const c=t.$implicit,i=t.index;return o.vc(2).setSubjects(c.batchId,i)})),o.Vc(12,ye,2,2,"mat-option",10),o.ic(),o.ic(),o.ic(),o.jc(13,"div",17),o.jc(14,"mat-form-field"),o.jc(15,"mat-label"),o.Wc(16,"Select Subject"),o.ic(),o.jc(17,"mat-select",16),o.rc("ngModelChange",(function(c){return o.Mc(e),t.$implicit.subjectId=c}))("selectionChange",(function(){return o.Mc(e),o.vc(2).setChoosedIds()})),o.Vc(18,ke,2,3,"mat-option",18),o.ic(),o.ic(),o.ic(),o.jc(19,"div",19),o.jc(20,"button",20),o.rc("click",(function(t){o.Mc(e);const c=o.vc(2);return t.preventDefault(),c.addMore()})),o.jc(21,"mat-icon"),o.Wc(22,"add"),o.ic(),o.ic(),o.Wc(23,"\xa0\xa0 "),o.Vc(24,We,3,0,"button",21),o.ic(),o.ic()}if(2&e){const e=t.$implicit,c=t.index;o.Pb(5),o.Bc("ngModel",e.courseId)("name","courseId"+c),o.Pb(1),o.Bc("ngForOf",e.courses),o.Pb(5),o.Bc("ngModel",e.batchId)("name","batchId"+c),o.Pb(1),o.Bc("ngForOf",e.batches),o.Pb(5),o.Bc("ngModel",e.subjectId)("name","subjectId"+c),o.Pb(1),o.Bc("ngForOf",e.subjects),o.Pb(6),o.Bc("ngIf",c>0)}}function De(e,t){if(1&e){const e=o.kc();o.hc(0),o.jc(1,"div",3),o.Wc(2,"Assign Subjects"),o.ic(),o.jc(3,"div",7),o.jc(4,"form",null,8),o.jc(6,"mat-form-field"),o.jc(7,"mat-label"),o.Wc(8,"Select User"),o.ic(),o.jc(9,"mat-select",9),o.rc("ngModelChange",(function(t){return o.Mc(e),o.vc().userId=t}))("selectionChange",(function(){return o.Mc(e),o.vc().setUserChoosedIds()})),o.Vc(10,Oe,2,2,"mat-option",10),o.ic(),o.ic(),o.Vc(11,Fe,25,10,"div",11),o.jc(12,"button",12),o.rc("click",(function(){return o.Mc(e),o.vc().assignSubjects()})),o.Wc(13,"Submit"),o.ic(),o.ic(),o.ic(),o.gc()}if(2&e){const e=o.Ic(5),t=o.vc();o.Pb(9),o.Bc("ngModel",t.userId),o.Pb(1),o.Bc("ngForOf",t.users),o.Pb(1),o.Bc("ngForOf",t.CourseBatchesSubjects),o.Pb(1),o.Bc("disabled",e.invalid)}}function Re(e,t){if(1&e){const e=o.kc();o.jc(0,"mat-icon",27),o.rc("click",(function(){o.Mc(e);const t=o.vc(),c=t.$implicit,i=t.index,n=o.vc().index;return o.vc().showRemoveSubjectFromUser(c.userId,c.batchId,c.subjectId,n,i)})),o.Wc(1," delete"),o.ic()}}function Ue(e,t){if(1&e&&(o.jc(0,"div",25),o.Wc(1),o.Vc(2,Re,2,0,"mat-icon",26),o.ic()),2&e){const e=t.$implicit,c=o.vc(2);o.Pb(1),o.Yc(" ",e.course+" - "+e.batch+" - "+e.subject," "),o.Pb(1),o.Bc("ngIf",c.permissions.deassign_user_subjects)}}function Te(e,t){if(1&e&&(o.jc(0,"tr"),o.jc(1,"td"),o.Wc(2),o.ic(),o.jc(3,"td"),o.Vc(4,Ue,3,2,"div",24),o.ic(),o.ic()),2&e){const e=t.$implicit;o.Pb(2),o.Xc(e.name),o.Pb(2),o.Bc("ngForOf",e.assignedSubjects)}}const $e=[{path:"",component:(()=>{class e{constructor(e,t,c,i){this.coreService=e,this.dialog=t,this.timeService=c,this.usersService=i,this.loading=!0,this.tableData=[],this.displayedColumns=["name","role","phone","action"],this.dataSource=new F.k(this.tableData),this.selection=new y.c(!0,[]),this.modals={showEditModal:!1,showEditPermissionsModal:!1},this.users=[],this.permissions=D.a}ngOnInit(){return Object(_.a)(this,void 0,void 0,(function*(){this.getAllUsers(),this.permissions=yield this.usersService.getUserPermissions(),this.permissions.delete_user&&this.displayedColumns.unshift("id")}))}getAllUsers(){this.coreService.getRequest(s.a.API_URL+"users").subscribe(e=>{this.loading=!1,this.users=e,this.tableData=e,this.setDataSource()})}filterUsers(e){this.tableData=[],this.tableData=this.users.filter(t=>{let c=!0,i=t.name&&t.name.toLowerCase().trim(),n=t.city&&t.city.toLowerCase().trim(),s=t.phone&&t.phone.toLowerCase().trim();if(e){let t=e.toLowerCase().trim();c=c&&(i&&i.includes(t)||n&&n.includes(t)||s&&s.includes(t))}return c}),this.setDataSource()}showFullUser(e){let t=`<table class='pinnacle-table without-border' style='box-shadow:0 0 4px rgba(0,0,0,.25)'>\n    <tr><td colspan=2 style='text-align:center'><img style='max-width:120px' src="${e.image?s.a.WEBSITE_URL+e.image:"assets/images/"+e.gender+".png"}"></td></tr>\n    <tr><th>Name</th><td>${e.name}</td></tr>\n    <tr><th>Email</th><td>${e.email}</td></tr>\n    <tr><th>Role</th><td>${e.roleName}</td></tr>\n    <tr><th>D.O.B</th><td>${this.timeService.getFormattedDate(e.dob)}</td></tr>\n    <tr><th>Employee Id.</th><td>${e.employeeId}</td></tr>\n    <tr><th>Phone</th><td>${e.phone}</td></tr>\n    <tr><th>Gender</th><td>${e.gender}</td></tr>\n    <tr><th>Biometric Id</th><td>${e.bioid}</td></tr>\n    <tr><th>Qualification</th><td>${e.qualification}</td></th>\n    <tr><th>City</th><td>${e.city}</td></tr>\n    <tr><th>State</th><td>${e.state}</td></tr>\n    <tr><th>Address</th><td>${e.address}</td></tr>\n    </table>`;this.dialog.showDialog({content:t,title:`Full detail of ${e.name} `})}editUser(e){this.modals.showEditModal=!0,this.userToEdit=e}showDelete(e){this.dialog.showDialog({content:`Are you sure to delete "${e.name}"`,title:"Confirm Deletion",callBackButtonText:"Delete",callBackButtonColor:"warn",callBack:()=>{this.deleteUser(e.userId)}})}deleteUser(e){this.coreService.deleteRequest(s.a.API_URL+"users/"+e).subscribe(t=>{if(t.success){let t=this.tableData.find(t=>t.userId==e);this.tableData.splice(this.tableData.indexOf(t),1),this.setDataSource()}})}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>{this.selection.select(e)})}setDataSource(){this.dataSource=new F.k(this.tableData),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}editPermissions(e){this.userToEdit=e,this.modals.showEditPermissionsModal=!0}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a),o.dc(R.a),o.dc(U.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["user-home"]],viewQuery:function(e,t){var c;1&e&&(o.Sc(W.a,!0),o.Sc(k.a,!0)),2&e&&(o.Hc(c=o.sc())&&(t.sort=c.first),o.Hc(c=o.sc())&&(t.paginator=c.first))},decls:54,vars:16,consts:[["id","page-content"],[1,"row","main-row"],[1,"filter-box"],["placeholder","Search by name,phone,city etc",1,"input-field",3,"keydown"],["name",""],["mat-raised-button","","color","primary",3,"click"],[1,"btns-box"],["mat-raised-button","","routerLink","/users/manage-users/add-user",4,"ngIf"],["mat-raised-button","","color","warn"],["mat-raised-button",""],["mat-table","","matSort","",1,"shadow-sm",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","role"],["matColumnDef","phone"],["matColumnDef","action"],["mat-cell","","id","actioncol",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body","edit-modal-body"],[3,"modals","user",4,"ngIf"],[3,"show"],["mat-raised-button","","routerLink","/users/manage-users/add-user"],[1,"fa","fa-plus"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","id","actioncol"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[3,"modals","user"]],template:function(e,t){if(1&e){const e=o.kc();o.ec(0,"admin-header"),o.ec(1,"admin-sidebar"),o.jc(2,"div",0),o.jc(3,"div",1),o.jc(4,"div",2),o.jc(5,"input",3,4),o.rc("keydown",(function(c){o.Mc(e);const i=o.Ic(6);return 13==c.keyCode?t.filterUsers(i.value):null})),o.ic(),o.jc(7,"button",5),o.rc("click",(function(){o.Mc(e);const c=o.Ic(6);return t.filterUsers(c.value)})),o.Wc(8,"Search"),o.ic(),o.ic(),o.jc(9,"div",6),o.Vc(10,K,3,0,"button",7),o.jc(11,"button",8),o.jc(12,"mat-icon"),o.Wc(13,"import_export"),o.ic(),o.Wc(14,"Export "),o.ic(),o.jc(15,"button",9),o.jc(16,"mat-icon"),o.Wc(17,"more_vert"),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(18,"table",10),o.hc(19,11),o.Vc(20,J,2,2,"th",12),o.Vc(21,Z,2,1,"td",13),o.gc(),o.hc(22,14),o.Vc(23,ee,2,0,"th",15),o.Vc(24,te,2,1,"td",13),o.gc(),o.hc(25,16),o.Vc(26,ce,2,0,"th",15),o.Vc(27,ie,2,1,"td",13),o.gc(),o.hc(28,17),o.Vc(29,ne,2,0,"th",15),o.Vc(30,se,2,1,"td",13),o.gc(),o.hc(31,18),o.Vc(32,oe,2,0,"th",12),o.Vc(33,de,12,2,"td",19),o.gc(),o.Vc(34,le,1,0,"tr",20),o.Vc(35,ue,1,0,"tr",21),o.ic(),o.ec(36,"mat-paginator",22),o.ic(),o.jc(37,"div",23),o.jc(38,"div",24),o.jc(39,"div",25),o.Wc(40,"Edit User"),o.ic(),o.jc(41,"div",26),o.rc("click",(function(){return t.modals.showEditModal=!1})),o.Wc(42,"\xd7"),o.ic(),o.jc(43,"div",27),o.Vc(44,ge,1,2,"edit-user",28),o.ic(),o.ic(),o.ic(),o.jc(45,"div",23),o.jc(46,"div",24),o.jc(47,"div",25),o.Wc(48),o.ic(),o.jc(49,"div",26),o.rc("click",(function(){return t.modals.showEditPermissionsModal=!1})),o.Wc(50,"\xd7"),o.ic(),o.jc(51,"div",27),o.Vc(52,me,1,2,"edit-user-permissions",28),o.ic(),o.ic(),o.ic(),o.ec(53,"loading",29)}2&e&&(o.Pb(10),o.Bc("ngIf",t.permissions.add_user),o.Pb(8),o.Bc("dataSource",t.dataSource),o.Pb(16),o.Bc("matHeaderRowDef",t.displayedColumns),o.Pb(1),o.Bc("matRowDefColumns",t.displayedColumns),o.Pb(1),o.Bc("pageSizeOptions",o.Cc(13,he)),o.Pb(1),o.Bc("show",t.modals.showEditModal)("options",o.Cc(14,pe)),o.Pb(7),o.Bc("ngIf",t.modals.showEditModal),o.Pb(1),o.Bc("show",t.modals.showEditPermissionsModal)("options",o.Cc(15,pe)),o.Pb(3),o.Yc("Edit ",t.userToEdit&&t.userToEdit.name,"'s Permissions"),o.Pb(4),o.Bc("ngIf",t.modals.showEditPermissionsModal),o.Pb(1),o.Bc("show",t.loading))},directives:[d.a,l.a,b.b,v.k,T.a,F.j,W.a,F.c,F.e,F.b,F.g,F.i,k.a,$.a,M.a,i.c,F.d,q.a,F.a,W.b,F.f,F.h,X,G],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".main-row[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;padding:0 0 15px}.filter-box[_ngcontent-%COMP%]{display:flex}.filter-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:10px}.btns-box[_ngcontent-%COMP%]{display:flex}.btns-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.btns-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:last-child{margin-right:0}table[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:528px){.btns-box[_ngcontent-%COMP%]{margin-top:10px;width:100%}.btns-box[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.33%}.filter-box[_ngcontent-%COMP%]{width:100%}.filter-box[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.filter-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:calc(40% - 10px)}}"]}),e})()},{path:"add-user",component:O},{path:"assign-batches",component:(()=>{class e{constructor(e,t,c){this.coreService=e,this.dialog=t,this.usersService=c,this.users=[],this.CourseBatches=[{courseId:null,batchId:null,courses:[],batches:[]}],this.choosedBatchIds=[],this.userChoosedBatchIds=[],this.assignedBatchUsers=[],this.permissions=D.a}ngOnInit(){return Object(_.a)(this,void 0,void 0,(function*(){this.getAssignedBatches(),this.getUsers(),this.getCourses(),this.permissions=yield this.usersService.getUserPermissions()}))}getAssignedBatches(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"courses/batches/assigned-to-users").subscribe(e=>{this.loading=!1,this.assignedBatchUsers=e})}showRemoveBatchFromUser(e,t,c,i){this.dialog.showDialog({title:"Confirm Remove",content:"Are you sure to remove this batch?",callBack:()=>{this.removeBatchFromUser(e,t,c,i)}})}removeBatchFromUser(e,t,c,i){this.loading=!0,this.coreService.deleteRequest(s.a.API_URL+"courses/batches/remove-from-users/"+e+"/"+t).subscribe(e=>{this.loading=!1,e.success&&this.assignedBatchUsers[c].assignedBatches.splice(i,1)})}getCourses(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"courses").subscribe(e=>{this.CourseBatches[0].courses=e,this.loading=!1})}setBatches(e,t){let c=this.CourseBatches[t].courses.find(t=>t.courseId==e);c&&(this.CourseBatches[t].batches=c.batches,this.CourseBatches[t].batchId=null)}getUsers(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"users").subscribe(e=>{this.loading=!1,this.users=e})}setChoosedIds(){let e=[];this.CourseBatches.forEach(t=>e.push(t.batchId)),this.choosedBatchIds=e}setUserChoosedIds(){this.userChoosedBatchIds=[],this.assignedBatchUsers.find(e=>e.userId==this.userId).assignedBatches.forEach(e=>{this.userChoosedBatchIds.push(e.batchId)})}addMore(){this.CourseBatches.push({courseId:null,batchId:null,courses:[...this.CourseBatches[0].courses],batches:[...this.CourseBatches[0].batches]})}removeItem(e){this.CourseBatches.splice(e,1),this.choosedBatchIds.splice(e,1)}assignBatches(){this.loading=!0,this.coreService.postRequest(s.a.API_URL+"courses/batches/assign-to-users",{userId:this.userId,batchIds:this.choosedBatchIds}).subscribe(e=>{this.loading=!1,this.assignForm.resetForm(),this.getAssignedBatches(),this.dialog.showDialog({content:e.message})})}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a),o.dc(U.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["app-assign-batches-to-users"]],viewQuery:function(e,t){var c;1&e&&o.cd(be,!0),2&e&&o.Hc(c=o.sc())&&(t.assignForm=c.first)},decls:16,vars:4,consts:[["id","page-content"],["class","content-title",4,"ngIf"],["class","content-box",4,"ngIf"],[2,"height","15px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],[3,"show"],[1,"content-box"],["assignForm","ngForm"],["name","userId","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"row"],[1,"col-sm-3","pr"],["required","",3,"ngModel","name","ngModelChange","selectionChange"],[1,"col-sm-3","pr","pl"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["class","assigned-items",4,"ngFor","ngForOf"],[1,"assigned-items"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,t){1&e&&(o.ec(0,"admin-header"),o.ec(1,"admin-sidebar"),o.jc(2,"div",0),o.Vc(3,fe,2,0,"div",1),o.Vc(4,Pe,11,4,"div",2),o.ec(5,"div",3),o.jc(6,"div",4),o.Wc(7,"Assigned Batches"),o.ic(),o.jc(8,"table",5),o.jc(9,"tr"),o.jc(10,"th"),o.Wc(11,"Name"),o.ic(),o.jc(12,"th"),o.Wc(13,"Course - Batch"),o.ic(),o.ic(),o.Vc(14,xe,5,2,"tr",6),o.ic(),o.ic(),o.ec(15,"loading",7)),2&e&&(o.Pb(3),o.Bc("ngIf",t.permissions.assign_user_batches),o.Pb(1),o.Bc("ngIf",t.permissions.assign_user_batches),o.Pb(10),o.Bc("ngForOf",t.assignedBatchUsers),o.Pb(1),o.Bc("show",t.loading))},directives:[d.a,l.a,v.k,v.j,M.a,u.v,u.l,u.m,g.b,g.e,f.a,u.r,u.k,u.n,b.b,j.h,T.a],styles:[""]}),e})()},{path:"assign-subjects",component:(()=>{class e{constructor(e,t,c){this.coreService=e,this.dialog=t,this.usersService=c,this.users=[],this.CourseBatchesSubjects=[{courseId:null,batchId:null,subjectId:null,subjects:[],courses:[],batches:[]}],this.choosedIds=[],this.userChoosedIds=[],this.assignedSubjectUsers=[],this.batches_subjects=[],this.permissions=D.a}ngOnInit(){return Object(_.a)(this,void 0,void 0,(function*(){this.getAssignedSubjects(),this.getUsers(),this.getCourses(),this.getBatchesSubjects(),this.permissions=yield this.usersService.getUserPermissions()}))}getBatchesSubjects(){this.coreService.getRequest(s.a.API_URL+"courses/batches/subjects").subscribe(e=>{this.batches_subjects=e})}setSubjects(e,t){let c=this.batches_subjects.find(t=>t.batchId==e);c&&(this.CourseBatchesSubjects[t].subjects=c.subjects,this.CourseBatchesSubjects[t].subjectId=null)}getAssignedSubjects(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"subjects/assigned-to-users").subscribe(e=>{this.loading=!1,this.assignedSubjectUsers=e})}showRemoveSubjectFromUser(e,t,c,i,n){this.dialog.showDialog({title:"Confirm Remove",content:"Are you sure to remove this subject?",callBack:()=>{this.removeSubjectFromUser(e,t,c,i,n)}})}removeSubjectFromUser(e,t,c,i,n){this.loading=!0,this.coreService.deleteRequest(s.a.API_URL+"subjects/remove-from-users/"+e+"/"+t+"/"+c).subscribe(e=>{this.loading=!1,e.success&&this.assignedSubjectUsers[i].assignedSubjects.splice(n,1)})}getCourses(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"courses").subscribe(e=>{this.CourseBatchesSubjects[0].courses=e,this.loading=!1})}setBatches(e,t){let c=this.CourseBatchesSubjects[t].courses.find(t=>t.courseId==e);c&&(this.CourseBatchesSubjects[t].batches=c.batches,this.CourseBatchesSubjects[t].batchId=null)}getUsers(){this.loading=!0,this.coreService.getRequest(s.a.API_URL+"users").subscribe(e=>{this.loading=!1,this.users=e})}setChoosedIds(){let e=[];this.CourseBatchesSubjects.forEach(t=>{e.push(t.subjectId+"-"+t.batchId)}),this.choosedIds=e,console.log("choosedIds",this.choosedIds)}setUserChoosedIds(){this.userChoosedIds=[],this.assignedSubjectUsers.find(e=>e.userId==this.userId).assignedSubjects.forEach(e=>{this.userChoosedIds.push(e.subjectId+"-"+e.batchId)})}addMore(){this.CourseBatchesSubjects.push({courseId:null,batchId:null,subjectId:null,subjects:[...this.CourseBatchesSubjects[0].subjects],courses:[...this.CourseBatchesSubjects[0].courses],batches:[...this.CourseBatchesSubjects[0].batches]})}removeItem(e){this.CourseBatchesSubjects.splice(e,1),this.choosedIds.splice(e,1)}assignSubjects(){this.loading=!0;let e={userId:this.userId,subjectIds:[],batchIds:[]};this.CourseBatchesSubjects.forEach(t=>{e.batchIds.push(t.batchId),e.subjectIds.push(t.subjectId)}),this.coreService.postRequest(s.a.API_URL+"subjects/assign-to-users",e).subscribe(e=>{this.loading=!1,this.assignForm.resetForm(),this.getAssignedSubjects(),this.dialog.showDialog({content:e.message})})}}return e.\u0275fac=function(t){return new(t||e)(o.dc(a.a),o.dc(r.a),o.dc(U.a))},e.\u0275cmp=o.Xb({type:e,selectors:[["app-assign-subjects-to-users"]],viewQuery:function(e,t){var c;1&e&&o.cd(Se,!0),2&e&&o.Hc(c=o.sc())&&(t.assignForm=c.first)},decls:15,vars:3,consts:[["id","page-content"],[4,"ngIf"],[2,"height","15px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],[3,"show"],[1,"content-box"],["assignForm","ngForm"],["name","userId","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"row"],[1,"col-sm-3","pr"],["required","",3,"ngModel","name","ngModelChange","selectionChange"],[1,"col-sm-3","pr","pl"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["class","assigned-items",4,"ngFor","ngForOf"],[1,"assigned-items"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,t){1&e&&(o.ec(0,"admin-header"),o.ec(1,"admin-sidebar"),o.jc(2,"div",0),o.Vc(3,De,14,4,"ng-container",1),o.ec(4,"div",2),o.jc(5,"div",3),o.Wc(6,"Assigned Subjects"),o.ic(),o.jc(7,"table",4),o.jc(8,"tr"),o.jc(9,"th"),o.Wc(10,"Name"),o.ic(),o.jc(11,"th"),o.Wc(12,"Course - Batch - Subjects"),o.ic(),o.ic(),o.Vc(13,Te,5,2,"tr",5),o.ic(),o.ic(),o.ec(14,"loading",6)),2&e&&(o.Pb(3),o.Bc("ngIf",t.permissions.assign_user_subjects),o.Pb(10),o.Bc("ngForOf",t.assignedSubjectUsers),o.Pb(1),o.Bc("show",t.loading))},directives:[d.a,l.a,v.k,v.j,M.a,u.v,u.l,u.m,g.b,g.e,f.a,u.r,u.k,u.n,b.b,j.h,T.a],styles:[""]}),e})()}];let qe=(()=>{class e{}return e.\u0275mod=o.bc({type:e}),e.\u0275inj=o.ac({factory:function(t){return new(t||e)},imports:[[n.a,i.f.forChild($e)]]}),e})()}}]);