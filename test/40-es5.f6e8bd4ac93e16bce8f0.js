function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{IwBt:function(e,t,c){"use strict";c.r(t),c.d(t,"ManageUsersModule",(function(){return Xe}));var n=c("tyNb"),i=c("n+G7"),o=c("SP9e"),a=c("fXoL"),r=c("4KEQ"),s=c("QeEr"),l=c("aCk2"),d=c("G0I0"),u=c("3Pt+"),g=c("kmnG"),m=c("qFsG"),h=c("QibW"),f=c("z17N"),p=c("bTqV"),b=c("d3UM"),v=c("FKr1"),j=c("ofXK"),M=c("V/o5"),C=["imageSRC"],I=["imageTarget"],P=["signatureSRC"],w=["signatureTarget"],y=["candidateForm"];function B(e,t){if(1&e&&(a.jc(0,"mat-option",17),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.roleId),a.Pb(1),a.Xc(c.roleName)}}function k(e,t){if(1&e&&(a.jc(0,"mat-option",17),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.userId),a.Pb(1),a.Xc(c.name)}}var S,x=((S=function(){function e(t,c){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.form={username:null,password:null,name:null,email:null,gender:null,dob:null,employeeId:null,phone:null,qualification:null,biometricId:null,regDate:null,address:null,city:null,state:null,roleId:null,leaveSupervisorId:null},this.roles=[],this.users=[],this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.showSelectedImage(e.imageSRC.nativeElement,e.imageTarget.nativeElement),e.showSelectedImage(e.signatureSRC.nativeElement,e.signatureTarget.nativeElement)}),10),this.coreService.getRequest(o.a.API_URL+"users/roles").subscribe((function(t){return e.roles=t})),this.coreService.getRequest(o.a.API_URL+"users").subscribe((function(t){return e.users=t}))}},{key:"showSelectedImage",value:function(e,t){var c=new FileReader;c.onload=function(e){t.src=this.result},e.addEventListener("change",(function(){c.readAsDataURL(e.files[0])}))}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"setSelectedSignature",value:function(e){this.selectedSignature=e.target.files[0]}},{key:"saveData",value:function(e){var t=this,c=new FormData;c.append("image",this.selectedImage),c.append("signature",this.selectedSignature),Object.keys(e.value).forEach((function(t){"dob"!=t&&"regDate"!=t||(e.value[t]=new Date(e.value[t]+" UTC").toISOString().slice(0,19).replace("T"," ")),c.append(t,e.value[t])})),this.loading=!0,this.coreService.uploadRequest(o.a.API_URL+"users/",c).subscribe((function(e){t.dialog.showDialog({content:e.message}),t.loading=!1}))}}]),e}()).\u0275fac=function(e){return new(e||S)(a.dc(r.a),a.dc(s.a))},S.\u0275cmp=a.Xb({type:S,selectors:[["add-user"]],viewQuery:function(e,t){var c;1&e&&(a.cd(C,!0),a.cd(I,!0),a.cd(P,!0),a.cd(w,!0),a.cd(y,!0)),2&e&&(a.Hc(c=a.sc())&&(t.imageSRC=c.first),a.Hc(c=a.sc())&&(t.imageTarget=c.first),a.Hc(c=a.sc())&&(t.signatureSRC=c.first),a.Hc(c=a.sc())&&(t.signatureTarget=c.first),a.Hc(c=a.sc())&&(t.candidateForm=c.first))},decls:142,vars:31,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngSubmit"],["candidateForm","ngForm"],[1,"row","justify-content-between"],[1,"add-form-cols"],["matInput","","name","username","required","",3,"ngModel","ngModelChange"],["type","password","matInput","","name","password","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","name","email",3,"email","ngModel","ngModelChange"],[1,"add-form-cols-66-percent"],[1,"add-form-cols-50"],[2,"margin-top","10px"],["matInput","","name","name","required","",3,"ngModel","ngModelChange"],[2,"color","#666"],["id","gender-wrapper"],["name","gender","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","name","employeeId",3,"ngModel","ngModelChange"],["matInput","","name","phone","pattern","^[0-9]{10}$","minlength","10","maxlength","10",3,"ngModel","ngModelChange"],["phon","ngModel"],["name","dob","matInput","","placeholder","D.O.B","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dob",""],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["name","regDate","matInput","","placeholder","Date of Registration","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dt2",""],[1,"add-form-cols","upl"],[1,"row","upload"],[1,"upload-box"],["src","assets/images/upload-man.png"],["imageTarget",""],["type","file","name","image",3,"change"],["imageSRC",""],["type","button","color","primary","mat-raised-button","",3,"click"],["src","assets/images/signature.png"],["signatureTarget",""],["type","file","name","signature",3,"change"],["signatureSRC",""],["matInput","","name","qualification",3,"ngModel","ngModelChange"],["matInput","","name","biometricId",3,"ngModel","ngModelChange"],["matInput","","name","address","required","",3,"ngModel","ngModelChange"],["matInput","","name","state","required","",3,"ngModel","ngModelChange"],["matInput","","name","city","required","",3,"ngModel","ngModelChange"],["name","roleId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","leaveSupervisorId","required","",3,"ngModel","ngModelChange"],[1,"row",2,"justify-content","flex-end"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"show"]],template:function(e,t){if(1&e){var c=a.kc();a.ec(0,"admin-header"),a.ec(1,"admin-sidebar"),a.jc(2,"div",0),a.jc(3,"div",1),a.Wc(4,"Add User"),a.ic(),a.jc(5,"div",2),a.jc(6,"form",3,4),a.rc("ngSubmit",(function(){a.Mc(c);var e=a.Ic(7);return t.saveData(e)})),a.jc(8,"fieldset"),a.jc(9,"legend"),a.Wc(10,"Login Details & Email"),a.ic(),a.jc(11,"div",5),a.jc(12,"div",6),a.jc(13,"mat-form-field"),a.jc(14,"mat-label"),a.Wc(15,"Username"),a.ic(),a.jc(16,"input",7),a.rc("ngModelChange",(function(e){return t.form.username=e})),a.ic(),a.ic(),a.ic(),a.jc(17,"div",6),a.jc(18,"mat-form-field"),a.jc(19,"mat-label"),a.Wc(20,"Password"),a.ic(),a.jc(21,"input",8),a.rc("ngModelChange",(function(e){return t.form.password=e})),a.ic(),a.ic(),a.ic(),a.jc(22,"div",6),a.jc(23,"mat-form-field"),a.jc(24,"mat-label"),a.Wc(25,"Email"),a.ic(),a.jc(26,"input",9),a.rc("ngModelChange",(function(e){return t.form.email=e})),a.ic(),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(27,"fieldset"),a.jc(28,"legend"),a.Wc(29,"User Details"),a.ic(),a.jc(30,"div",5),a.jc(31,"div",10),a.jc(32,"div",5),a.jc(33,"div",11),a.jc(34,"mat-form-field",12),a.jc(35,"mat-label"),a.Wc(36,"Name"),a.ic(),a.jc(37,"input",13),a.rc("ngModelChange",(function(e){return t.form.name=e})),a.ic(),a.ic(),a.ic(),a.jc(38,"div",11),a.jc(39,"label",14),a.Wc(40,"Gender"),a.ic(),a.jc(41,"div",15),a.jc(42,"mat-radio-group",16),a.rc("ngModelChange",(function(e){return t.form.gender=e})),a.jc(43,"mat-radio-button",17),a.Wc(44,"Male"),a.ic(),a.jc(45,"mat-radio-button",17),a.Wc(46,"Female"),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(47,"div",11),a.jc(48,"mat-form-field"),a.jc(49,"mat-label"),a.Wc(50,"Employee Id"),a.ic(),a.jc(51,"input",18),a.rc("ngModelChange",(function(e){return t.form.employeeId=e})),a.ic(),a.ic(),a.ic(),a.jc(52,"div",11),a.jc(53,"mat-form-field"),a.jc(54,"mat-label"),a.Wc(55,"Mobile Number"),a.ic(),a.jc(56,"input",19,20),a.rc("ngModelChange",(function(e){return t.form.phone=e})),a.ic(),a.ic(),a.ic(),a.jc(58,"div",11),a.jc(59,"mat-form-field"),a.jc(60,"input",21,22),a.rc("ngModelChange",(function(e){return t.form.dob=e})),a.ic(),a.jc(62,"span",23),a.Wc(63,"calendar_today"),a.ic(),a.ec(64,"owl-date-time",24,25),a.ic(),a.ic(),a.jc(66,"div",11),a.jc(67,"mat-form-field"),a.jc(68,"input",26,22),a.rc("ngModelChange",(function(e){return t.form.regDate=e})),a.ic(),a.jc(70,"span",23),a.Wc(71,"calendar_today"),a.ic(),a.ec(72,"owl-date-time",24,27),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(74,"div",28),a.jc(75,"div",29),a.jc(76,"div",30),a.ec(77,"img",31,32),a.jc(79,"input",33,34),a.rc("change",(function(e){return t.setSelectedImage(e)})),a.ic(),a.ec(81,"br"),a.jc(82,"button",35),a.rc("click",(function(){return a.Mc(c),a.Ic(80).click()})),a.Wc(83,"Upload Image"),a.ic(),a.jc(84,"p"),a.Wc(85,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),a.ic(),a.ic(),a.jc(86,"div",30),a.ec(87,"img",36,37),a.jc(89,"input",38,39),a.rc("change",(function(e){return t.setSelectedSignature(e)})),a.ic(),a.ec(91,"br"),a.jc(92,"button",35),a.rc("click",(function(){return a.Mc(c),a.Ic(90).click()})),a.Wc(93,"Upload Image"),a.ic(),a.jc(94,"p"),a.Wc(95,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),a.ic(),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(96,"div",5),a.jc(97,"div",6),a.jc(98,"mat-form-field"),a.jc(99,"mat-label"),a.Wc(100,"Qualification"),a.ic(),a.jc(101,"input",40),a.rc("ngModelChange",(function(e){return t.form.qualification=e})),a.ic(),a.ic(),a.ic(),a.jc(102,"div",6),a.jc(103,"mat-form-field"),a.jc(104,"mat-label"),a.Wc(105,"Biometric Id"),a.ic(),a.jc(106,"input",41),a.rc("ngModelChange",(function(e){return t.form.biometricId=e})),a.ic(),a.ic(),a.ic(),a.jc(107,"div",6),a.jc(108,"mat-form-field"),a.jc(109,"mat-label"),a.Wc(110,"Address"),a.ic(),a.jc(111,"input",42),a.rc("ngModelChange",(function(e){return t.form.address=e})),a.ic(),a.ic(),a.ic(),a.jc(112,"div",6),a.jc(113,"mat-form-field"),a.jc(114,"mat-label"),a.Wc(115,"State"),a.ic(),a.jc(116,"input",43),a.rc("ngModelChange",(function(e){return t.form.state=e})),a.ic(),a.ic(),a.ic(),a.jc(117,"div",6),a.jc(118,"mat-form-field"),a.jc(119,"mat-label"),a.Wc(120,"City"),a.ic(),a.jc(121,"input",44),a.rc("ngModelChange",(function(e){return t.form.city=e})),a.ic(),a.ic(),a.ic(),a.jc(122,"div",6),a.jc(123,"mat-form-field"),a.jc(124,"mat-label"),a.Wc(125,"Role"),a.ic(),a.jc(126,"mat-select",45),a.rc("ngModelChange",(function(e){return t.form.roleId=e})),a.jc(127,"mat-option",17),a.Wc(128,"Select Role"),a.ic(),a.Vc(129,B,2,2,"mat-option",46),a.ic(),a.ic(),a.ic(),a.jc(130,"div",6),a.jc(131,"mat-form-field"),a.jc(132,"mat-label"),a.Wc(133,"Leave Supervisor"),a.ic(),a.jc(134,"mat-select",47),a.rc("ngModelChange",(function(e){return t.form.leaveSupervisorId=e})),a.jc(135,"mat-option",17),a.Wc(136,"Select Leave Supervisor"),a.ic(),a.Vc(137,k,2,2,"mat-option",46),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(138,"div",48),a.jc(139,"button",49),a.Wc(140,"Save"),a.ic(),a.ic(),a.ic(),a.ic(),a.ic(),a.ic(),a.ec(141,"loading",50)}if(2&e){var n=a.Ic(7),i=a.Ic(65),o=a.Ic(73);a.Pb(16),a.Bc("ngModel",t.form.username),a.Pb(5),a.Bc("ngModel",t.form.password),a.Pb(5),a.Bc("email",!0)("ngModel",t.form.email),a.Pb(11),a.Bc("ngModel",t.form.name),a.Pb(5),a.Bc("ngModel",t.form.gender),a.Pb(1),a.Bc("value","Male"),a.Pb(2),a.Bc("value","Female"),a.Pb(6),a.Bc("ngModel",t.form.employeeId),a.Pb(5),a.Bc("ngModel",t.form.phone),a.Pb(4),a.Bc("ngModel",t.form.dob)("owlDateTime",i)("owlDateTimeTrigger",i),a.Pb(4),a.Bc("pickerType","calendar"),a.Pb(4),a.Bc("ngModel",t.form.regDate)("owlDateTime",o)("owlDateTimeTrigger",o),a.Pb(4),a.Bc("pickerType","calendar"),a.Pb(29),a.Bc("ngModel",t.form.qualification),a.Pb(5),a.Bc("ngModel",t.form.biometricId),a.Pb(5),a.Bc("ngModel",t.form.address),a.Pb(5),a.Bc("ngModel",t.form.state),a.Pb(5),a.Bc("ngModel",t.form.city),a.Pb(5),a.Bc("ngModel",t.form.roleId),a.Pb(1),a.Bc("value",null),a.Pb(2),a.Bc("ngForOf",t.roles),a.Pb(5),a.Bc("ngModel",t.form.leaveSupervisorId),a.Pb(1),a.Bc("value",null),a.Pb(2),a.Bc("ngForOf",t.users),a.Pb(2),a.Bc("disabled",!n.valid),a.Pb(2),a.Bc("show",t.loading)}},directives:[l.a,d.a,u.v,u.l,u.m,g.b,g.e,m.a,u.b,u.r,u.k,u.n,u.c,h.b,h.a,u.q,u.g,u.f,f.b,f.d,g.f,f.a,p.b,b.a,v.h,j.j,M.a],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.add-form-row[_ngcontent-%COMP%]{justify-content:space-between}.add-form-cols[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%]{width:calc(66.66% - 10px)}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}fieldset[_ngcontent-%COMP%]{padding:0 10px 10px;margin-bottom:0;border:1px solid transparent}legend[_ngcontent-%COMP%]{padding:0;font-weight:500;color:#0063c6}#gender-wrapper[_ngcontent-%COMP%]{margin-top:10px}#gender-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row.upload[_ngcontent-%COMP%]{height:calc(100% - 17px);justify-content:space-between;align-items:center}.upload-box[_ngcontent-%COMP%]{padding:7px;border:1px solid #888;width:calc(50% - 10px);height:100%}.upload-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:90px;border:1px solid #888}.upload-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;padding:1px 10px;font-size:12px;border-radius:0;line-height:25px}.upload-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;margin-top:4px;font-size:10px;line-height:14px}[type=file][_ngcontent-%COMP%]{position:absolute;left:-1600px}@media screen and (max-width:920px){.add-form-cols[_ngcontent-%COMP%]{width:calc(50% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%], .add-form-cols.upl[_ngcontent-%COMP%]{width:100%}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}}"]}),S),_=c("mrSG"),O=c("0EQZ"),W=c("M9IT"),F=c("Dh3D"),D=c("+0xr"),R=c("byUP"),U=c("Sz29"),T=c("FnMX"),A=c("NFeN"),q=c("ZMsq"),E=c("bSwM"),V=["imageSRC"],$=["imageTarget"],L=["signatureSRC"],H=["signatureTarget"];function N(e,t){if(1&e&&(a.jc(0,"mat-option",11),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.roleId),a.Pb(1),a.Xc(c.roleName)}}function X(e,t){if(1&e&&(a.jc(0,"mat-option",11),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.userId),a.Pb(1),a.Xc(c.name)}}var z,Q=((z=function(){function e(t,c){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.loading=!1,this.courses=[],this.batches=[],this.roles=[],this.users=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.user.dob=new Date(this.user.dob),this.user.regDate=new Date(this.user.regDate),setTimeout((function(){e.showSelectedImage(e.imageSRC.nativeElement,e.imageTarget.nativeElement),e.showSelectedImage(e.signatureSRC.nativeElement,e.signatureTarget.nativeElement)}),10),this.coreService.getRequest(o.a.API_URL+"users/roles").subscribe((function(t){return e.roles=t})),this.coreService.getRequest(o.a.API_URL+"users").subscribe((function(t){return e.users=t}))}},{key:"updateData",value:function(e){var t=this,c=new FormData;c.append("image",this.selectedImage),c.append("signature",this.selectedSignature),Object.keys(e.value).forEach((function(n){"dob"!=n&&"regDate"!=n||(e.value[n]=new Date(e.value[n]+" UTC").toISOString().slice(0,19).replace("T"," "),t.user[n]=e.value[n].split(" ")[0]),c.append(n,e.value[n])})),this.loading=!0,this.coreService.uploadRequest(o.a.API_URL+"users/update",c).subscribe((function(c){t.dialog.showDialog({content:c.message}),t.user.roleName=t.roles.find((function(t){return t.roleId==e.value.roleId})).roleName,t.loading=!1,t.modals.showEditModal=!1}))}},{key:"showSelectedImage",value:function(e,t){var c=new FileReader;c.onload=function(e){t.src=this.result},e.addEventListener("change",(function(){c.readAsDataURL(e.files[0])}))}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"setSelectedSignature",value:function(e){this.selectedSignature=e.target.files[0]}}]),e}()).\u0275fac=function(e){return new(e||z)(a.dc(r.a),a.dc(s.a))},z.\u0275cmp=a.Xb({type:z,selectors:[["edit-user"]],viewQuery:function(e,t){var c;1&e&&(a.cd(V,!0),a.cd($,!0),a.cd(L,!0),a.cd(H,!0)),2&e&&(a.Hc(c=a.sc())&&(t.imageSRC=c.first),a.Hc(c=a.sc())&&(t.imageTarget=c.first),a.Hc(c=a.sc())&&(t.signatureSRC=c.first),a.Hc(c=a.sc())&&(t.signatureTarget=c.first))},inputs:{user:"user",modals:"modals"},decls:119,vars:30,consts:[[3,"ngSubmit"],["candidateForm","ngForm"],[1,"row","justify-content-between"],[1,"add-form-cols-66-percent"],[1,"add-form-cols-50"],["type","hidden","name","userId",3,"ngModel","ngModelChange"],[2,"margin-top","10px"],["matInput","","name","name","required","",3,"ngModel","ngModelChange"],[2,"color","#666"],["id","gender-wrapper"],["name","gender","required","",3,"ngModel","ngModelChange"],[3,"value"],["type","email","matInput","","name","email","required","",3,"email","ngModel","ngModelChange"],["matInput","","name","employeeId",3,"ngModel","ngModelChange"],["matInput","","name","phone","minlength","10","maxlength","10","pattern","^[0-9]{10}$","required","",3,"ngModel","ngModelChange"],["name","dob","matInput","","placeholder","D.O.B","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dob",""],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["name","regDate","matInput","","placeholder","Date of Registration",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["dor",""],["dt2",""],[1,"add-form-cols","upl"],[1,"row","upload"],[1,"upload-box"],["src","assets/images/upload-man.png"],["imageTarget",""],["type","file","name","image",3,"change"],["imageSRC",""],["type","button","color","primary","mat-raised-button","",3,"click"],["src","assets/images/signature.png"],["signatureTarget",""],["type","file","name","signature",3,"change"],["signatureSRC",""],[1,"add-form-cols"],["matInput","","name","qualification",3,"ngModel","ngModelChange"],["matInput","","name","biometricId",3,"ngModel","ngModelChange"],["matInput","","name","address","required","",3,"ngModel","ngModelChange"],["matInput","","name","state","required","",3,"ngModel","ngModelChange"],["matInput","","name","city","required","",3,"ngModel","ngModelChange"],["name","roleId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","leaveSupervisorId","required","",3,"ngModel","ngModelChange"],[1,"row",2,"justify-content","flex-end"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"show"]],template:function(e,t){if(1&e){var c=a.kc();a.jc(0,"form",0,1),a.rc("ngSubmit",(function(){a.Mc(c);var e=a.Ic(1);return t.updateData(e)})),a.jc(2,"div",2),a.jc(3,"div",3),a.jc(4,"div",2),a.jc(5,"div",4),a.jc(6,"input",5),a.rc("ngModelChange",(function(e){return t.user.userId=e})),a.ic(),a.jc(7,"mat-form-field",6),a.jc(8,"mat-label"),a.Wc(9,"Name"),a.ic(),a.jc(10,"input",7),a.rc("ngModelChange",(function(e){return t.user.name=e})),a.ic(),a.ic(),a.ic(),a.jc(11,"div",4),a.jc(12,"label",8),a.Wc(13,"Gender"),a.ic(),a.jc(14,"div",9),a.jc(15,"mat-radio-group",10),a.rc("ngModelChange",(function(e){return t.user.gender=e})),a.jc(16,"mat-radio-button",11),a.Wc(17,"Male"),a.ic(),a.jc(18,"mat-radio-button",11),a.Wc(19,"Female"),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(20,"div",4),a.jc(21,"mat-form-field"),a.jc(22,"mat-label"),a.Wc(23,"Email"),a.ic(),a.jc(24,"input",12),a.rc("ngModelChange",(function(e){return t.user.email=e})),a.ic(),a.ic(),a.ic(),a.jc(25,"div",4),a.jc(26,"mat-form-field"),a.jc(27,"mat-label"),a.Wc(28,"Employee Id"),a.ic(),a.jc(29,"input",13),a.rc("ngModelChange",(function(e){return t.user.employeeId=e})),a.ic(),a.ic(),a.ic(),a.jc(30,"div",4),a.jc(31,"mat-form-field"),a.jc(32,"mat-label"),a.Wc(33,"Mobile Number"),a.ic(),a.jc(34,"input",14),a.rc("ngModelChange",(function(e){return t.user.phone=e})),a.ic(),a.ic(),a.ic(),a.jc(35,"div",4),a.jc(36,"mat-form-field"),a.jc(37,"input",15,16),a.rc("ngModelChange",(function(e){return t.user.dob=e})),a.ic(),a.jc(39,"span",17),a.Wc(40,"calendar_today"),a.ic(),a.ec(41,"owl-date-time",18,19),a.ic(),a.ic(),a.jc(43,"div",4),a.jc(44,"mat-form-field"),a.jc(45,"input",20,21),a.rc("ngModelChange",(function(e){return t.user.regDate=e})),a.ic(),a.jc(47,"span",17),a.Wc(48,"calendar_today"),a.ic(),a.ec(49,"owl-date-time",18,22),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(51,"div",23),a.jc(52,"div",24),a.jc(53,"div",25),a.ec(54,"img",26,27),a.jc(56,"input",28,29),a.rc("change",(function(e){return t.setSelectedImage(e)})),a.ic(),a.ec(58,"br"),a.jc(59,"button",30),a.rc("click",(function(){return a.Mc(c),a.Ic(57).click()})),a.Wc(60,"Upload Image"),a.ic(),a.jc(61,"p"),a.Wc(62,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),a.ic(),a.ic(),a.jc(63,"div",25),a.ec(64,"img",31,32),a.jc(66,"input",33,34),a.rc("change",(function(e){return t.setSelectedSignature(e)})),a.ic(),a.ec(68,"br"),a.jc(69,"button",30),a.rc("click",(function(){return a.Mc(c),a.Ic(67).click()})),a.Wc(70,"Upload Image"),a.ic(),a.jc(71,"p"),a.Wc(72,"(Max resolution 150 \xd7 210 px) Format(.png, .jpeg, .jpg)"),a.ic(),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(73,"div",2),a.jc(74,"div",35),a.jc(75,"mat-form-field"),a.jc(76,"mat-label"),a.Wc(77,"Qualification"),a.ic(),a.jc(78,"input",36),a.rc("ngModelChange",(function(e){return t.user.qualification=e})),a.ic(),a.ic(),a.ic(),a.jc(79,"div",35),a.jc(80,"mat-form-field"),a.jc(81,"mat-label"),a.Wc(82,"Biometric Id"),a.ic(),a.jc(83,"input",37),a.rc("ngModelChange",(function(e){return t.user.bioid=e})),a.ic(),a.ic(),a.ic(),a.jc(84,"div",35),a.jc(85,"mat-form-field"),a.jc(86,"mat-label"),a.Wc(87,"Address"),a.ic(),a.jc(88,"input",38),a.rc("ngModelChange",(function(e){return t.user.address=e})),a.ic(),a.ic(),a.ic(),a.jc(89,"div",35),a.jc(90,"mat-form-field"),a.jc(91,"mat-label"),a.Wc(92,"State"),a.ic(),a.jc(93,"input",39),a.rc("ngModelChange",(function(e){return t.user.state=e})),a.ic(),a.ic(),a.ic(),a.jc(94,"div",35),a.jc(95,"mat-form-field"),a.jc(96,"mat-label"),a.Wc(97,"City"),a.ic(),a.jc(98,"input",40),a.rc("ngModelChange",(function(e){return t.user.city=e})),a.ic(),a.ic(),a.ic(),a.jc(99,"div",35),a.jc(100,"mat-form-field"),a.jc(101,"mat-label"),a.Wc(102,"Role"),a.ic(),a.jc(103,"mat-select",41),a.rc("ngModelChange",(function(e){return t.user.roleId=e})),a.jc(104,"mat-option",11),a.Wc(105,"Select Role"),a.ic(),a.Vc(106,N,2,2,"mat-option",42),a.ic(),a.ic(),a.ic(),a.jc(107,"div",35),a.jc(108,"mat-form-field"),a.jc(109,"mat-label"),a.Wc(110,"Leave Supervisor"),a.ic(),a.jc(111,"mat-select",43),a.rc("ngModelChange",(function(e){return t.user.leaveSupervisorId=e})),a.jc(112,"mat-option",11),a.Wc(113,"Select Leave Supervisor"),a.ic(),a.Vc(114,X,2,2,"mat-option",42),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(115,"div",44),a.jc(116,"button",45),a.Wc(117,"Save"),a.ic(),a.ic(),a.ic(),a.ec(118,"loading",46)}if(2&e){var n=a.Ic(1),i=a.Ic(42),o=a.Ic(50);a.Pb(6),a.Bc("ngModel",t.user.userId),a.Pb(4),a.Bc("ngModel",t.user.name),a.Pb(5),a.Bc("ngModel",t.user.gender),a.Pb(1),a.Bc("value","Male"),a.Pb(2),a.Bc("value","Female"),a.Pb(6),a.Bc("email",!0)("ngModel",t.user.email),a.Pb(5),a.Bc("ngModel",t.user.employeeId),a.Pb(5),a.Bc("ngModel",t.user.phone),a.Pb(3),a.Bc("ngModel",t.user.dob)("owlDateTime",i)("owlDateTimeTrigger",i),a.Pb(4),a.Bc("pickerType","calendar"),a.Pb(4),a.Bc("ngModel",t.user.regDate)("owlDateTime",o)("owlDateTimeTrigger",o),a.Pb(4),a.Bc("pickerType","calendar"),a.Pb(29),a.Bc("ngModel",t.user.qualification),a.Pb(5),a.Bc("ngModel",t.user.bioid),a.Pb(5),a.Bc("ngModel",t.user.address),a.Pb(5),a.Bc("ngModel",t.user.state),a.Pb(5),a.Bc("ngModel",t.user.city),a.Pb(5),a.Bc("ngModel",t.user.roleId),a.Pb(1),a.Bc("value",null),a.Pb(2),a.Bc("ngForOf",t.roles),a.Pb(5),a.Bc("ngModel",t.user.leaveSupervisorId),a.Pb(1),a.Bc("value",null),a.Pb(2),a.Bc("ngForOf",t.users),a.Pb(2),a.Bc("disabled",n.invalid),a.Pb(2),a.Bc("show",t.loading)}},directives:[u.v,u.l,u.m,u.b,u.k,u.n,g.b,g.e,m.a,u.r,h.b,h.a,u.c,u.g,u.f,u.q,f.b,f.d,g.f,f.a,p.b,b.a,v.h,j.j,M.a],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.add-form-row[_ngcontent-%COMP%]{justify-content:space-between}.add-form-cols[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%]{width:calc(66.66% - 10px)}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}fieldset[_ngcontent-%COMP%]{padding:0 10px 10px;margin-bottom:0;border:1px solid transparent}legend[_ngcontent-%COMP%]{padding:0;font-weight:500;color:#0063c6}#gender-wrapper[_ngcontent-%COMP%]{margin-top:10px}#gender-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row.upload[_ngcontent-%COMP%]{height:calc(100% - 17px);justify-content:space-between;align-items:center}.upload-box[_ngcontent-%COMP%]{padding:7px;border:1px solid #888;width:calc(50% - 10px);height:100%}.upload-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:90px;border:1px solid #888}.upload-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;padding:1px 10px;font-size:12px;border-radius:0;line-height:25px}.upload-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;margin-top:4px;font-size:10px;line-height:14px}[type=file][_ngcontent-%COMP%]{position:absolute;left:-1600px}@media screen and (max-width:920px){.add-form-cols[_ngcontent-%COMP%]{width:calc(50% - 10px)}.add-form-cols-66-percent[_ngcontent-%COMP%], .add-form-cols.upl[_ngcontent-%COMP%]{width:100%}.add-form-cols-50[_ngcontent-%COMP%]{width:calc(50% - 10px)}}","form[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(0,0,0,.25);padding:10px}"]}),z),Y=c("CGWC");function G(e,t){if(1&e){var c=a.kc();a.jc(0,"div",9),a.jc(1,"mat-checkbox",10),a.rc("ngModelChange",(function(e){a.Mc(c);var n=t.$implicit;return a.vc().$implicit.permissions[n]=e})),a.Wc(2),a.ic(),a.ic()}if(2&e){var n=t.$implicit,i=a.vc().$implicit,o=a.vc();a.Pb(1),a.Bc("ngModel",i.permissions[n]),a.Pb(1),a.Yc(" ",o.renameKeys(n)," ")}}function K(e,t){if(1&e){var c=a.kc();a.jc(0,"div",4),a.ec(1,"div",5),a.wc(2,"safe"),a.jc(3,"mat-checkbox",6),a.rc("change",(function(e){a.Mc(c);var n=t.$implicit;return a.vc().toggleAll(n,e)})),a.ic(),a.jc(4,"div",7),a.Vc(5,G,3,2,"div",8),a.ic(),a.ic()}if(2&e){var n=t.$implicit,i=a.vc();a.Pb(1),a.Bc("innerHTML",a.xc(2,2,n.permissionsTitle),a.Nc),a.Pb(4),a.Bc("ngForOf",i.getKeys(n.permissions))}}var J,Z=((J=function(){function e(t,c){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.permissions=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.permissions=JSON.parse(this.user.permissions)}},{key:"getKeys",value:function(e){return Object.keys(e)}},{key:"renameKeys",value:function(e){return e.split("_").join(" ")}},{key:"toggleAll",value:function(e,t){for(var c in e.permissions)e.permissions[c]=+t.checked}},{key:"updatePermissions",value:function(){var e=this;this.coreService.putRequest(o.a.API_URL+"users/permissions/",{userId:this.user.userId,permissions:this.permissions}).subscribe((function(t){e.user.permissions=JSON.stringify(e.permissions),e.dialog.showDialog({content:t.message}),e.modals.showEditPermissionsModal=!1}))}}]),e}()).\u0275fac=function(e){return new(e||J)(a.dc(r.a),a.dc(s.a))},J.\u0275cmp=a.Xb({type:J,selectors:[["edit-user-permissions"]],inputs:{user:"user",modals:"modals"},decls:5,vars:2,consts:[["mat-raised-button","","color","primary",3,"click"],["id","permissions-wrapper"],["class","permission-item",4,"ngFor","ngForOf"],[3,"show"],[1,"permission-item"],[1,"permission-title",3,"innerHTML"],[1,"toggle-checkbox",3,"change"],[1,"row"],["class","col-sm-2",4,"ngFor","ngForOf"],[1,"col-sm-2"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.jc(0,"button",0),a.rc("click",(function(){return t.updatePermissions()})),a.Wc(1,"Update"),a.ic(),a.jc(2,"div",1),a.Vc(3,K,6,4,"div",2),a.ic(),a.ec(4,"loading",3)),2&e&&(a.Pb(3),a.Bc("ngForOf",t.permissions),a.Pb(1),a.Bc("show",t.loading))},directives:[p.b,j.j,M.a,E.a,u.k,u.n],pipes:[Y.a],styles:["#permissions-wrapper[_ngcontent-%COMP%]{background-color:#fff;max-height:70vh;overflow-y:auto;margin-top:10px}.permission-item[_ngcontent-%COMP%]{padding:8px 15px;box-shadow:0 0 2px -1px rgba(0,0,0,.25);margin:15px 0;background:#fcfcfc}.permission-item[_ngcontent-%COMP%]:first-child{margin-top:0}.permission-title[_ngcontent-%COMP%]{display:inline-block;font-size:15px;font-weight:500;color:#555;margin-bottom:5px}mat-checkbox[_ngcontent-%COMP%]{margin-top:5px;display:block;text-transform:capitalize}.toggle-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-left:10px}"]}),J);function ee(e,t){1&e&&(a.jc(0,"button",30),a.ec(1,"i",31),a.Wc(2," Add"),a.ic())}function te(e,t){if(1&e){var c=a.kc();a.jc(0,"th",32),a.jc(1,"mat-checkbox",33),a.rc("change",(function(e){a.Mc(c);var t=a.vc();return e?t.masterToggle():null})),a.ic(),a.ic()}if(2&e){var n=a.vc();a.Pb(1),a.Bc("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function ce(e,t){if(1&e){var c=a.kc();a.jc(0,"td",34),a.jc(1,"mat-checkbox",35),a.rc("click",(function(e){return a.Mc(c),e.stopPropagation()}))("change",(function(e){a.Mc(c);var n=t.$implicit,i=a.vc();return e?i.selection.toggle(n):null})),a.ic(),a.ic()}if(2&e){var n=t.$implicit,i=a.vc();a.Pb(1),a.Bc("checked",i.selection.isSelected(n))}}function ne(e,t){1&e&&(a.jc(0,"th",36),a.Wc(1," Name "),a.ic())}function ie(e,t){if(1&e&&(a.jc(0,"td",34),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Pb(1),a.Yc(" ",c.name," ")}}function oe(e,t){1&e&&(a.jc(0,"th",36),a.Wc(1," Role "),a.ic())}function ae(e,t){if(1&e&&(a.jc(0,"td",34),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Pb(1),a.Yc(" ",c.roleName," ")}}function re(e,t){1&e&&(a.jc(0,"th",36),a.Wc(1," Phone "),a.ic())}function se(e,t){if(1&e&&(a.jc(0,"td",34),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Pb(1),a.Yc(" ",c.phone," ")}}function le(e,t){1&e&&(a.jc(0,"th",32),a.Wc(1," Action "),a.ic())}function de(e,t){if(1&e){var c=a.kc();a.jc(0,"button",38),a.rc("click",(function(){a.Mc(c);var e=a.vc().$implicit;return a.vc().editUser(e)})),a.jc(1,"mat-icon"),a.Wc(2,"create"),a.ic(),a.ic()}}function ue(e,t){if(1&e){var c=a.kc();a.jc(0,"button",41),a.rc("click",(function(){a.Mc(c);var e=a.vc().$implicit;return a.vc().showDelete(e)})),a.jc(1,"mat-icon"),a.Wc(2,"delete"),a.ic(),a.ic()}}function ge(e,t){if(1&e){var c=a.kc();a.jc(0,"td",37),a.jc(1,"button",38),a.rc("click",(function(){a.Mc(c);var e=t.$implicit;return a.vc().showFullUser(e)})),a.jc(2,"mat-icon"),a.Wc(3,"open_in_full"),a.ic(),a.ic(),a.Wc(4,"\xa0 "),a.jc(5,"button",38),a.rc("click",(function(){a.Mc(c);var e=t.$implicit;return a.vc().editPermissions(e)})),a.jc(6,"mat-icon"),a.Wc(7,"lock"),a.ic(),a.ic(),a.Wc(8,"\xa0 "),a.Vc(9,de,3,0,"button",39),a.Wc(10," \xa0"),a.Vc(11,ue,3,0,"button",40),a.ic()}if(2&e){var n=a.vc();a.Pb(9),a.Bc("ngIf",n.permissions.edit_user),a.Pb(2),a.Bc("ngIf",n.permissions.delete_user)}}function me(e,t){1&e&&a.ec(0,"tr",42)}function he(e,t){1&e&&a.ec(0,"tr",43)}function fe(e,t){if(1&e&&a.ec(0,"edit-user",44),2&e){var c=a.vc();a.Bc("modals",c.modals)("user",c.userToEdit)}}function pe(e,t){if(1&e&&a.ec(0,"edit-user-permissions",44),2&e){var c=a.vc();a.Bc("modals",c.modals)("user",c.userToEdit)}}var be=function(){return[9]},ve=function(){return{width:"100%"}},je=["assignForm"];function Me(e,t){1&e&&(a.jc(0,"div",4),a.Wc(1,"Assign Batches"),a.ic())}function Ce(e,t){if(1&e&&(a.jc(0,"mat-option",14),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.userId),a.Pb(1),a.Xc(c.name)}}function Ie(e,t){if(1&e&&(a.jc(0,"mat-option",14),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.courseId),a.Pb(1),a.Xc(c.course)}}function Pe(e,t){if(1&e&&(a.jc(0,"mat-option",23),a.Wc(1),a.ic()),2&e){var c=t.$implicit,n=a.vc(3);a.Bc("value",c.batchId)("disabled",n.choosedBatchIds.includes(c.batchId)||n.userChoosedBatchIds.includes(c.batchId)),a.Pb(1),a.Yc(" ",c.batch,"")}}function we(e,t){if(1&e){var c=a.kc();a.jc(0,"button",24),a.rc("click",(function(){a.Mc(c);var e=a.vc().index;return a.vc(2).removeItem(e)})),a.jc(1,"mat-icon"),a.Wc(2,"delete"),a.ic(),a.ic()}}function ye(e,t){if(1&e){var c=a.kc();a.jc(0,"div",15),a.jc(1,"div",16),a.jc(2,"mat-form-field"),a.jc(3,"mat-label"),a.Wc(4,"Select Course"),a.ic(),a.jc(5,"mat-select",17),a.rc("ngModelChange",(function(e){return a.Mc(c),t.$implicit.courseId=e}))("selectionChange",(function(){a.Mc(c);var e=t.$implicit,n=t.index;return a.vc(2).setBatches(e.courseId,n)})),a.Vc(6,Ie,2,2,"mat-option",11),a.ic(),a.ic(),a.ic(),a.jc(7,"div",18),a.jc(8,"mat-form-field"),a.jc(9,"mat-label"),a.Wc(10,"Select Batch"),a.ic(),a.jc(11,"mat-select",17),a.rc("ngModelChange",(function(e){return a.Mc(c),t.$implicit.batchId=e}))("selectionChange",(function(){return a.Mc(c),a.vc(2).setChoosedIds()})),a.Vc(12,Pe,2,3,"mat-option",19),a.ic(),a.ic(),a.ic(),a.jc(13,"div",20),a.jc(14,"button",21),a.rc("click",(function(e){a.Mc(c);var t=a.vc(2);return e.preventDefault(),t.addMore()})),a.jc(15,"mat-icon"),a.Wc(16,"add"),a.ic(),a.ic(),a.Wc(17,"\xa0\xa0 "),a.Vc(18,we,3,0,"button",22),a.ic(),a.ic()}if(2&e){var n=t.$implicit,i=t.index;a.Pb(5),a.Bc("ngModel",n.courseId)("name","courseId"+i),a.Pb(1),a.Bc("ngForOf",n.courses),a.Pb(5),a.Bc("ngModel",n.batchId)("name","batchId"+i),a.Pb(1),a.Bc("ngForOf",n.batches),a.Pb(6),a.Bc("ngIf",i>0)}}function Be(e,t){if(1&e){var c=a.kc();a.jc(0,"div",8),a.jc(1,"form",null,9),a.jc(3,"mat-form-field"),a.jc(4,"mat-label"),a.Wc(5,"Select User"),a.ic(),a.jc(6,"mat-select",10),a.rc("ngModelChange",(function(e){return a.Mc(c),a.vc().userId=e}))("selectionChange",(function(){return a.Mc(c),a.vc().setUserChoosedIds()})),a.Vc(7,Ce,2,2,"mat-option",11),a.ic(),a.ic(),a.Vc(8,ye,19,7,"div",12),a.jc(9,"button",13),a.rc("click",(function(){return a.Mc(c),a.vc().assignBatches()})),a.Wc(10,"Submit"),a.ic(),a.ic(),a.ic()}if(2&e){var n=a.Ic(2),i=a.vc();a.Pb(6),a.Bc("ngModel",i.userId),a.Pb(1),a.Bc("ngForOf",i.users),a.Pb(1),a.Bc("ngForOf",i.CourseBatches),a.Pb(1),a.Bc("disabled",n.invalid)}}function ke(e,t){if(1&e){var c=a.kc();a.jc(0,"mat-icon",28),a.rc("click",(function(){a.Mc(c);var e=a.vc(),t=e.$implicit,n=e.index,i=a.vc().index;return a.vc().showRemoveBatchFromUser(t.userId,t.batchId,i,n)})),a.Wc(1,"delete"),a.ic()}}function Se(e,t){if(1&e&&(a.jc(0,"div",26),a.Wc(1),a.Vc(2,ke,2,0,"mat-icon",27),a.ic()),2&e){var c=t.$implicit,n=a.vc(2);a.Pb(1),a.Yc(" ",c.course+" - "+c.batch," "),a.Pb(1),a.Bc("ngIf",n.permissions.deassign_user_batches)}}function xe(e,t){if(1&e&&(a.jc(0,"tr"),a.jc(1,"td"),a.Wc(2),a.ic(),a.jc(3,"td"),a.Vc(4,Se,3,2,"div",25),a.ic(),a.ic()),2&e){var c=t.$implicit;a.Pb(2),a.Xc(c.name),a.Pb(2),a.Bc("ngForOf",c.assignedBatches)}}var _e=["assignForm"];function Oe(e,t){if(1&e&&(a.jc(0,"mat-option",13),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.userId),a.Pb(1),a.Xc(c.name)}}function We(e,t){if(1&e&&(a.jc(0,"mat-option",13),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.courseId),a.Pb(1),a.Xc(c.course)}}function Fe(e,t){if(1&e&&(a.jc(0,"mat-option",13),a.Wc(1),a.ic()),2&e){var c=t.$implicit;a.Bc("value",c.batchId),a.Pb(1),a.Yc(" ",c.batch,"")}}function De(e,t){if(1&e&&(a.jc(0,"mat-option",22),a.Wc(1),a.ic()),2&e){var c=t.$implicit,n=a.vc().$implicit,i=a.vc(2);a.Bc("value",c.subjectId)("disabled",i.choosedIds.includes(c.subjectId+"-"+n.batchId)||i.userChoosedIds.includes(c.subjectId+"-"+n.batchId)),a.Pb(1),a.Yc(" ",c.subjectId+" "+c.subject,"")}}function Re(e,t){if(1&e){var c=a.kc();a.jc(0,"button",23),a.rc("click",(function(){a.Mc(c);var e=a.vc().index;return a.vc(2).removeItem(e)})),a.jc(1,"mat-icon"),a.Wc(2,"delete"),a.ic(),a.ic()}}function Ue(e,t){if(1&e){var c=a.kc();a.jc(0,"div",14),a.jc(1,"div",15),a.jc(2,"mat-form-field"),a.jc(3,"mat-label"),a.Wc(4,"Select Course"),a.ic(),a.jc(5,"mat-select",16),a.rc("ngModelChange",(function(e){return a.Mc(c),t.$implicit.courseId=e}))("selectionChange",(function(){a.Mc(c);var e=t.$implicit,n=t.index;return a.vc(2).setBatches(e.courseId,n)})),a.Vc(6,We,2,2,"mat-option",10),a.ic(),a.ic(),a.ic(),a.jc(7,"div",17),a.jc(8,"mat-form-field"),a.jc(9,"mat-label"),a.Wc(10,"Select Batch"),a.ic(),a.jc(11,"mat-select",16),a.rc("ngModelChange",(function(e){return a.Mc(c),t.$implicit.batchId=e}))("selectionChange",(function(){a.Mc(c);var e=t.$implicit,n=t.index;return a.vc(2).setSubjects(e.batchId,n)})),a.Vc(12,Fe,2,2,"mat-option",10),a.ic(),a.ic(),a.ic(),a.jc(13,"div",17),a.jc(14,"mat-form-field"),a.jc(15,"mat-label"),a.Wc(16,"Select Subject"),a.ic(),a.jc(17,"mat-select",16),a.rc("ngModelChange",(function(e){return a.Mc(c),t.$implicit.subjectId=e}))("selectionChange",(function(){return a.Mc(c),a.vc(2).setChoosedIds()})),a.Vc(18,De,2,3,"mat-option",18),a.ic(),a.ic(),a.ic(),a.jc(19,"div",19),a.jc(20,"button",20),a.rc("click",(function(e){a.Mc(c);var t=a.vc(2);return e.preventDefault(),t.addMore()})),a.jc(21,"mat-icon"),a.Wc(22,"add"),a.ic(),a.ic(),a.Wc(23,"\xa0\xa0 "),a.Vc(24,Re,3,0,"button",21),a.ic(),a.ic()}if(2&e){var n=t.$implicit,i=t.index;a.Pb(5),a.Bc("ngModel",n.courseId)("name","courseId"+i),a.Pb(1),a.Bc("ngForOf",n.courses),a.Pb(5),a.Bc("ngModel",n.batchId)("name","batchId"+i),a.Pb(1),a.Bc("ngForOf",n.batches),a.Pb(5),a.Bc("ngModel",n.subjectId)("name","subjectId"+i),a.Pb(1),a.Bc("ngForOf",n.subjects),a.Pb(6),a.Bc("ngIf",i>0)}}function Te(e,t){if(1&e){var c=a.kc();a.hc(0),a.jc(1,"div",3),a.Wc(2,"Assign Subjects"),a.ic(),a.jc(3,"div",7),a.jc(4,"form",null,8),a.jc(6,"mat-form-field"),a.jc(7,"mat-label"),a.Wc(8,"Select User"),a.ic(),a.jc(9,"mat-select",9),a.rc("ngModelChange",(function(e){return a.Mc(c),a.vc().userId=e}))("selectionChange",(function(){return a.Mc(c),a.vc().setUserChoosedIds()})),a.Vc(10,Oe,2,2,"mat-option",10),a.ic(),a.ic(),a.Vc(11,Ue,25,10,"div",11),a.jc(12,"button",12),a.rc("click",(function(){return a.Mc(c),a.vc().assignSubjects()})),a.Wc(13,"Submit"),a.ic(),a.ic(),a.ic(),a.gc()}if(2&e){var n=a.Ic(5),i=a.vc();a.Pb(9),a.Bc("ngModel",i.userId),a.Pb(1),a.Bc("ngForOf",i.users),a.Pb(1),a.Bc("ngForOf",i.CourseBatchesSubjects),a.Pb(1),a.Bc("disabled",n.invalid)}}function Ae(e,t){if(1&e){var c=a.kc();a.jc(0,"mat-icon",27),a.rc("click",(function(){a.Mc(c);var e=a.vc(),t=e.$implicit,n=e.index,i=a.vc().index;return a.vc().showRemoveSubjectFromUser(t.userId,t.batchId,t.subjectId,i,n)})),a.Wc(1," delete"),a.ic()}}function qe(e,t){if(1&e&&(a.jc(0,"div",25),a.Wc(1),a.Vc(2,Ae,2,0,"mat-icon",26),a.ic()),2&e){var c=t.$implicit,n=a.vc(2);a.Pb(1),a.Yc(" ",c.course+" - "+c.batch+" - "+c.subject," "),a.Pb(1),a.Bc("ngIf",n.permissions.deassign_user_subjects)}}function Ee(e,t){if(1&e&&(a.jc(0,"tr"),a.jc(1,"td"),a.Wc(2),a.ic(),a.jc(3,"td"),a.Vc(4,qe,3,2,"div",24),a.ic(),a.ic()),2&e){var c=t.$implicit;a.Pb(2),a.Xc(c.name),a.Pb(2),a.Bc("ngForOf",c.assignedSubjects)}}var Ve,$e,Le,He,Ne=[{path:"",component:(Le=function(){function e(t,c,n,i){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.timeService=n,this.usersService=i,this.loading=!0,this.tableData=[],this.displayedColumns=["name","role","phone","action"],this.dataSource=new D.k(this.tableData),this.selection=new O.c(!0,[]),this.modals={showEditModal:!1,showEditPermissionsModal:!1},this.users=[],this.permissions=R.a}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(_.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getAllUsers(),e.next=3,this.usersService.getUserPermissions();case 3:this.permissions=e.sent,this.permissions.delete_user&&this.displayedColumns.unshift("id");case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getAllUsers",value:function(){var e=this;this.coreService.getRequest(o.a.API_URL+"users").subscribe((function(t){e.loading=!1,e.users=t,e.tableData=t,e.setDataSource()}))}},{key:"filterUsers",value:function(e){this.tableData=[],this.tableData=this.users.filter((function(t){var c=!0,n=t.name&&t.name.toLowerCase().trim(),i=t.city&&t.city.toLowerCase().trim(),o=t.phone&&t.phone.toLowerCase().trim();if(e){var a=e.toLowerCase().trim();c=c&&(n&&n.includes(a)||i&&i.includes(a)||o&&o.includes(a))}return c})),this.setDataSource()}},{key:"showFullUser",value:function(e){var t="<table class='pinnacle-table without-border' style='box-shadow:0 0 4px rgba(0,0,0,.25)'>\n    <tr><td colspan=2 style='text-align:center'><img style='max-width:120px' src=\"".concat(e.image?o.a.WEBSITE_URL+e.image:"assets/images/"+e.gender+".png",'"></td></tr>\n    <tr><th>Name</th><td>').concat(e.name,"</td></tr>\n    <tr><th>Email</th><td>").concat(e.email,"</td></tr>\n    <tr><th>Role</th><td>").concat(e.roleName,"</td></tr>\n    <tr><th>D.O.B</th><td>").concat(this.timeService.getFormattedDate(e.dob),"</td></tr>\n    <tr><th>Employee Id.</th><td>").concat(e.employeeId,"</td></tr>\n    <tr><th>Phone</th><td>").concat(e.phone,"</td></tr>\n    <tr><th>Gender</th><td>").concat(e.gender,"</td></tr>\n    <tr><th>Biometric Id</th><td>").concat(e.bioid,"</td></tr>\n    <tr><th>Qualification</th><td>").concat(e.qualification,"</td></th>\n    <tr><th>City</th><td>").concat(e.city,"</td></tr>\n    <tr><th>State</th><td>").concat(e.state,"</td></tr>\n    <tr><th>Address</th><td>").concat(e.address,"</td></tr>\n    </table>");this.dialog.showDialog({content:t,title:"Full detail of ".concat(e.name," ")})}},{key:"editUser",value:function(e){this.modals.showEditModal=!0,this.userToEdit=e}},{key:"showDelete",value:function(e){var t=this;this.dialog.showDialog({content:'Are you sure to delete "'.concat(e.name,'"'),title:"Confirm Deletion",callBackButtonText:"Delete",callBackButtonColor:"warn",callBack:function(){t.deleteUser(e.userId)}})}},{key:"deleteUser",value:function(e){var t=this;this.coreService.deleteRequest(o.a.API_URL+"users/"+e).subscribe((function(c){if(c.success){var n=t.tableData.find((function(t){return t.userId==e}));t.tableData.splice(t.tableData.indexOf(n),1),t.setDataSource()}}))}},{key:"isAllSelected",value:function(){return this.selection.selected.length==this.dataSource.data.length}},{key:"masterToggle",value:function(){var e=this;this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach((function(t){e.selection.select(t)}))}},{key:"setDataSource",value:function(){this.dataSource=new D.k(this.tableData),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"editPermissions",value:function(e){this.userToEdit=e,this.modals.showEditPermissionsModal=!0}}]),e}(),Le.\u0275fac=function(e){return new(e||Le)(a.dc(r.a),a.dc(s.a),a.dc(U.a),a.dc(T.a))},Le.\u0275cmp=a.Xb({type:Le,selectors:[["user-home"]],viewQuery:function(e,t){var c;1&e&&(a.Sc(F.a,!0),a.Sc(W.a,!0)),2&e&&(a.Hc(c=a.sc())&&(t.sort=c.first),a.Hc(c=a.sc())&&(t.paginator=c.first))},decls:54,vars:16,consts:[["id","page-content"],[1,"row","main-row"],[1,"filter-box"],["placeholder","Search by name,phone,city etc",1,"input-field",3,"keydown"],["name",""],["mat-raised-button","","color","primary",3,"click"],[1,"btns-box"],["mat-raised-button","","routerLink","/users/manage-users/add-user",4,"ngIf"],["mat-raised-button","","color","warn"],["mat-raised-button",""],["mat-table","","matSort","",1,"shadow-sm",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","role"],["matColumnDef","phone"],["matColumnDef","action"],["mat-cell","","id","actioncol",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body","edit-modal-body"],[3,"modals","user",4,"ngIf"],[3,"show"],["mat-raised-button","","routerLink","/users/manage-users/add-user"],[1,"fa","fa-plus"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","id","actioncol"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[3,"modals","user"]],template:function(e,t){if(1&e){var c=a.kc();a.ec(0,"admin-header"),a.ec(1,"admin-sidebar"),a.jc(2,"div",0),a.jc(3,"div",1),a.jc(4,"div",2),a.jc(5,"input",3,4),a.rc("keydown",(function(e){a.Mc(c);var n=a.Ic(6);return 13==e.keyCode?t.filterUsers(n.value):null})),a.ic(),a.jc(7,"button",5),a.rc("click",(function(){a.Mc(c);var e=a.Ic(6);return t.filterUsers(e.value)})),a.Wc(8,"Search"),a.ic(),a.ic(),a.jc(9,"div",6),a.Vc(10,ee,3,0,"button",7),a.jc(11,"button",8),a.jc(12,"mat-icon"),a.Wc(13,"import_export"),a.ic(),a.Wc(14,"Export "),a.ic(),a.jc(15,"button",9),a.jc(16,"mat-icon"),a.Wc(17,"more_vert"),a.ic(),a.ic(),a.ic(),a.ic(),a.jc(18,"table",10),a.hc(19,11),a.Vc(20,te,2,2,"th",12),a.Vc(21,ce,2,1,"td",13),a.gc(),a.hc(22,14),a.Vc(23,ne,2,0,"th",15),a.Vc(24,ie,2,1,"td",13),a.gc(),a.hc(25,16),a.Vc(26,oe,2,0,"th",15),a.Vc(27,ae,2,1,"td",13),a.gc(),a.hc(28,17),a.Vc(29,re,2,0,"th",15),a.Vc(30,se,2,1,"td",13),a.gc(),a.hc(31,18),a.Vc(32,le,2,0,"th",12),a.Vc(33,ge,12,2,"td",19),a.gc(),a.Vc(34,me,1,0,"tr",20),a.Vc(35,he,1,0,"tr",21),a.ic(),a.ec(36,"mat-paginator",22),a.ic(),a.jc(37,"div",23),a.jc(38,"div",24),a.jc(39,"div",25),a.Wc(40,"Edit User"),a.ic(),a.jc(41,"div",26),a.rc("click",(function(){return t.modals.showEditModal=!1})),a.Wc(42,"\xd7"),a.ic(),a.jc(43,"div",27),a.Vc(44,fe,1,2,"edit-user",28),a.ic(),a.ic(),a.ic(),a.jc(45,"div",23),a.jc(46,"div",24),a.jc(47,"div",25),a.Wc(48),a.ic(),a.jc(49,"div",26),a.rc("click",(function(){return t.modals.showEditPermissionsModal=!1})),a.Wc(50,"\xd7"),a.ic(),a.jc(51,"div",27),a.Vc(52,pe,1,2,"edit-user-permissions",28),a.ic(),a.ic(),a.ic(),a.ec(53,"loading",29)}2&e&&(a.Pb(10),a.Bc("ngIf",t.permissions.add_user),a.Pb(8),a.Bc("dataSource",t.dataSource),a.Pb(16),a.Bc("matHeaderRowDef",t.displayedColumns),a.Pb(1),a.Bc("matRowDefColumns",t.displayedColumns),a.Pb(1),a.Bc("pageSizeOptions",a.Cc(13,be)),a.Pb(1),a.Bc("show",t.modals.showEditModal)("options",a.Cc(14,ve)),a.Pb(7),a.Bc("ngIf",t.modals.showEditModal),a.Pb(1),a.Bc("show",t.modals.showEditPermissionsModal)("options",a.Cc(15,ve)),a.Pb(3),a.Yc("Edit ",t.userToEdit&&t.userToEdit.name,"'s Permissions"),a.Pb(4),a.Bc("ngIf",t.modals.showEditPermissionsModal),a.Pb(1),a.Bc("show",t.loading))},directives:[l.a,d.a,p.b,j.k,A.a,D.j,F.a,D.c,D.e,D.b,D.g,D.i,W.a,q.a,M.a,n.c,D.d,E.a,D.a,F.b,D.f,D.h,Q,Z],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".main-row[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;padding:0 0 15px}.filter-box[_ngcontent-%COMP%]{display:flex}.filter-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:10px}.btns-box[_ngcontent-%COMP%]{display:flex}.btns-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.btns-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:last-child{margin-right:0}table[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:528px){.btns-box[_ngcontent-%COMP%]{margin-top:10px;width:100%}.btns-box[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.33%}.filter-box[_ngcontent-%COMP%]{width:100%}.filter-box[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.filter-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:calc(40% - 10px)}}"]}),Le)},{path:"add-user",component:x},{path:"assign-batches",component:($e=function(){function e(t,c,n){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.usersService=n,this.users=[],this.CourseBatches=[{courseId:null,batchId:null,courses:[],batches:[]}],this.choosedBatchIds=[],this.userChoosedBatchIds=[],this.assignedBatchUsers=[],this.permissions=R.a}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(_.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getAssignedBatches(),this.getUsers(),this.getCourses(),e.next=5,this.usersService.getUserPermissions();case 5:this.permissions=e.sent;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getAssignedBatches",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"courses/batches/assigned-to-users").subscribe((function(t){e.loading=!1,e.assignedBatchUsers=t}))}},{key:"showRemoveBatchFromUser",value:function(e,t,c,n){var i=this;this.dialog.showDialog({title:"Confirm Remove",content:"Are you sure to remove this batch?",callBack:function(){i.removeBatchFromUser(e,t,c,n)}})}},{key:"removeBatchFromUser",value:function(e,t,c,n){var i=this;this.loading=!0,this.coreService.deleteRequest(o.a.API_URL+"courses/batches/remove-from-users/"+e+"/"+t).subscribe((function(e){i.loading=!1,e.success&&i.assignedBatchUsers[c].assignedBatches.splice(n,1)}))}},{key:"getCourses",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"courses").subscribe((function(t){e.CourseBatches[0].courses=t,e.loading=!1}))}},{key:"setBatches",value:function(e,t){var c=this.CourseBatches[t].courses.find((function(t){return t.courseId==e}));c&&(this.CourseBatches[t].batches=c.batches,this.CourseBatches[t].batchId=null)}},{key:"getUsers",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"users").subscribe((function(t){e.loading=!1,e.users=t}))}},{key:"setChoosedIds",value:function(){var e=[];this.CourseBatches.forEach((function(t){return e.push(t.batchId)})),this.choosedBatchIds=e}},{key:"setUserChoosedIds",value:function(){var e=this;this.userChoosedBatchIds=[],this.assignedBatchUsers.find((function(t){return t.userId==e.userId})).assignedBatches.forEach((function(t){e.userChoosedBatchIds.push(t.batchId)}))}},{key:"addMore",value:function(){this.CourseBatches.push({courseId:null,batchId:null,courses:_toConsumableArray(this.CourseBatches[0].courses),batches:_toConsumableArray(this.CourseBatches[0].batches)})}},{key:"removeItem",value:function(e){this.CourseBatches.splice(e,1),this.choosedBatchIds.splice(e,1)}},{key:"assignBatches",value:function(){var e=this;this.loading=!0,this.coreService.postRequest(o.a.API_URL+"courses/batches/assign-to-users",{userId:this.userId,batchIds:this.choosedBatchIds}).subscribe((function(t){e.loading=!1,e.assignForm.resetForm(),e.getAssignedBatches(),e.dialog.showDialog({content:t.message})}))}}]),e}(),$e.\u0275fac=function(e){return new(e||$e)(a.dc(r.a),a.dc(s.a),a.dc(T.a))},$e.\u0275cmp=a.Xb({type:$e,selectors:[["app-assign-batches-to-users"]],viewQuery:function(e,t){var c;1&e&&a.cd(je,!0),2&e&&a.Hc(c=a.sc())&&(t.assignForm=c.first)},decls:16,vars:4,consts:[["id","page-content"],["class","content-title",4,"ngIf"],["class","content-box",4,"ngIf"],[2,"height","15px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],[3,"show"],[1,"content-box"],["assignForm","ngForm"],["name","userId","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"row"],[1,"col-sm-3","pr"],["required","",3,"ngModel","name","ngModelChange","selectionChange"],[1,"col-sm-3","pr","pl"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["class","assigned-items",4,"ngFor","ngForOf"],[1,"assigned-items"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,t){1&e&&(a.ec(0,"admin-header"),a.ec(1,"admin-sidebar"),a.jc(2,"div",0),a.Vc(3,Me,2,0,"div",1),a.Vc(4,Be,11,4,"div",2),a.ec(5,"div",3),a.jc(6,"div",4),a.Wc(7,"Assigned Batches"),a.ic(),a.jc(8,"table",5),a.jc(9,"tr"),a.jc(10,"th"),a.Wc(11,"Name"),a.ic(),a.jc(12,"th"),a.Wc(13,"Course - Batch"),a.ic(),a.ic(),a.Vc(14,xe,5,2,"tr",6),a.ic(),a.ic(),a.ec(15,"loading",7)),2&e&&(a.Pb(3),a.Bc("ngIf",t.permissions.assign_user_batches),a.Pb(1),a.Bc("ngIf",t.permissions.assign_user_batches),a.Pb(10),a.Bc("ngForOf",t.assignedBatchUsers),a.Pb(1),a.Bc("show",t.loading))},directives:[l.a,d.a,j.k,j.j,M.a,u.v,u.l,u.m,g.b,g.e,b.a,u.r,u.k,u.n,p.b,v.h,A.a],styles:[""]}),$e)},{path:"assign-subjects",component:(Ve=function(){function e(t,c,n){_classCallCheck(this,e),this.coreService=t,this.dialog=c,this.usersService=n,this.users=[],this.CourseBatchesSubjects=[{courseId:null,batchId:null,subjectId:null,subjects:[],courses:[],batches:[]}],this.choosedIds=[],this.userChoosedIds=[],this.assignedSubjectUsers=[],this.batches_subjects=[],this.permissions=R.a}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(_.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getAssignedSubjects(),this.getUsers(),this.getCourses(),this.getBatchesSubjects(),e.next=6,this.usersService.getUserPermissions();case 6:this.permissions=e.sent;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getBatchesSubjects",value:function(){var e=this;this.coreService.getRequest(o.a.API_URL+"courses/batches/subjects").subscribe((function(t){e.batches_subjects=t}))}},{key:"setSubjects",value:function(e,t){var c=this.batches_subjects.find((function(t){return t.batchId==e}));c&&(this.CourseBatchesSubjects[t].subjects=c.subjects,this.CourseBatchesSubjects[t].subjectId=null)}},{key:"getAssignedSubjects",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"subjects/assigned-to-users").subscribe((function(t){e.loading=!1,e.assignedSubjectUsers=t}))}},{key:"showRemoveSubjectFromUser",value:function(e,t,c,n,i){var o=this;this.dialog.showDialog({title:"Confirm Remove",content:"Are you sure to remove this subject?",callBack:function(){o.removeSubjectFromUser(e,t,c,n,i)}})}},{key:"removeSubjectFromUser",value:function(e,t,c,n,i){var a=this;this.loading=!0,this.coreService.deleteRequest(o.a.API_URL+"subjects/remove-from-users/"+e+"/"+t+"/"+c).subscribe((function(e){a.loading=!1,e.success&&a.assignedSubjectUsers[n].assignedSubjects.splice(i,1)}))}},{key:"getCourses",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"courses").subscribe((function(t){e.CourseBatchesSubjects[0].courses=t,e.loading=!1}))}},{key:"setBatches",value:function(e,t){var c=this.CourseBatchesSubjects[t].courses.find((function(t){return t.courseId==e}));c&&(this.CourseBatchesSubjects[t].batches=c.batches,this.CourseBatchesSubjects[t].batchId=null)}},{key:"getUsers",value:function(){var e=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"users").subscribe((function(t){e.loading=!1,e.users=t}))}},{key:"setChoosedIds",value:function(){var e=[];this.CourseBatchesSubjects.forEach((function(t){e.push(t.subjectId+"-"+t.batchId)})),this.choosedIds=e,console.log("choosedIds",this.choosedIds)}},{key:"setUserChoosedIds",value:function(){var e=this;this.userChoosedIds=[],this.assignedSubjectUsers.find((function(t){return t.userId==e.userId})).assignedSubjects.forEach((function(t){e.userChoosedIds.push(t.subjectId+"-"+t.batchId)}))}},{key:"addMore",value:function(){this.CourseBatchesSubjects.push({courseId:null,batchId:null,subjectId:null,subjects:_toConsumableArray(this.CourseBatchesSubjects[0].subjects),courses:_toConsumableArray(this.CourseBatchesSubjects[0].courses),batches:_toConsumableArray(this.CourseBatchesSubjects[0].batches)})}},{key:"removeItem",value:function(e){this.CourseBatchesSubjects.splice(e,1),this.choosedIds.splice(e,1)}},{key:"assignSubjects",value:function(){var e=this;this.loading=!0;var t={userId:this.userId,subjectIds:[],batchIds:[]};this.CourseBatchesSubjects.forEach((function(e){t.batchIds.push(e.batchId),t.subjectIds.push(e.subjectId)})),this.coreService.postRequest(o.a.API_URL+"subjects/assign-to-users",t).subscribe((function(t){e.loading=!1,e.assignForm.resetForm(),e.getAssignedSubjects(),e.dialog.showDialog({content:t.message})}))}}]),e}(),Ve.\u0275fac=function(e){return new(e||Ve)(a.dc(r.a),a.dc(s.a),a.dc(T.a))},Ve.\u0275cmp=a.Xb({type:Ve,selectors:[["app-assign-subjects-to-users"]],viewQuery:function(e,t){var c;1&e&&a.cd(_e,!0),2&e&&a.Hc(c=a.sc())&&(t.assignForm=c.first)},decls:15,vars:3,consts:[["id","page-content"],[4,"ngIf"],[2,"height","15px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],[3,"show"],[1,"content-box"],["assignForm","ngForm"],["name","userId","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"row"],[1,"col-sm-3","pr"],["required","",3,"ngModel","name","ngModelChange","selectionChange"],[1,"col-sm-3","pr","pl"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["class","assigned-items",4,"ngFor","ngForOf"],[1,"assigned-items"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,t){1&e&&(a.ec(0,"admin-header"),a.ec(1,"admin-sidebar"),a.jc(2,"div",0),a.Vc(3,Te,14,4,"ng-container",1),a.ec(4,"div",2),a.jc(5,"div",3),a.Wc(6,"Assigned Subjects"),a.ic(),a.jc(7,"table",4),a.jc(8,"tr"),a.jc(9,"th"),a.Wc(10,"Name"),a.ic(),a.jc(11,"th"),a.Wc(12,"Course - Batch - Subjects"),a.ic(),a.ic(),a.Vc(13,Ee,5,2,"tr",5),a.ic(),a.ic(),a.ec(14,"loading",6)),2&e&&(a.Pb(3),a.Bc("ngIf",t.permissions.assign_user_subjects),a.Pb(10),a.Bc("ngForOf",t.assignedSubjectUsers),a.Pb(1),a.Bc("show",t.loading))},directives:[l.a,d.a,j.k,j.j,M.a,u.v,u.l,u.m,g.b,g.e,b.a,u.r,u.k,u.n,p.b,v.h,A.a],styles:[""]}),Ve)}],Xe=((He=function e(){_classCallCheck(this,e)}).\u0275mod=a.bc({type:He}),He.\u0275inj=a.ac({factory:function(e){return new(e||He)},imports:[[i.a,n.f.forChild(Ne)]]}),He)}}]);