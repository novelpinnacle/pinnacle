function _classCallCheck(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,c){for(var t=0;t<c.length;t++){var i=c[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,c,t){return c&&_defineProperties(e.prototype,c),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"2P24":function(e,c,t){"use strict";t.r(c),t.d(c,"ToppersModule",(function(){return I}));var i,n=t("ofXK"),a=t("tyNb"),o=t("n+G7"),r=t("SP9e"),s=t("fXoL"),p=t("FM/7"),l=t("QeEr"),d=t("aCk2"),u=t("G0I0"),m=t("1jcm"),f=t("3Pt+"),g=t("kmnG"),h=t("qFsG"),b=t("bTqV"),v=t("ZMsq"),j=t("NFeN"),k=((i=function(){function e(c,t){_classCallCheck(this,e),this.cms=c,this.dialog=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"updateTopper",value:function(e){var c=this,t=new FormData;for(var i in t.append("image",this.selectedImage),t.append("id",this.topper.id+""),e)t.append(i,e[i]);this.cms.updateTopper(t).subscribe((function(e){e.success&&(c.modal.editTopperModal=!1),c.dialog.showDialog({content:e.message})}))}}]),e}()).\u0275fac=function(e){return new(e||i)(s.dc(p.a),s.dc(l.a))},i.\u0275cmp=s.Xb({type:i,selectors:[["edit-topper"]],inputs:{modal:"modal",topper:"topper"},decls:20,vars:3,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name",3,"ngModel","ngModelChange"],["matInput","","name","classdetails",3,"ngModel","ngModelChange"],["matInput","","name","marks",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(e,c){if(1&e){var t=s.kc();s.jc(0,"form",0,1),s.rc("ngSubmit",(function(){s.Mc(t);var e=s.Ic(1);return c.updateTopper(e.value)})),s.jc(2,"mat-form-field"),s.jc(3,"mat-label"),s.Wc(4,"Name"),s.ic(),s.jc(5,"input",2),s.rc("ngModelChange",(function(e){return c.topper.name=e})),s.ic(),s.ic(),s.jc(6,"mat-form-field"),s.jc(7,"mat-label"),s.Wc(8,"Class Details"),s.ic(),s.jc(9,"textarea",3),s.rc("ngModelChange",(function(e){return c.topper.classdetails=e})),s.ic(),s.ic(),s.jc(10,"mat-form-field"),s.jc(11,"mat-label"),s.Wc(12,"Marks"),s.ic(),s.jc(13,"input",4),s.rc("ngModelChange",(function(e){return c.topper.marks=e})),s.ic(),s.ic(),s.jc(14,"div",5),s.jc(15,"div",6),s.jc(16,"input",7),s.rc("change",(function(e){return c.setSelectedImage(e)})),s.ic(),s.ic(),s.jc(17,"div",6),s.jc(18,"button",8),s.Wc(19,"Submit"),s.ic(),s.ic(),s.ic(),s.ic()}2&e&&(s.Pb(5),s.Bc("ngModel",c.topper.name),s.Pb(4),s.Bc("ngModel",c.topper.classdetails),s.Pb(4),s.Bc("ngModel",c.topper.marks))},directives:[f.v,f.l,f.m,g.b,g.e,h.a,f.b,f.k,f.n,b.b],styles:[""]}),i);function M(e,c){if(1&e){var t=s.kc();s.jc(0,"tr"),s.jc(1,"td"),s.ec(2,"img",23),s.ic(),s.jc(3,"td"),s.Wc(4),s.ic(),s.jc(5,"td"),s.Wc(6),s.ic(),s.jc(7,"td"),s.Wc(8),s.ic(),s.jc(9,"td"),s.jc(10,"button",24),s.rc("click",(function(){s.Mc(t);var e=c.$implicit;return s.vc().setActiveTopper(e)})),s.jc(11,"mat-icon"),s.Wc(12,"create"),s.ic(),s.ic(),s.Wc(13,"\xa0 "),s.jc(14,"button",25),s.rc("click",(function(){s.Mc(t);var e=c.$implicit;return s.vc().deleteTopper(e.id)})),s.jc(15,"mat-icon"),s.Wc(16,"delete"),s.ic(),s.ic(),s.ic(),s.ic()}if(2&e){var i=c.$implicit,n=s.vc();s.Pb(2),s.Bc("src",n.WEBSITE_URL+"uploads/toppers/"+i.image,s.Pc),s.Pb(2),s.Xc(i.name),s.Pb(2),s.Xc(i.classdetails),s.Pb(2),s.Xc(i.marks)}}function T(e,c){if(1&e&&s.ec(0,"edit-topper",26),2&e){var t=s.vc();s.Bc("topper",t.activeTopper)("modal",t.modal)}}var C,w,y=function(){return{width:"60%"}},W=[{path:"",component:(C=function(){function e(c,t){_classCallCheck(this,e),this.cms=c,this.dialog=t,this.WEBSITE_URL=r.a.WEBSITE_URL,this.toppers=[],this.modal={editTopperModal:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getToppers(),this.getCMSStatus()}},{key:"getCMSStatus",value:function(){var e=this;this.cms.getCMSStatus("toppers").subscribe((function(c){e.showToppers=c.status}))}},{key:"getToppers",value:function(){var e=this;this.cms.getActiveToppers().subscribe((function(c){e.toppers=c}))}},{key:"setActiveTopper",value:function(e){this.activeTopper=e,this.modal.editTopperModal=!0}},{key:"setSelectedImage",value:function(e){this.selectedImage=e.target.files[0]}},{key:"uploadTopper",value:function(e){var c=this,t=new FormData;for(var i in t.append("image",this.selectedImage),e)t.append(i,e[i]);this.cms.uploadTopper(t).subscribe((function(e){e.success&&c.toppers.unshift(e.topper),c.dialog.showDialog({content:e.message})}))}},{key:"deleteTopper",value:function(e){var c=this;this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this topper?",callBack:function(){c.cms.deleteTopper(e).subscribe((function(t){t.success&&c.toppers.splice(c.toppers.indexOf(c.toppers.find((function(c){return c.id==e}))),1)}))}})}},{key:"changeStatus",value:function(){this.cms.changeCMSStatus("toppers",this.showToppers).subscribe((function(){}))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(s.dc(p.a),s.dc(l.a))},C.\u0275cmp=s.Xb({type:C,selectors:[["app-upload-toppers"]],decls:51,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name","ngModel",""],["matInput","","name","classdetails","ngModel",""],["matInput","","name","marks","ngModel",""],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"topper","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"topper","modal"]],template:function(e,c){if(1&e){var t=s.kc();s.ec(0,"admin-header"),s.ec(1,"admin-sidebar"),s.jc(2,"div",0),s.jc(3,"div",1),s.Wc(4,"Upload Topper "),s.jc(5,"mat-slide-toggle",2),s.rc("ngModelChange",(function(e){return c.showToppers=e}))("change",(function(){return c.changeStatus()})),s.ic(),s.ic(),s.jc(6,"div",3),s.jc(7,"form",4,5),s.rc("ngSubmit",(function(){s.Mc(t);var e=s.Ic(8);return c.uploadTopper(e.value)})),s.jc(9,"mat-form-field"),s.jc(10,"mat-label"),s.Wc(11,"Name"),s.ic(),s.ec(12,"input",6),s.ic(),s.jc(13,"mat-form-field"),s.jc(14,"mat-label"),s.Wc(15,"Class Details"),s.ic(),s.ec(16,"textarea",7),s.ic(),s.jc(17,"mat-form-field"),s.jc(18,"mat-label"),s.Wc(19,"Marks"),s.ic(),s.ec(20,"input",8),s.ic(),s.jc(21,"div",9),s.jc(22,"div",10),s.jc(23,"input",11),s.rc("change",(function(e){return c.setSelectedImage(e)})),s.ic(),s.ic(),s.jc(24,"div",10),s.jc(25,"button",12),s.Wc(26,"Submit"),s.ic(),s.ic(),s.ic(),s.ic(),s.ic(),s.ec(27,"div",13),s.jc(28,"div",14),s.Wc(29,"Active Toppers"),s.ic(),s.jc(30,"table",15),s.jc(31,"tr"),s.jc(32,"th"),s.Wc(33,"Image"),s.ic(),s.jc(34,"th"),s.Wc(35,"Name"),s.ic(),s.jc(36,"th"),s.Wc(37,"Class Details"),s.ic(),s.jc(38,"th"),s.Wc(39,"Marks"),s.ic(),s.jc(40,"th"),s.Wc(41,"Action"),s.ic(),s.ic(),s.Vc(42,M,17,4,"tr",16),s.ic(),s.ic(),s.jc(43,"div",17),s.jc(44,"div",18),s.jc(45,"div",19),s.Wc(46,"Edit Topper"),s.ic(),s.jc(47,"div",20),s.rc("click",(function(){return c.modal.editTopperModal=!1})),s.Wc(48,"\xd7"),s.ic(),s.jc(49,"div",21),s.Vc(50,T,1,2,"edit-topper",22),s.ic(),s.ic(),s.ic()}2&e&&(s.Pb(5),s.Bc("ngModel",c.showToppers),s.Pb(37),s.Bc("ngForOf",c.toppers),s.Pb(1),s.Bc("show",c.modal.editTopperModal)("options",s.Cc(5,y)),s.Pb(7),s.Bc("ngIf",c.modal.editTopperModal))},directives:[d.a,u.a,m.a,f.k,f.n,f.v,f.l,f.m,g.b,g.e,h.a,f.b,b.b,n.j,v.a,n.k,j.a,k],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),C)}],I=((w=function e(){_classCallCheck(this,e)}).\u0275mod=s.bc({type:w}),w.\u0275inj=s.ac({factory:function(e){return new(e||w)},imports:[[n.c,o.a,a.f.forChild(W)]]}),w)}}]);