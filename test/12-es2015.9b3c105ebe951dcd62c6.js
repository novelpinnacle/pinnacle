(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{RO9V:function(e,t,i){"use strict";i.r(t),i.d(t,"AssignWorkModule",(function(){return F}));var c=i("SP9e"),r=i("fXoL"),o=i("viX7"),n=i("4KEQ"),a=i("QeEr"),s=i("Sz29"),d=i("aCk2"),l=i("G0I0"),g=i("3Pt+"),m=i("kmnG"),u=i("d3UM"),k=i("ofXK"),h=i("qFsG"),f=i("z17N"),w=i("bTqV"),W=i("NFeN"),b=i("ZMsq"),p=i("V/o5"),v=i("FKr1");function j(e,t){if(1&e&&(r.jc(0,"mat-option",10),r.Wc(1),r.ic()),2&e){const e=t.$implicit;r.Bc("value",e.userId),r.Pb(1),r.Xc(e.name)}}let D=(()=>{class e{constructor(e,t,i,c){this.assignWorkService=e,this.coreService=t,this.dialog=i,this.dateTimeService=c,this.users=[]}ngOnInit(){this.getAllUsers(),this.workDate=new Date(this.work.workDate)}getAllUsers(){this.loading=!0,this.coreService.getRequest(c.a.API_URL+"users").subscribe(e=>{this.loading=!1,this.users=e})}updateWork(e){const t={id:this.work.id,workDate:new Date(e.workDate+" UTC").toISOString().slice(0,19).replace("T"," "),work:e.work,userId:e.userId};this.assignWorkService.updateWork(t).subscribe(t=>{e.success&&(this.modal.editWorkModal=!1),this.dialog.showDialog({content:t.message})})}}return e.\u0275fac=function(t){return new(t||e)(r.dc(o.a),r.dc(n.a),r.dc(a.a),r.dc(s.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["edit-work"]],inputs:{work:"work",modal:"modal"},decls:19,vars:7,consts:[[3,"ngSubmit"],["form","ngForm"],["name","userId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","work","required","",3,"ngModel","ngModelChange"],["name","workDate","matInput","","placeholder","Work Date","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["mat-raised-button","","color","primary","type","submut"],[3,"value"]],template:function(e,t){if(1&e){const e=r.kc();r.jc(0,"form",0,1),r.rc("ngSubmit",(function(){r.Mc(e);const i=r.Ic(1);return t.updateWork(i.value)})),r.jc(2,"mat-form-field"),r.jc(3,"mat-label"),r.Wc(4,"Select User"),r.ic(),r.jc(5,"mat-select",2),r.rc("ngModelChange",(function(e){return t.work.userId=e})),r.Vc(6,j,2,2,"mat-option",3),r.ic(),r.ic(),r.jc(7,"mat-form-field"),r.jc(8,"mat-label"),r.Wc(9,"Enter Work Details"),r.ic(),r.jc(10,"textarea",4),r.rc("ngModelChange",(function(e){return t.work.work=e})),r.ic(),r.ic(),r.jc(11,"mat-form-field"),r.jc(12,"input",5),r.rc("ngModelChange",(function(e){return t.workDate=e})),r.ic(),r.jc(13,"span",6),r.Wc(14,"calendar_today"),r.ic(),r.ec(15,"owl-date-time",7,8),r.ic(),r.jc(17,"button",9),r.Wc(18,"Update"),r.ic(),r.ic()}if(2&e){const e=r.Ic(16);r.Pb(5),r.Bc("ngModel",t.work.userId),r.Pb(1),r.Bc("ngForOf",t.users),r.Pb(4),r.Bc("ngModel",t.work.work),r.Pb(2),r.Bc("ngModel",t.workDate)("owlDateTime",e)("owlDateTimeTrigger",e),r.Pb(3),r.Bc("pickerType","calendar")}},directives:[g.v,g.l,g.m,m.b,m.e,u.a,g.r,g.k,g.n,k.j,h.a,g.b,f.b,f.d,m.f,f.a,w.b,v.h],styles:[""]}),e})();const M=["form"];function T(e,t){if(1&e&&(r.jc(0,"mat-option",29),r.Wc(1),r.ic()),2&e){const e=t.$implicit;r.Bc("value",e.userId),r.Pb(1),r.Xc(e.name)}}const C=function(e,t,i){return{isCarriedOver:e,isCompleted:t,adminWork:i}};function P(e,t){if(1&e){const e=r.kc();r.jc(0,"tr",30),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.jc(7,"td"),r.jc(8,"button",31),r.rc("click",(function(){r.Mc(e);const i=t.$implicit;return r.vc().showEditWork(i)})),r.jc(9,"mat-icon"),r.Wc(10,"create"),r.ic(),r.ic(),r.Wc(11,"\xa0 "),r.jc(12,"button",32),r.rc("click",(function(){r.Mc(e);const i=t.$implicit;return r.vc().deleteWork(i)})),r.jc(13,"mat-icon"),r.Wc(14,"delete"),r.ic(),r.ic(),r.ic(),r.ic()}if(2&e){const e=t.$implicit;r.Bc("ngClass",r.Fc(4,C,e.isCarriedOver&&!e.isCompleted,e.isCompleted,1==e.roleId)),r.Pb(2),r.Xc(e.name),r.Pb(2),r.Xc(e.work),r.Pb(2),r.Xc(e.workDate)}}function S(e,t){if(1&e&&r.ec(0,"edit-work",33),2&e){const e=r.vc();r.Bc("work",e.activeWork)("modal",e.modals)}}const I=function(){return{width:"60%"}};let y=(()=>{class e{constructor(e,t,i,c){this.assignWorkService=e,this.coreService=t,this.dialog=i,this.dateTimeService=c,this.users=[],this.masterAssignedWork=[],this.assignedWork=[],this.filters={date:new Date},this.modals={editWorkModal:!1}}ngOnInit(){this.getAllUsers(),this.getAssignedWork()}showEditWork(e){this.activeWork=e,this.modals.editWorkModal=!0}changeDate(e){let t=0;t="next"==e?this.filters.date.getTime()+864e5:this.filters.date.getTime()-864e5,this.filters.date=new Date(t),this.filterWork()}filterWork(){this.assignedWork=this.masterAssignedWork.filter(e=>this.dateTimeService.getFormattedDate(e.workDate)==this.dateTimeService.getFormattedDate(this.filters.date))}getAllUsers(){this.loading=!0,this.coreService.getRequest(c.a.API_URL+"users").subscribe(e=>{this.loading=!1,this.users=e})}getAssignedWork(){this.assignWorkService.getAssignedWork().subscribe(e=>{this.assignedWork=e,this.masterAssignedWork=[...e],this.filterWork()})}assignWork(e){this.loading=!0,e.workDate=new Date(e.workDate+" UTC").toISOString().slice(0,19).replace("T"," "),this.assignWorkService.assignWork(e).subscribe(e=>{e.success&&this.form.resetForm(),this.dialog.showDialog({content:e.message}),this.getAssignedWork(),this.loading=!1})}deleteWork(e){this.dialog.showDialog({content:"Are you sure to delete this work?",callBack:()=>{this.assignWorkService.deleteWork(e.id).subscribe(t=>{t.success&&this.assignedWork.splice(this.assignedWork.indexOf(e),1)})}})}}return e.\u0275fac=function(t){return new(t||e)(r.dc(o.a),r.dc(n.a),r.dc(a.a),r.dc(s.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["app-assign-work-home"]],viewQuery:function(e,t){var i;1&e&&r.cd(M,!0),2&e&&r.Hc(i=r.sc())&&(t.form=i.first)},decls:58,vars:15,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["name","userId","ngModel","","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","work","ngModel","","required",""],["name","workDate","ngModel","","matInput","","placeholder","Work Date","required","",3,"owlDateTime","owlDateTimeTrigger"],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[2,"height","15px"],[1,"content-title","row"],[1,"input-field-date"],["id","date-prev",3,"click"],["name","inquiryDate","ngModel","","placeholder","Schedule Date","required","",1,"input-field",3,"ngModel","owlDateTime","owlDateTimeTrigger","dateTimeChange","ngModelChange"],["id","date-next",3,"click"],["dt2",""],[1,"pinnacle-table","big-heading"],[3,"ngClass",4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body","edit-modal-body"],[3,"work","modal",4,"ngIf"],[3,"show"],[3,"value"],[3,"ngClass"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"work","modal"]],template:function(e,t){if(1&e){const e=r.kc();r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.Wc(4,"Assign Work"),r.ic(),r.jc(5,"div",2),r.jc(6,"form",3,4),r.rc("ngSubmit",(function(){r.Mc(e);const i=r.Ic(7);return t.assignWork(i.value)})),r.jc(8,"mat-form-field"),r.jc(9,"mat-label"),r.Wc(10,"Select User"),r.ic(),r.jc(11,"mat-select",5),r.Vc(12,T,2,2,"mat-option",6),r.ic(),r.ic(),r.jc(13,"mat-form-field"),r.jc(14,"mat-label"),r.Wc(15,"Enter Work Details"),r.ic(),r.ec(16,"textarea",7),r.ic(),r.jc(17,"mat-form-field"),r.ec(18,"input",8),r.jc(19,"span",9),r.Wc(20,"calendar_today"),r.ic(),r.ec(21,"owl-date-time",10,11),r.ic(),r.jc(23,"button",12),r.Wc(24,"Assign"),r.ic(),r.ic(),r.ic(),r.ec(25,"div",13),r.jc(26,"div",14),r.Wc(27,"Assigned Work "),r.jc(28,"div",15),r.jc(29,"mat-icon",16),r.rc("click",(function(){return t.changeDate("prev")})),r.Wc(30,"navigate_before"),r.ic(),r.jc(31,"input",17),r.rc("dateTimeChange",(function(){return t.filterWork()}))("ngModelChange",(function(e){return t.filters.date=e})),r.ic(),r.jc(32,"mat-icon",18),r.rc("click",(function(){return t.changeDate("next")})),r.Wc(33,"navigate_next"),r.ic(),r.jc(34,"span",9),r.Wc(35,"calendar_today"),r.ic(),r.ec(36,"owl-date-time",10,19),r.ic(),r.ic(),r.jc(38,"table",20),r.jc(39,"tr"),r.jc(40,"th"),r.Wc(41,"Name"),r.ic(),r.jc(42,"th"),r.Wc(43,"Work"),r.ic(),r.jc(44,"th"),r.Wc(45,"Date"),r.ic(),r.jc(46,"th"),r.Wc(47,"Action"),r.ic(),r.ic(),r.Vc(48,P,15,8,"tr",21),r.ic(),r.ic(),r.jc(49,"div",22),r.jc(50,"div",23),r.jc(51,"div",24),r.Wc(52,"Edit Work"),r.ic(),r.jc(53,"div",25),r.rc("click",(function(){return t.modals.editWorkModal=!1})),r.Wc(54,"\xd7"),r.ic(),r.jc(55,"div",26),r.Vc(56,S,1,2,"edit-work",27),r.ic(),r.ic(),r.ic(),r.ec(57,"loading",28)}if(2&e){const e=r.Ic(7),i=r.Ic(22),c=r.Ic(37);r.Pb(12),r.Bc("ngForOf",t.users),r.Pb(6),r.Bc("owlDateTime",i)("owlDateTimeTrigger",i),r.Pb(3),r.Bc("pickerType","calendar"),r.Pb(2),r.Bc("disabled",e.invalid),r.Pb(8),r.Bc("ngModel",t.filters.date)("owlDateTime",c)("owlDateTimeTrigger",c),r.Pb(5),r.Bc("pickerType","calendar"),r.Pb(12),r.Bc("ngForOf",t.assignedWork),r.Pb(1),r.Bc("show",t.modals.editWorkModal)("options",r.Cc(14,I)),r.Pb(7),r.Bc("ngIf",t.modals.editWorkModal),r.Pb(1),r.Bc("show",t.loading)}},directives:[d.a,l.a,g.v,g.l,g.m,m.b,m.e,u.a,g.k,g.n,g.r,k.j,h.a,g.b,f.b,f.d,m.f,f.a,w.b,W.a,b.a,k.k,p.a,v.h,k.i,D],styles:[".row.content-title[_ngcontent-%COMP%]{display:row;align-items:center;justify-content:space-between}.isCarriedOver[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fcc}.isCompleted[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d9f2d9}.adminWork[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#add8e6}"]}),e})();var O=i("tyNb"),B=i("n+G7");const A=[{path:"",component:y}];let F=(()=>{class e{}return e.\u0275mod=r.bc({type:e}),e.\u0275inj=r.ac({factory:function(t){return new(t||e)},imports:[[B.a,O.f.forChild(A)]]}),e})()}}]);