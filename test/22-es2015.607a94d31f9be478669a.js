(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{qzFL:function(e,c,t){"use strict";t.r(c),t.d(c,"TeacherModule",(function(){return I}));var i=t("ofXK"),a=t("n+G7"),n=t("tyNb"),o=t("SP9e"),r=t("fXoL"),s=t("FM/7"),d=t("QeEr"),l=t("aCk2"),h=t("G0I0"),m=t("1jcm"),g=t("3Pt+"),u=t("kmnG"),p=t("qFsG"),f=t("bTqV"),b=t("ZMsq"),j=t("NFeN");let M=(()=>{class e{constructor(e,c){this.cms=e,this.dialog=c}ngOnInit(){}setSelectedImage(e){this.selectedImage=e.target.files[0]}updateTeacher(e){let c=new FormData;c.append("image",this.selectedImage),c.append("id",this.teacher.id+"");for(let t in e)c.append(t,e[t]);this.cms.updateTeacher(c).subscribe(e=>{e.success&&(this.modal.editTeacherModal=!1),this.dialog.showDialog({content:e.message})})}}return e.\u0275fac=function(c){return new(c||e)(r.dc(s.a),r.dc(d.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["edit-teacher"]],inputs:{modal:"modal",teacher:"teacher"},decls:20,vars:3,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name",3,"ngModel","ngModelChange"],["matInput","","name","designation",3,"ngModel","ngModelChange"],["matInput","","name","description",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(e,c){if(1&e){const e=r.kc();r.jc(0,"form",0,1),r.rc("ngSubmit",(function(){r.Mc(e);const t=r.Ic(1);return c.updateTeacher(t.value)})),r.jc(2,"mat-form-field"),r.jc(3,"mat-label"),r.Wc(4,"Name"),r.ic(),r.jc(5,"input",2),r.rc("ngModelChange",(function(e){return c.teacher.name=e})),r.ic(),r.ic(),r.jc(6,"mat-form-field"),r.jc(7,"mat-label"),r.Wc(8,"Designation"),r.ic(),r.jc(9,"textarea",3),r.rc("ngModelChange",(function(e){return c.teacher.designation=e})),r.ic(),r.ic(),r.jc(10,"mat-form-field"),r.jc(11,"mat-label"),r.Wc(12,"Description"),r.ic(),r.jc(13,"textarea",4),r.rc("ngModelChange",(function(e){return c.teacher.description=e})),r.ic(),r.ic(),r.jc(14,"div",5),r.jc(15,"div",6),r.jc(16,"input",7),r.rc("change",(function(e){return c.setSelectedImage(e)})),r.ic(),r.ic(),r.jc(17,"div",6),r.jc(18,"button",8),r.Wc(19,"Submit"),r.ic(),r.ic(),r.ic(),r.ic()}2&e&&(r.Pb(5),r.Bc("ngModel",c.teacher.name),r.Pb(4),r.Bc("ngModel",c.teacher.designation),r.Pb(4),r.Bc("ngModel",c.teacher.description))},directives:[g.v,g.l,g.m,u.b,u.e,p.a,g.b,g.k,g.n,f.b],styles:[""]}),e})();function v(e,c){if(1&e){const e=r.kc();r.jc(0,"tr"),r.jc(1,"td"),r.ec(2,"img",23),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.jc(7,"td"),r.Wc(8),r.ic(),r.jc(9,"td"),r.jc(10,"button",24),r.rc("click",(function(){r.Mc(e);const t=c.$implicit;return r.vc().setActiveTeacher(t)})),r.jc(11,"mat-icon"),r.Wc(12,"create"),r.ic(),r.ic(),r.Wc(13,"\xa0 "),r.jc(14,"button",25),r.rc("click",(function(){r.Mc(e);const t=c.$implicit;return r.vc().deleteTeacher(t.id)})),r.jc(15,"mat-icon"),r.Wc(16,"delete"),r.ic(),r.ic(),r.ic(),r.ic()}if(2&e){const e=c.$implicit,t=r.vc();r.Pb(2),r.Bc("src",t.WEBSITE_URL+"uploads/teachers/"+e.image,r.Pc),r.Pb(2),r.Xc(e.name),r.Pb(2),r.Xc(e.designation),r.Pb(2),r.Xc(e.description)}}function T(e,c){if(1&e&&r.ec(0,"edit-teacher",26),2&e){const e=r.vc();r.Bc("teacher",e.activeTeacher)("modal",e.modal)}}const w=function(){return{width:"60%"}},W=[{path:"",component:(()=>{class e{constructor(e,c){this.cms=e,this.dialog=c,this.WEBSITE_URL=o.a.WEBSITE_URL,this.teachers=[],this.modal={editTeacherModal:!1}}ngOnInit(){this.getTeachers(),this.getCMSStatus()}getCMSStatus(){this.cms.getCMSStatus("teachers").subscribe(e=>{this.showTeacher=e.status})}getTeachers(){this.cms.getActiveTeachers().subscribe(e=>{this.teachers=e})}setActiveTeacher(e){this.activeTeacher=e,this.modal.editTeacherModal=!0}setSelectedImage(e){this.selectedImage=e.target.files[0]}uploadTeacher(e){let c=new FormData;c.append("image",this.selectedImage);for(let t in e)c.append(t,e[t]);this.cms.uploadTeacher(c).subscribe(e=>{e.success&&this.teachers.unshift(e.teacher),this.dialog.showDialog({content:e.message})})}deleteTeacher(e){this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this Teacher?",callBack:()=>{this.cms.deleteTeacher(e).subscribe(c=>{c.success&&this.teachers.splice(this.teachers.indexOf(this.teachers.find(c=>c.id==e)),1)})}})}changeStatus(){this.cms.changeCMSStatus("teachers",this.showTeacher).subscribe(()=>{})}}return e.\u0275fac=function(c){return new(c||e)(r.dc(s.a),r.dc(d.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["upload-teachers"]],decls:51,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name","ngModel",""],["matInput","","name","designation","ngModel",""],["matInput","","name","description","ngModel",""],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"teacher","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"teacher","modal"]],template:function(e,c){if(1&e){const e=r.kc();r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.Wc(4,"Upload Teacher "),r.jc(5,"mat-slide-toggle",2),r.rc("ngModelChange",(function(e){return c.showTeacher=e}))("change",(function(){return c.changeStatus()})),r.ic(),r.ic(),r.jc(6,"div",3),r.jc(7,"form",4,5),r.rc("ngSubmit",(function(){r.Mc(e);const t=r.Ic(8);return c.uploadTeacher(t.value)})),r.jc(9,"mat-form-field"),r.jc(10,"mat-label"),r.Wc(11,"Name"),r.ic(),r.ec(12,"input",6),r.ic(),r.jc(13,"mat-form-field"),r.jc(14,"mat-label"),r.Wc(15,"Designation"),r.ic(),r.ec(16,"textarea",7),r.ic(),r.jc(17,"mat-form-field"),r.jc(18,"mat-label"),r.Wc(19,"Description"),r.ic(),r.ec(20,"textarea",8),r.ic(),r.jc(21,"div",9),r.jc(22,"div",10),r.jc(23,"input",11),r.rc("change",(function(e){return c.setSelectedImage(e)})),r.ic(),r.ic(),r.jc(24,"div",10),r.jc(25,"button",12),r.Wc(26,"Submit"),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(27,"div",13),r.jc(28,"div",14),r.Wc(29,"Active Teachers"),r.ic(),r.jc(30,"table",15),r.jc(31,"tr"),r.jc(32,"th"),r.Wc(33,"Image"),r.ic(),r.jc(34,"th"),r.Wc(35,"Name"),r.ic(),r.jc(36,"th"),r.Wc(37,"Designation"),r.ic(),r.jc(38,"th"),r.Wc(39,"Description"),r.ic(),r.jc(40,"th"),r.Wc(41,"Action"),r.ic(),r.ic(),r.Vc(42,v,17,4,"tr",16),r.ic(),r.ic(),r.jc(43,"div",17),r.jc(44,"div",18),r.jc(45,"div",19),r.Wc(46,"Edit Teacher"),r.ic(),r.jc(47,"div",20),r.rc("click",(function(){return c.modal.editTeacherModal=!1})),r.Wc(48,"\xd7"),r.ic(),r.jc(49,"div",21),r.Vc(50,T,1,2,"edit-teacher",22),r.ic(),r.ic(),r.ic()}2&e&&(r.Pb(5),r.Bc("ngModel",c.showTeacher),r.Pb(37),r.Bc("ngForOf",c.teachers),r.Pb(1),r.Bc("show",c.modal.editTeacherModal)("options",r.Cc(5,w)),r.Pb(7),r.Bc("ngIf",c.modal.editTeacherModal))},directives:[l.a,h.a,m.a,g.k,g.n,g.v,g.l,g.m,u.b,u.e,p.a,g.b,f.b,i.j,b.a,i.k,j.a,M],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=r.bc({type:e}),e.\u0275inj=r.ac({factory:function(c){return new(c||e)},imports:[[i.c,a.a,n.f.forChild(W)]]}),e})()}}]);