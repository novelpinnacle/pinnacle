(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{ffbh:function(c,i,e){"use strict";e.r(i),e.d(i,"SlideshowModule",(function(){return k}));var t=e("ofXK"),n=e("tyNb"),o=e("n+G7"),s=e("SP9e"),l=e("fXoL"),d=e("FM/7"),a=e("QeEr"),m=e("aCk2"),h=e("G0I0"),r=e("1jcm"),u=e("3Pt+"),g=e("kmnG"),b=e("qFsG"),w=e("bTqV"),p=e("ZMsq"),j=e("NFeN");let f=(()=>{class c{constructor(c,i){this.cms=c,this.dialog=i}ngOnInit(){}setSelectedImage(c){this.selectedImage=c.target.files[0]}updateSlideshow(c){let i=new FormData;i.append("image",this.selectedImage),i.append("id",this.slideshow.id+"");for(let e in c)i.append(e,c[e]);this.cms.updateSlideshow(i).subscribe(c=>{c.success&&(this.modal.editSlideshowModal=!1),this.dialog.showDialog({content:c.message})})}}return c.\u0275fac=function(i){return new(i||c)(l.dc(d.a),l.dc(a.a))},c.\u0275cmp=l.Xb({type:c,selectors:[["edit-slideshow"]],inputs:{modal:"modal",slideshow:"slideshow"},decls:38,vars:6,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title",3,"ngModel","ngModelChange"],["matInput","","name","description",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-6"],["matInput","","name","b1name",3,"ngModel","ngModelChange"],["matInput","","name","b1link",3,"ngModel","ngModelChange"],["matInput","","name","b2name",3,"ngModel","ngModelChange"],["matInput","","name","b2link",3,"ngModel","ngModelChange"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(c,i){if(1&c){const c=l.kc();l.jc(0,"form",0,1),l.rc("ngSubmit",(function(){l.Mc(c);const e=l.Ic(1);return i.updateSlideshow(e.value)})),l.jc(2,"mat-form-field"),l.jc(3,"mat-label"),l.Wc(4,"Slideshow Title"),l.ic(),l.jc(5,"input",2),l.rc("ngModelChange",(function(c){return i.slideshow.title=c})),l.ic(),l.ic(),l.jc(6,"mat-form-field"),l.jc(7,"mat-label"),l.Wc(8,"Slideshow Description"),l.ic(),l.jc(9,"textarea",3),l.rc("ngModelChange",(function(c){return i.slideshow.description=c})),l.ic(),l.ic(),l.jc(10,"div",4),l.jc(11,"div",5),l.jc(12,"mat-form-field"),l.jc(13,"mat-label"),l.Wc(14,"1st Button Name"),l.ic(),l.jc(15,"input",6),l.rc("ngModelChange",(function(c){return i.slideshow.b1name=c})),l.ic(),l.ic(),l.ic(),l.jc(16,"div",5),l.jc(17,"mat-form-field"),l.jc(18,"mat-label"),l.Wc(19,"1st Button Link"),l.ic(),l.jc(20,"input",7),l.rc("ngModelChange",(function(c){return i.slideshow.b1link=c})),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(21,"div",4),l.jc(22,"div",5),l.jc(23,"mat-form-field"),l.jc(24,"mat-label"),l.Wc(25,"2nd Button Name"),l.ic(),l.jc(26,"input",8),l.rc("ngModelChange",(function(c){return i.slideshow.b2name=c})),l.ic(),l.ic(),l.ic(),l.jc(27,"div",5),l.jc(28,"mat-form-field"),l.jc(29,"mat-label"),l.Wc(30,"2nd Button Link"),l.ic(),l.jc(31,"input",9),l.rc("ngModelChange",(function(c){return i.slideshow.b2link=c})),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(32,"div",4),l.jc(33,"div",10),l.jc(34,"input",11),l.rc("change",(function(c){return i.setSelectedImage(c)})),l.ic(),l.ic(),l.jc(35,"div",10),l.jc(36,"button",12),l.Wc(37,"Submit"),l.ic(),l.ic(),l.ic(),l.ic()}2&c&&(l.Pb(5),l.Bc("ngModel",i.slideshow.title),l.Pb(4),l.Bc("ngModel",i.slideshow.description),l.Pb(6),l.Bc("ngModel",i.slideshow.b1name),l.Pb(5),l.Bc("ngModel",i.slideshow.b1link),l.Pb(6),l.Bc("ngModel",i.slideshow.b2name),l.Pb(5),l.Bc("ngModel",i.slideshow.b2link))},directives:[u.v,u.l,u.m,g.b,g.e,b.a,u.b,u.k,u.n,w.b],styles:["[class*=col-6][_ngcontent-%COMP%]{padding:0 5px}"]}),c})();function S(c,i){if(1&c){const c=l.kc();l.jc(0,"tr"),l.jc(1,"td"),l.ec(2,"img",27),l.ic(),l.jc(3,"td"),l.Wc(4),l.ic(),l.jc(5,"td"),l.Wc(6),l.ic(),l.jc(7,"td"),l.Wc(8),l.ic(),l.jc(9,"td"),l.Wc(10),l.ic(),l.jc(11,"td"),l.Wc(12),l.ic(),l.jc(13,"td"),l.Wc(14),l.ic(),l.jc(15,"td"),l.jc(16,"button",28),l.rc("click",(function(){l.Mc(c);const e=i.$implicit;return l.vc().setActiveSlideshow(e)})),l.jc(17,"mat-icon"),l.Wc(18,"create"),l.ic(),l.ic(),l.Wc(19,"\xa0 "),l.jc(20,"button",29),l.rc("click",(function(){l.Mc(c);const e=i.$implicit;return l.vc().deleteSlideshow(e.id)})),l.jc(21,"mat-icon"),l.Wc(22,"delete"),l.ic(),l.ic(),l.ic(),l.ic()}if(2&c){const c=i.$implicit,e=l.vc();l.Pb(2),l.Bc("src",e.WEBSITE_URL+"uploads/slideshow/"+c.image,l.Pc),l.Pb(2),l.Xc(c.title),l.Pb(2),l.Xc(c.description),l.Pb(2),l.Xc(c.b1name),l.Pb(2),l.Xc(c.b1link),l.Pb(2),l.Xc(c.b2name),l.Pb(2),l.Xc(c.b2link)}}function M(c,i){if(1&c&&l.ec(0,"edit-slideshow",30),2&c){const c=l.vc();l.Bc("slideshow",c.activeSlideshow)("modal",c.modal)}}const v=function(){return{width:"60%"}},W=[{path:"",component:(()=>{class c{constructor(c,i){this.cms=c,this.dialog=i,this.WEBSITE_URL=s.a.WEBSITE_URL,this.slideshows=[],this.modal={editSlideshowModal:!1}}ngOnInit(){this.getSlideshow(),this.getCMSStatus()}getCMSStatus(){this.cms.getCMSStatus("slideshow").subscribe(c=>{this.showSlideshow=c.status})}getSlideshow(){this.cms.getActiveSlideshow().subscribe(c=>{this.slideshows=c})}setActiveSlideshow(c){this.activeSlideshow=c,this.modal.editSlideshowModal=!0}setSelectedImage(c){this.selectedImage=c.target.files[0]}uploadSlideshow(c){let i=new FormData;i.append("image",this.selectedImage);for(let e in c)i.append(e,c[e]);this.cms.uploadSlideshow(i).subscribe(c=>{c.success&&this.slideshows.unshift(c.slideshow),this.dialog.showDialog({content:c.message})})}deleteSlideshow(c){this.dialog.showDialog({content:"Are you sure to delete this slideshow?",callBack:()=>{this.cms.deleteSlideshow(c).subscribe(i=>{i.success&&this.slideshows.splice(this.slideshows.indexOf(this.slideshows.find(i=>i.id==c)),1)})}})}changeStatus(){this.cms.changeCMSStatus("slideshow",this.showSlideshow).subscribe(()=>{})}}return c.\u0275fac=function(i){return new(i||c)(l.dc(d.a),l.dc(a.a))},c.\u0275cmp=l.Xb({type:c,selectors:[["app-upload-slideshow"]],decls:75,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title","ngModel",""],["matInput","","name","description","ngModel",""],[1,"row"],[1,"col-6"],["matInput","","name","b1name","ngModel",""],["matInput","","name","b1link","ngModel",""],["matInput","","name","b2name","ngModel",""],["matInput","","name","b2link","ngModel",""],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"slideshow","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"slideshow","modal"]],template:function(c,i){if(1&c){const c=l.kc();l.ec(0,"admin-header"),l.ec(1,"admin-sidebar"),l.jc(2,"div",0),l.jc(3,"div",1),l.Wc(4,"Upload Slideshow "),l.jc(5,"mat-slide-toggle",2),l.rc("ngModelChange",(function(c){return i.showSlideshow=c}))("change",(function(){return i.changeStatus()})),l.ic(),l.ic(),l.jc(6,"div",3),l.jc(7,"form",4,5),l.rc("ngSubmit",(function(){l.Mc(c);const e=l.Ic(8);return i.uploadSlideshow(e.value)})),l.jc(9,"mat-form-field"),l.jc(10,"mat-label"),l.Wc(11,"Slideshow Title"),l.ic(),l.ec(12,"input",6),l.ic(),l.jc(13,"mat-form-field"),l.jc(14,"mat-label"),l.Wc(15,"Slideshow Description"),l.ic(),l.ec(16,"textarea",7),l.ic(),l.jc(17,"div",8),l.jc(18,"div",9),l.jc(19,"mat-form-field"),l.jc(20,"mat-label"),l.Wc(21,"1st Button Name"),l.ic(),l.ec(22,"input",10),l.ic(),l.ic(),l.jc(23,"div",9),l.jc(24,"mat-form-field"),l.jc(25,"mat-label"),l.Wc(26,"1st Button Link"),l.ic(),l.ec(27,"input",11),l.ic(),l.ic(),l.ic(),l.jc(28,"div",8),l.jc(29,"div",9),l.jc(30,"mat-form-field"),l.jc(31,"mat-label"),l.Wc(32,"2nd Button Name"),l.ic(),l.ec(33,"input",12),l.ic(),l.ic(),l.jc(34,"div",9),l.jc(35,"mat-form-field"),l.jc(36,"mat-label"),l.Wc(37,"2nd Button Link"),l.ic(),l.ec(38,"input",13),l.ic(),l.ic(),l.ic(),l.jc(39,"div",8),l.jc(40,"div",14),l.jc(41,"input",15),l.rc("change",(function(c){return i.setSelectedImage(c)})),l.ic(),l.ic(),l.jc(42,"div",14),l.jc(43,"button",16),l.Wc(44,"Submit"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ec(45,"div",17),l.jc(46,"div",18),l.Wc(47,"Active Slideshows"),l.ic(),l.jc(48,"table",19),l.jc(49,"tr"),l.jc(50,"th"),l.Wc(51,"Image"),l.ic(),l.jc(52,"th"),l.Wc(53,"Title"),l.ic(),l.jc(54,"th"),l.Wc(55,"Description"),l.ic(),l.jc(56,"th"),l.Wc(57,"B1 Name"),l.ic(),l.jc(58,"th"),l.Wc(59,"B1 Link"),l.ic(),l.jc(60,"th"),l.Wc(61,"B2 Name"),l.ic(),l.jc(62,"th"),l.Wc(63,"B2 Link"),l.ic(),l.jc(64,"th"),l.Wc(65,"Action"),l.ic(),l.ic(),l.Vc(66,S,23,7,"tr",20),l.ic(),l.ic(),l.jc(67,"div",21),l.jc(68,"div",22),l.jc(69,"div",23),l.Wc(70,"Edit Slideshow"),l.ic(),l.jc(71,"div",24),l.rc("click",(function(){return i.modal.editSlideshowModal=!1})),l.Wc(72,"\xd7"),l.ic(),l.jc(73,"div",25),l.Vc(74,M,1,2,"edit-slideshow",26),l.ic(),l.ic(),l.ic()}2&c&&(l.Pb(5),l.Bc("ngModel",i.showSlideshow),l.Pb(61),l.Bc("ngForOf",i.slideshows),l.Pb(1),l.Bc("show",i.modal.editSlideshowModal)("options",l.Cc(5,v)),l.Pb(7),l.Bc("ngIf",i.modal.editSlideshowModal))},directives:[m.a,h.a,r.a,u.k,u.n,u.v,u.l,u.m,g.b,g.e,b.a,u.b,w.b,t.j,p.a,t.k,j.a,f],styles:["[class*=col-6][_ngcontent-%COMP%]{padding:0 5px}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),c})()}];let k=(()=>{class c{}return c.\u0275mod=l.bc({type:c}),c.\u0275inj=l.ac({factory:function(i){return new(i||c)},imports:[[t.c,o.a,n.f.forChild(W)]]}),c})()}}]);