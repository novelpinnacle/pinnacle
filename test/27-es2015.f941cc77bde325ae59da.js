(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"8ac8":function(e,i,o){"use strict";o.r(i),o.d(i,"DefaultPermissionsModule",(function(){return I}));var c=o("ofXK"),n=o("tyNb"),s=o("n+G7"),t=o("SP9e"),r=o("fXoL"),l=o("4KEQ"),a=o("aCk2"),d=o("G0I0"),m=o("3Pt+"),p=o("bTqV"),g=o("ZMsq"),u=o("kmnG"),f=o("qFsG");let h=(()=>{class e{constructor(e){this.coreService=e}ngOnInit(){}submit(){this.coreService.postRequest(t.a.API_URL+"permissions/new-role",{roleName:this.roleName}).subscribe(e=>{this.roles.push(e.role),this.modal.addRole=!1})}}return e.\u0275fac=function(i){return new(i||e)(r.dc(l.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["add-role"]],inputs:{modal:"modal",roles:"roles"},decls:6,vars:2,consts:[["matInput","","placeholder","For eg. Manager,Coordinator etc","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){1&e&&(r.jc(0,"mat-form-field"),r.jc(1,"mat-label"),r.Wc(2,"Enter Role Name"),r.ic(),r.jc(3,"input",0),r.rc("ngModelChange",(function(e){return i.roleName=e})),r.ic(),r.ic(),r.jc(4,"button",1),r.rc("click",(function(){return i.submit()})),r.Wc(5,"Submit"),r.ic()),2&e&&(r.Pb(3),r.Bc("ngModel",i.roleName),r.Pb(1),r.Bc("disabled",!i.roleName))},directives:[u.b,u.e,f.a,m.b,m.r,m.k,m.n,p.b],styles:[""]}),e})();var b=o("V/o5"),v=o("bSwM"),P=o("CGWC");function M(e,i){if(1&e&&(r.jc(0,"option",17),r.Wc(1),r.ic()),2&e){const e=i.$implicit;r.Bc("value",e.roleId),r.Pb(1),r.Xc(e.roleName)}}function w(e,i){if(1&e){const e=r.kc();r.jc(0,"div",23),r.jc(1,"mat-checkbox",24),r.rc("ngModelChange",(function(o){r.Mc(e);const c=i.$implicit;return r.vc().$implicit.permissions[c]=o})),r.Wc(2),r.ic(),r.ic()}if(2&e){const e=i.$implicit,o=r.vc().$implicit,c=r.vc();r.Pb(1),r.Bc("ngModel",o.permissions[e]),r.Pb(1),r.Yc(" ",c.renameKeys(e)," ")}}function j(e,i){if(1&e){const e=r.kc();r.jc(0,"div",18),r.ec(1,"div",19),r.wc(2,"safe"),r.jc(3,"mat-checkbox",20),r.rc("change",(function(o){r.Mc(e);const c=i.$implicit;return r.vc().toggleAll(c,o)})),r.ic(),r.jc(4,"div",21),r.Vc(5,w,3,2,"div",22),r.ic(),r.ic()}if(2&e){const e=i.$implicit,o=r.vc();r.Pb(1),r.Bc("innerHTML",r.xc(2,2,e.permissionsTitle),r.Nc),r.Pb(4),r.Bc("ngForOf",o.getKeys(e.permissions))}}function k(e,i){1&e&&(r.jc(0,"div",25),r.Wc(1,"Please choose role"),r.ic())}const x=function(){return{width:"400px"}},C=[{path:"",component:(()=>{class e{constructor(e){this.coreService=e,this.loading=!0,this.roles=[],this.roleId="",this.permissions=[],this.modals={addRole:!1}}ngOnInit(){this.coreService.getRequest(t.a.API_URL+"permissions/default-role-permissions").subscribe(e=>{this.roles=e,this.loading=!1})}getKeys(e){return Object.keys(e)}renameKeys(e){return e.split("_").join(" ")}toggleAll(e,i){for(let o in e.permissions)e.permissions[o]=+i.checked}loadPermissions(){this.permissions=[];let e=this.roles.find(e=>e.roleId==this.roleId);e&&(this.permissions=e.permissions),"-1"==this.roleId&&(this.modals.addRole=!0)}updatePermissions(){this.loading=!0,this.coreService.putRequest(t.a.API_URL+"permissions/default-permissions-all",{permissions:this.permissions,roleId:this.roleId}).subscribe(e=>{this.loading=!1})}}return e.\u0275fac=function(i){return new(i||e)(r.dc(l.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["default-permissions-home"]],decls:24,vars:12,consts:[["id","page-content"],[1,"row","filter-row"],[1,"select",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","add-role",3,"value"],["mat-raised-button","",3,"disabled","click"],["id","permissions-wrapper"],["class","permission-item",4,"ngFor","ngForOf"],["class","no-data perfect-centered",4,"ngIf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"modal","roles"],[3,"show"],[3,"value"],[1,"permission-item"],[1,"permission-title",3,"innerHTML"],[1,"toggle-checkbox",3,"change"],[1,"row"],["class","col-sm-2",4,"ngFor","ngForOf"],[1,"col-sm-2"],[3,"ngModel","ngModelChange"],[1,"no-data","perfect-centered"]],template:function(e,i){1&e&&(r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.jc(4,"select",2),r.rc("ngModelChange",(function(e){return i.roleId=e}))("change",(function(){return i.loadPermissions()})),r.jc(5,"option",3),r.Wc(6,"Select Role"),r.ic(),r.Vc(7,M,2,2,"option",4),r.jc(8,"option",5),r.Wc(9,"Add Role"),r.ic(),r.ic(),r.jc(10,"button",6),r.rc("click",(function(){return i.updatePermissions()})),r.Wc(11,"Update"),r.ic(),r.ic(),r.jc(12,"div",7),r.Vc(13,j,6,4,"div",8),r.ic(),r.Vc(14,k,2,0,"div",9),r.ic(),r.jc(15,"div",10),r.jc(16,"div",11),r.jc(17,"div",12),r.Wc(18,"Add Role"),r.ic(),r.jc(19,"div",13),r.rc("click",(function(){return i.modals.addRole=!1})),r.Wc(20,"\xd7"),r.ic(),r.jc(21,"div",14),r.ec(22,"add-role",15),r.ic(),r.ic(),r.ic(),r.ec(23,"loading",16)),2&e&&(r.Pb(4),r.Bc("ngModel",i.roleId),r.Pb(3),r.Bc("ngForOf",i.roles),r.Pb(1),r.Bc("value",-1),r.Pb(2),r.Bc("disabled",!i.roleId||"-1"==i.roleId),r.Pb(3),r.Bc("ngForOf",i.permissions),r.Pb(1),r.Bc("ngIf",!i.permissions.length),r.Pb(1),r.Bc("show",i.modals.addRole)("options",r.Cc(11,x)),r.Pb(7),r.Bc("modal",i.modals)("roles",i.roles),r.Pb(1),r.Bc("show",i.loading))},directives:[a.a,d.a,m.s,m.k,m.n,m.o,m.u,c.j,p.b,c.k,g.a,h,b.a,v.a],pipes:[P.a],styles:[".filter-row[_ngcontent-%COMP%]{padding-bottom:15px}.filter-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:180px;margin-right:10px}#add-role[_ngcontent-%COMP%]{font-style:italic;font-weight:700}#permissions-wrapper[_ngcontent-%COMP%]{background-color:#fff;max-height:74vh;overflow-y:auto;padding:15px}.permission-item[_ngcontent-%COMP%]{padding:8px 15px;box-shadow:0 0 2px -1px rgba(0,0,0,.25);margin:15px 0;background:#fcfcfc}.permission-item[_ngcontent-%COMP%]:first-child{margin-top:0}.permission-title[_ngcontent-%COMP%]{display:inline-block;font-size:15px;font-weight:500;color:#555;margin-bottom:5px}mat-checkbox[_ngcontent-%COMP%]{margin-top:5px;display:block;text-transform:capitalize}.toggle-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-left:10px}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=r.bc({type:e}),e.\u0275inj=r.ac({factory:function(i){return new(i||e)},imports:[[c.c,s.a,n.f.forChild(C)]]}),e})()}}]);