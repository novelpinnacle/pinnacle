(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{PIzo:function(c,t,e){"use strict";e.r(t),e.d(t,"NoticeboardModule",(function(){return G}));var i=e("ofXK"),o=e("tyNb"),n=e("n+G7"),a=e("mrSG"),s=e("0EQZ"),r=e("SP9e"),d=e("byUP"),h=e("fXoL"),l=e("4KEQ"),b=e("QeEr"),u=e("FnMX"),g=e("aCk2"),f=e("G0I0"),m=e("V/o5"),p=e("bTqV"),v=e("NFeN"),B=e("bSwM"),I=e("CGWC");function j(c,t){1&c&&(h.jc(0,"button",7),h.jc(1,"mat-icon"),h.Wc(2,"add"),h.ic(),h.Wc(3," Add "),h.ic()),2&c&&h.Bc("routerLink","/users/manage-noticeboard/add-noticeboard")}function k(c,t){if(1&c){const c=h.kc();h.jc(0,"button",8),h.rc("click",(function(){return h.Mc(c),h.vc().showDeleteMultiple()})),h.jc(1,"mat-icon"),h.Wc(2,"delete"),h.ic(),h.Wc(3," Delete "),h.ic()}if(2&c){const c=h.vc();h.Bc("disabled",0==c.selection.selected.length)}}function P(c,t){if(1&c){const c=h.kc();h.jc(0,"th"),h.jc(1,"mat-checkbox",13),h.rc("change",(function(t){h.Mc(c);const e=h.vc(2);return t?e.masterToggle():null})),h.ic(),h.ic()}if(2&c){const c=h.vc(2);h.Pb(1),h.Bc("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())}}function M(c,t){1&c&&(h.jc(0,"th"),h.Wc(1,"Action"),h.ic())}function w(c,t){if(1&c){const c=h.kc();h.jc(0,"td"),h.jc(1,"mat-checkbox",18),h.rc("click",(function(t){return h.Mc(c),t.stopPropagation()}))("change",(function(t){h.Mc(c);const e=h.vc().$implicit,i=h.vc(2);return t?i.selection.toggle(e):null})),h.ic(),h.ic()}if(2&c){const c=h.vc().$implicit,t=h.vc(2);h.Pb(1),h.Bc("checked",t.selection.isSelected(c))}}function C(c,t){if(1&c&&(h.jc(0,"button",22),h.jc(1,"mat-icon"),h.Wc(2,"create"),h.ic(),h.ic()),2&c){const c=h.vc(2).$implicit;h.Bc("routerLink","/users/manage-noticeboard/edit-noticeboard/"+c.noticeboardId)}}function x(c,t){if(1&c){const c=h.kc();h.jc(0,"button",23),h.rc("click",(function(){h.Mc(c);const t=h.vc(2),e=t.$implicit,i=t.index;return h.vc(2).showDelete(e.noticeboardId,i)})),h.jc(1,"mat-icon"),h.Wc(2,"delete"),h.ic(),h.ic()}}function _(c,t){if(1&c&&(h.jc(0,"td",19),h.Vc(1,C,3,1,"button",20),h.Wc(2,"\xa0 "),h.Vc(3,x,3,0,"button",21),h.ic()),2&c){const c=h.vc(3);h.Pb(1),h.Bc("ngIf",c.permissions.edit_noticeboard),h.Pb(2),h.Bc("ngIf",c.permissions.delete_noticeboard)}}function O(c,t){if(1&c&&(h.jc(0,"tr"),h.Vc(1,w,2,1,"td",11),h.ec(2,"td",14),h.wc(3,"safe"),h.ec(4,"td",15),h.wc(5,"safe"),h.jc(6,"td",16),h.Wc(7),h.ic(),h.Vc(8,_,4,2,"td",17),h.ic()),2&c){const c=t.$implicit,e=h.vc(2);h.Pb(1),h.Bc("ngIf",e.permissions.delete_noticeboard),h.Pb(1),h.Bc("innerHTML",h.xc(3,5,c.noticeboardContent),h.Nc),h.Pb(2),h.Bc("innerHTML",h.xc(5,7,c.batches),h.Nc),h.Pb(3),h.Xc(c.date),h.Pb(1),h.Bc("ngIf",e.permissions.edit_noticeboard||e.permissions.delete_noticeboard)}}function S(c,t){if(1&c&&(h.jc(0,"div",9),h.jc(1,"table",10),h.jc(2,"tr"),h.Vc(3,P,2,2,"th",11),h.jc(4,"th"),h.Wc(5,"Noticeboard"),h.ic(),h.jc(6,"th"),h.Wc(7,"Batches"),h.ic(),h.jc(8,"th"),h.Wc(9,"Date"),h.ic(),h.Vc(10,M,2,0,"th",11),h.ic(),h.Vc(11,O,9,9,"tr",12),h.ic(),h.ic()),2&c){const c=h.vc();h.Pb(3),h.Bc("ngIf",c.permissions.delete_noticeboard),h.Pb(7),h.Bc("ngIf",c.permissions.edit_noticeboard||c.permissions.delete_noticeboard),h.Pb(1),h.Bc("ngForOf",c.noticeboards)}}function A(c,t){1&c&&(h.jc(0,"div",24),h.Wc(1,"No Noticeboards Uploaded "),h.ic())}let W=(()=>{class c{constructor(c,t,e){this.coreService=c,this.dialog=t,this.usersService=e,this.loading=!0,this.selection=new s.c(!0,[]),this.noticeboards=[],this.permissions=d.a}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.coreService.getRequest(r.a.API_URL+"noticeboard").subscribe(c=>{this.noticeboards=c,this.loading=!1}),this.permissions=yield this.usersService.getUserPermissions()}))}isAllSelected(){return this.selection.selected.length==this.noticeboards.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.noticeboards.forEach(c=>this.selection.select(c))}showDeleteMultiple(){this.dialog.showDialog({content:"Are you sure to delete these noticeboards?",title:"Confirm Deletion",callBack:()=>{this.deleteMultipleNoticeboard()}})}deleteMultipleNoticeboard(){let c=[];this.selection.selected.forEach(t=>c.push(t.noticeboardId)),this.coreService.deleteRequest(r.a.API_URL+"noticeboard/multiple/"+c).subscribe(t=>{if(t.success){let t=[...this.noticeboards.filter(t=>!c.includes(t.noticeboardId))];this.noticeboards=t,this.selection.clear()}})}showDelete(c,t){this.dialog.showDialog({content:"Are you sure to delete this noticeboard?",title:"Confirm Deletion",callBack:()=>{this.deleteNoticeboard(c,t)}})}deleteNoticeboard(c,t){this.coreService.deleteRequest(r.a.API_URL+"noticeboard/"+c).subscribe(c=>{c.success&&this.noticeboards.splice(t,1)})}}return c.\u0275fac=function(t){return new(t||c)(h.dc(l.a),h.dc(b.a),h.dc(u.a))},c.\u0275cmp=h.Xb({type:c,selectors:[["app-noticeboard-home"]],decls:9,vars:5,consts:[["id","page-content"],[1,"row","justify-content-end","noticeboard-action"],["mat-raised-button","",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["class","pinnacle-table-wrapper",4,"ngIf"],["class","no-data perfect-centered",4,"ngIf"],[3,"show"],["mat-raised-button","",3,"routerLink"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"pinnacle-table-wrapper"],[1,"pinnacle-table","noticeboards"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"checked","indeterminate","change"],[1,"noticeboard-column",3,"innerHTML"],[3,"innerHTML"],[1,"date-column"],["class","noticeboard-action-column",4,"ngIf"],[3,"checked","click","change"],[1,"noticeboard-action-column"],["mat-mini-fab","","color","primary",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink"],["mat-mini-fab","","color","warn",3,"click"],[1,"no-data","perfect-centered"]],template:function(c,t){1&c&&(h.ec(0,"admin-header"),h.ec(1,"admin-sidebar"),h.jc(2,"div",0),h.jc(3,"div",1),h.Vc(4,j,4,1,"button",2),h.Vc(5,k,4,1,"button",3),h.ic(),h.Vc(6,S,12,3,"div",4),h.Vc(7,A,2,0,"div",5),h.ic(),h.ec(8,"loading",6)),2&c&&(h.Pb(4),h.Bc("ngIf",t.permissions.new_noticeboard),h.Pb(1),h.Bc("ngIf",t.permissions.delete_noticeboard),h.Pb(1),h.Bc("ngIf",t.noticeboards&&t.noticeboards.length>0),h.Pb(1),h.Bc("ngIf",!t.noticeboards||0==t.noticeboards.length),h.Pb(1),h.Bc("show",t.loading))},directives:[g.a,f.a,i.k,m.a,p.b,o.c,v.a,i.j,B.a],pipes:[I.a],styles:[".row.noticeboard-action{padding-bottom:15px}.row.noticeboard-action>button{margin-left:10px}.date-column{font-size:12px;min-width:160px}.pinnacle-table.noticeboards th{padding:15px}.noticeboard_batches{display:inline-block;font-size:10px;margin-bottom:10px;margin-right:10px;padding:1px 5px;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.25)}.noticeboard_batches:last-child{margin-bottom:0}.noticeboard-column{font-size:12px}.noticeboard-action-column{min-width:120px}"],encapsulation:2}),c})();var V=e("eIsa"),y=e("3Pt+"),L=e("kmnG"),F=e("d3UM"),N=e("FKr1");function R(c,t){if(1&c&&(h.jc(0,"mat-option",16),h.Wc(1),h.ic()),2&c){const c=t.$implicit,e=h.vc(2);h.Bc("value",c.batchId)("disabled",e.choosedBatches.includes(c.batchId)),h.Pb(1),h.Yc(" ",c.course+" - "+c.batch," ")}}function D(c,t){if(1&c){const c=h.kc();h.jc(0,"button",17),h.rc("click",(function(){h.Mc(c);const t=h.vc().index;return h.vc().removeItem(t)})),h.jc(1,"mat-icon"),h.Wc(2,"delete"),h.ic(),h.ic()}}function U(c,t){if(1&c){const c=h.kc();h.jc(0,"button",18),h.rc("click",(function(){return h.Mc(c),h.vc(2).addAllBatches()})),h.Wc(1," Add All Batches "),h.ic()}}function $(c,t){if(1&c){const c=h.kc();h.jc(0,"div",8),h.jc(1,"div",9),h.jc(2,"mat-form-field"),h.jc(3,"mat-label"),h.Wc(4,"Select Batch"),h.ic(),h.jc(5,"mat-select",10),h.rc("ngModelChange",(function(e){return h.Mc(c),t.$implicit.batchId=e}))("selectionChange",(function(){return h.Mc(c),h.vc().onSelection()})),h.Vc(6,R,2,3,"mat-option",11),h.ic(),h.ic(),h.ic(),h.jc(7,"div",12),h.jc(8,"button",13),h.rc("click",(function(){return h.Mc(c),h.vc().addMore()})),h.jc(9,"mat-icon"),h.Wc(10,"add"),h.ic(),h.ic(),h.Vc(11,D,3,0,"button",14),h.Vc(12,U,2,0,"button",15),h.ic(),h.ic()}if(2&c){const c=t.$implicit,e=t.index;h.Pb(5),h.Bc("ngModel",c.batchId),h.Pb(1),h.Bc("ngForOf",c.batches),h.Pb(5),h.Bc("ngIf",e>0),h.Pb(1),h.Bc("ngIf",0==e)}}function E(c,t){if(1&c&&(h.jc(0,"mat-option",16),h.Wc(1),h.ic()),2&c){const c=t.$implicit,e=h.vc(2);h.Bc("value",c.batchId)("disabled",e.choosedBatches.includes(c.batchId)),h.Pb(1),h.Yc(" ",c.course+" - "+c.batch," ")}}function q(c,t){if(1&c){const c=h.kc();h.jc(0,"button",17),h.rc("click",(function(){h.Mc(c);const t=h.vc(),e=t.index,i=t.$implicit;return h.vc().removeItem(e,i.batchId)})),h.jc(1,"mat-icon"),h.Wc(2,"delete"),h.ic(),h.ic()}}function T(c,t){if(1&c){const c=h.kc();h.jc(0,"button",18),h.rc("click",(function(){return h.Mc(c),h.vc(2).addAllBatches()})),h.Wc(1," Add All Batches "),h.ic()}}function X(c,t){if(1&c){const c=h.kc();h.jc(0,"div",8),h.jc(1,"div",9),h.jc(2,"mat-form-field"),h.jc(3,"mat-label"),h.Wc(4,"Select Batch"),h.ic(),h.jc(5,"mat-select",10),h.rc("ngModelChange",(function(e){return h.Mc(c),t.$implicit.batchId=e}))("selectionChange",(function(){return h.Mc(c),h.vc().onSelection()})),h.Vc(6,E,2,3,"mat-option",11),h.ic(),h.ic(),h.ic(),h.jc(7,"div",12),h.jc(8,"button",13),h.rc("click",(function(){return h.Mc(c),h.vc().addMore()})),h.jc(9,"mat-icon"),h.Wc(10,"add"),h.ic(),h.ic(),h.Vc(11,q,3,0,"button",14),h.Vc(12,T,2,0,"button",15),h.ic(),h.ic()}if(2&c){const c=t.$implicit,e=t.index;h.Pb(5),h.Bc("ngModel",c.batchId),h.Pb(1),h.Bc("ngForOf",c.batches),h.Pb(5),h.Bc("ngIf",e>0),h.Pb(1),h.Bc("ngIf",0==e)}}const z=[{path:"",component:W},{path:"add-noticeboard",component:(()=>{class c{constructor(c,t){this.coreService=c,this.dialog=t,this.batches=[],this.noticeboardBatches=[],this.choosedBatches=[]}ngOnInit(){this.getAllBatches()}getAllBatches(){this.coreService.getRequest(r.a.API_URL+"courses/batches").subscribe(c=>{this.batches=c,this.noticeboardBatches[0]={batchId:0,batches:c}})}onSelection(){let c=[];this.noticeboardBatches.forEach(t=>{c.push(t.batchId)}),this.choosedBatches=c}addAllBatches(){this.noticeboardBatches=[],this.choosedBatches=[],this.batches.forEach(c=>{this.noticeboardBatches.push({batchId:c.batchId,batches:this.batches}),this.choosedBatches.push(c.batchId)})}addMore(){this.noticeboardBatches.push({batchId:0,batches:this.batches})}removeItem(c){this.noticeboardBatches.splice(c,1),this.choosedBatches.splice(c,1)}save(){const c={batchIds:this.choosedBatches,noticeboardContent:this.noticeboardContent};this.loading=!0,this.coreService.postRequest(r.a.API_URL+"noticeboard",c).subscribe(c=>{this.loading=!1,this.dialog.showDialog({content:c.message})})}}return c.\u0275fac=function(t){return new(t||c)(h.dc(l.a),h.dc(b.a))},c.\u0275cmp=h.Xb({type:c,selectors:[["app-add-noticeboard"]],decls:12,vars:4,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngModel","ngModelChange"],[2,"height","15px"],["class","row batches",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"show"],[1,"row","batches"],[1,"col-sm-3","pr"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["mat-raised-button","",3,"click"]],template:function(c,t){1&c&&(h.ec(0,"admin-header"),h.ec(1,"admin-sidebar"),h.jc(2,"div",0),h.jc(3,"div",1),h.Wc(4,"Noticeboard"),h.ic(),h.jc(5,"div",2),h.jc(6,"ckeditor",3),h.rc("ngModelChange",(function(c){return t.noticeboardContent=c})),h.ic(),h.ec(7,"div",4),h.Vc(8,$,13,4,"div",5),h.jc(9,"button",6),h.rc("click",(function(){return t.save()})),h.Wc(10,"Save"),h.ic(),h.ic(),h.ic(),h.ec(11,"loading",7)),2&c&&(h.Pb(6),h.Bc("ngModel",t.noticeboardContent),h.Pb(2),h.Bc("ngForOf",t.noticeboardBatches),h.Pb(1),h.Bc("disabled",0==t.choosedBatches.length||!t.noticeboardContent),h.Pb(2),h.Bc("show",t.loading))},directives:[g.a,f.a,V.a,y.k,y.n,i.j,p.b,m.a,L.b,L.e,F.a,v.a,i.k,N.h],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".row.batches[_ngcontent-%COMP%]{align-items:center}.row.batches[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}"]}),c})()},{path:"edit-noticeboard/:noticeboardId",component:(()=>{class c{constructor(c,t,e){this.coreService=c,this.dialog=t,this.routes=e,this.loading=!0,this.batches=[],this.noticeboardBatches=[],this.choosedBatches=[]}ngOnInit(){this.getAllBatches()}getNoticeboardData(c){this.coreService.getRequest(r.a.API_URL+"noticeboard/"+c).subscribe(c=>{this.loading=!1,this.noticeboardContent=c.noticeboardContent,this.choosedBatches=JSON.parse(c.batchIds),this.choosedBatches.forEach(c=>{this.noticeboardBatches.push({batchId:c,batches:this.batches})})})}getAllBatches(){this.coreService.getRequest(r.a.API_URL+"courses/batches").subscribe(c=>{this.batches=c,this.routes.params.subscribe(c=>{this.noticeboardId=c.noticeboardId,this.getNoticeboardData(c.noticeboardId)}),this.noticeboardBatches.push({batchId:0,batches:c})})}onSelection(){let c=[];this.noticeboardBatches.forEach(t=>{c.push(t.batchId)}),this.choosedBatches=c}addAllBatches(){this.noticeboardBatches=[],this.choosedBatches=[],this.batches.forEach(c=>{this.noticeboardBatches.push({batchId:c.batchId,batches:this.batches}),this.choosedBatches.push(c.batchId)})}addMore(){this.noticeboardBatches.push({batchId:0,batches:this.batches})}removeItem(c,t){this.noticeboardBatches.splice(c,1),this.choosedBatches.splice(this.choosedBatches.indexOf(t),1)}update(){this.loading=!0,this.coreService.putRequest(r.a.API_URL+"noticeboard",{noticeboardId:this.noticeboardId,noticeboardContent:this.noticeboardContent,batchIds:this.choosedBatches}).subscribe(c=>{this.dialog.showDialog({content:c.message}),this.loading=!1})}}return c.\u0275fac=function(t){return new(t||c)(h.dc(l.a),h.dc(b.a),h.dc(o.a))},c.\u0275cmp=h.Xb({type:c,selectors:[["app-edit-noticeboard"]],decls:12,vars:4,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngModel","ngModelChange"],[2,"height","15px"],["class","row batches",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"show"],[1,"row","batches"],[1,"col-sm-3","pr"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-sm-3","pl"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],[3,"value","disabled"],["mat-mini-fab","","color","warn",3,"click"],["mat-raised-button","",3,"click"]],template:function(c,t){1&c&&(h.ec(0,"admin-header"),h.ec(1,"admin-sidebar"),h.jc(2,"div",0),h.jc(3,"div",1),h.Wc(4,"Noticeboard"),h.ic(),h.jc(5,"div",2),h.jc(6,"ckeditor",3),h.rc("ngModelChange",(function(c){return t.noticeboardContent=c})),h.ic(),h.ec(7,"div",4),h.Vc(8,X,13,4,"div",5),h.jc(9,"button",6),h.rc("click",(function(){return t.update()})),h.Wc(10,"Update"),h.ic(),h.ic(),h.ic(),h.ec(11,"loading",7)),2&c&&(h.Pb(6),h.Bc("ngModel",t.noticeboardContent),h.Pb(2),h.Bc("ngForOf",t.noticeboardBatches),h.Pb(1),h.Bc("disabled",0==t.choosedBatches.length||!t.noticeboardContent),h.Pb(2),h.Bc("show",t.loading))},directives:[g.a,f.a,V.a,y.k,y.n,i.j,p.b,m.a,L.b,L.e,F.a,v.a,i.k,N.h],styles:[".row.batches[_ngcontent-%COMP%]{align-items:center}.row.batches[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}"]}),c})()}];let G=(()=>{class c{}return c.\u0275mod=h.bc({type:c}),c.\u0275inj=h.ac({factory:function(t){return new(t||c)},imports:[[i.c,n.a,o.f.forChild(z)]]}),c})()}}]);