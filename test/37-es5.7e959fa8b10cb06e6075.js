function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{pWIn:function(t,e,c){"use strict";c.r(e),c.d(e,"StudentAttendanceModule",(function(){return Q}));var n,a=c("n+G7"),i=c("tyNb"),o=c("SP9e"),r=c("fXoL"),d=c("4KEQ"),s=((n=function(){function t(e){_classCallCheck(this,t),this.coreService=e}return _createClass(t,[{key:"setAttendance",value:function(t){return this.coreService.postRequest(o.a.API_URL+"student-attendance",t)}},{key:"getAttendanceByBatchIdAndDate",value:function(t,e){return this.coreService.getRequest(o.a.API_URL+"student-attendance/batch/"+t+"/date/"+e)}},{key:"getAttendanceByStudentIdAndBatchId",value:function(t,e){return this.coreService.getRequest(o.a.API_URL+"student-attendance/student/"+t+"/batch/"+e)}},{key:"getStudentsByStudentData",value:function(t,e){return this.coreService.getRequest(o.a.API_URL+"student-attendance/batch/"+t+"/"+e)}},{key:"updateAttendance",value:function(t){return this.coreService.putRequest(o.a.API_URL+"student-attendance/",t)}}]),t}()).\u0275fac=function(t){return new(t||n)(r.nc(d.a))},n.\u0275prov=r.Zb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),u=c("QeEr"),l=c("aCk2"),h=c("G0I0"),b=c("3Pt+"),g=c("ofXK"),f=c("bTqV"),v=c("kmnG"),p=c("qFsG"),m=c("z17N"),j=c("V/o5"),P=c("NFeN");function y(t,e){if(1&t&&(r.jc(0,"option",18),r.Wc(1),r.ic()),2&t){var c=e.$implicit;r.Bc("value",c.batchId),r.Pb(1),r.Xc(c.course+" - "+c.batch)}}var k=function(t,e,c){return{present:t,absent:e,leave:c}},A=function(t){return{"show-submenu":t}};function C(t,e){if(1&t){var c=r.kc();r.jc(0,"tr"),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.jc(6,"div",19),r.jc(7,"mat-icon",20),r.rc("click",(function(){r.Mc(c);var t=e.index,n=r.vc();return n.showMenu[t]=!n.showMenu[t]})),r.Wc(8,"arrow_drop_down"),r.ic(),r.jc(9,"button",21),r.rc("click",(function(){var t=e.$implicit;return t.status="P"==t.status?"A":"A"==t.status||"L"==t.status?"P":""})),r.Wc(10),r.ic(),r.jc(11,"div",22),r.rc("click",(function(){r.Mc(c);var t=e.index;return r.vc().showMenu[t]=!1})),r.jc(12,"div",20),r.rc("click",(function(){return e.$implicit.status="L"})),r.Wc(13,"Leave"),r.ic(),r.jc(14,"div",20),r.rc("click",(function(){return e.$implicit.status="P"})),r.Wc(15,"Present"),r.ic(),r.jc(16,"div",20),r.rc("click",(function(){return e.$implicit.status="A"})),r.Wc(17,"Absent"),r.ic(),r.ic(),r.ic(),r.ic(),r.jc(18,"td"),r.jc(19,"textarea",23),r.rc("ngModelChange",(function(t){return r.Mc(c),e.$implicit.remarks=t})),r.ic(),r.ic(),r.ic()}if(2&t){var n=e.$implicit,a=e.index,i=r.vc();r.Pb(2),r.Xc(n.name),r.Pb(2),r.Xc(n.rollNo),r.Pb(5),r.Bc("ngClass",r.Fc(6,k,"P"==n.status,"A"==n.status,"L"==n.status)),r.Pb(1),r.Yc(" ","P"==n.status?"Present":"A"==n.status?"Absent":"L"==n.status?"Leave":""," "),r.Pb(1),r.Bc("ngClass",r.Dc(10,A,1==i.showMenu[a])),r.Pb(8),r.Bc("ngModel",n.remarks)}}var M,B,w=((M=function(){function t(e,c,n){_classCallCheck(this,t),this.coreService=e,this.studentAttendanceService=c,this.dialog=n,this.batches=[],this.batchId="",this.date=new Date,this.students=[],this.showMenu=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.getAllBatches()}},{key:"getAllBatches",value:function(){var t=this;this.coreService.getRequest(o.a.API_URL+"courses/batches").subscribe((function(e){t.batches=e}))}},{key:"loadStudents",value:function(){var t=this;this.loading=!0,this.coreService.getRequest(o.a.API_URL+"candidate/batchid/"+this.batchId).subscribe((function(e){t.loading=!1,t.students=e,t.showMenu.length=e.length}))}},{key:"setAttendance",value:function(){var t=this;this.disableSubmitButton=!0;var e=JSON.parse(JSON.stringify(this.students));e.forEach((function(t){delete t.rollNo,delete t.name})),e={data:e,batchId:this.batchId,date:this.date.toString()},this.loading=!0,this.studentAttendanceService.setAttendance(e).subscribe((function(e){t.loading=!1,e.success&&(t.students=[]),t.disableSubmitButton=!1,t.dialog.showDialog({content:e.message})}))}}]),t}()).\u0275fac=function(t){return new(t||M)(r.dc(d.a),r.dc(s),r.dc(u.a))},M.\u0275cmp=r.Xb({type:M,selectors:[["app-student-attendance"]],decls:37,vars:10,consts:[["id","page-content"],[1,"row","main-row"],[1,"filter-box"],["id","batch",1,"select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","search","mat-raised-button","","color","primary",3,"disabled","click"],[1,"pinnacle-table","big-heading"],[4,"ngFor","ngForOf"],["colspan","5",2,"padding-top","20px"],[1,"row"],[1,"col-sm-3"],["matInput","","placeholder","Date","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"show"],[3,"value"],[1,"attendance-button-wrapper"],[3,"click"],["mat-raised-button","",1,"attendance-button",3,"ngClass","click"],[1,"submenu",3,"ngClass","click"],[3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.jc(4,"div",2),r.jc(5,"select",3),r.rc("ngModelChange",(function(t){return e.batchId=t})),r.jc(6,"option",4),r.Wc(7,"Select Batch"),r.ic(),r.Vc(8,y,2,2,"option",5),r.ic(),r.jc(9,"button",6),r.rc("click",(function(){return e.loadStudents()})),r.Wc(10,"Search"),r.ic(),r.ic(),r.ic(),r.jc(11,"table",7),r.jc(12,"tr"),r.jc(13,"th"),r.Wc(14,"Name"),r.ic(),r.jc(15,"th"),r.Wc(16,"RollNo"),r.ic(),r.jc(17,"th"),r.Wc(18,"Attendance"),r.ic(),r.jc(19,"th"),r.Wc(20,"Remarks"),r.ic(),r.ic(),r.Vc(21,C,20,12,"tr",8),r.jc(22,"tr"),r.jc(23,"td",9),r.jc(24,"div",10),r.jc(25,"div",11),r.jc(26,"mat-form-field"),r.jc(27,"input",12),r.rc("ngModelChange",(function(t){return e.date=t})),r.ic(),r.jc(28,"span",13),r.Wc(29,"calendar_today"),r.ic(),r.ec(30,"owl-date-time",14,15),r.ic(),r.ic(),r.jc(32,"div",11),r.Wc(33," \xa0\xa0\xa0"),r.jc(34,"button",16),r.rc("click",(function(){return e.setAttendance()})),r.Wc(35,"Submit"),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(36,"loading",17)),2&t){var c=r.Ic(31);r.Pb(5),r.Bc("ngModel",e.batchId),r.Pb(3),r.Bc("ngForOf",e.batches),r.Pb(1),r.Bc("disabled",!e.batchId),r.Pb(12),r.Bc("ngForOf",e.students),r.Pb(6),r.Bc("ngModel",e.date)("owlDateTime",c)("owlDateTimeTrigger",c),r.Pb(3),r.Bc("pickerType","calendar"),r.Pb(4),r.Bc("disabled",0==e.students.length||e.disableSubmitButton),r.Pb(2),r.Bc("show",e.loading)}},directives:[l.a,h.a,b.s,b.k,b.n,b.o,b.u,g.j,f.b,v.b,p.a,b.b,m.b,b.r,m.d,v.f,m.a,j.a,P.a,g.i],styles:[".main-row[_ngcontent-%COMP%]{justify-content:space-between;padding:0 0 15px}.filter-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}#batch[_ngcontent-%COMP%], #search[_ngcontent-%COMP%]{width:220px;margin-right:10px}#search[_ngcontent-%COMP%]{width:100px}.attend[_ngcontent-%COMP%]{max-width:270px}td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:450px;height:50px}.attendance-button-wrapper[_ngcontent-%COMP%]{position:relative}mat-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:13px;color:#fff;z-index:2;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.attendance-button[_ngcontent-%COMP%]{line-height:45px;width:100%;border-radius:0;color:#fff}.present[_ngcontent-%COMP%]{background:#23d947}.absent[_ngcontent-%COMP%]{background:#d93321}.leave[_ngcontent-%COMP%]{background:#87ceeb}.submenu[_ngcontent-%COMP%]{transition:all .3s;max-height:0;overflow:hidden;position:absolute;width:100%;background:#fff;box-shadow:0 0 4px rgba(0,0,0,.25);top:45px;left:0;z-index:3}.submenu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px 10px;cursor:pointer;z-index:3}.submenu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:#e8e8e8}.show-submenu[_ngcontent-%COMP%]{max-height:140px}"]}),M),I=c("QibW"),S=c("d3UM"),W=c("ZMsq"),_=c("FKr1"),O=c("IvIE"),x=c("icpI"),D=function(t,e,c){return{present:t,absent:e,leave:c}},E=function(t){return{"show-submenu":t}},R=((B=function(){function t(e,c){_classCallCheck(this,t),this.attendanceService=e,this.dialog=c}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"updateAttendance",value:function(){var t=this,e=JSON.parse(JSON.stringify(this.attendanceEntry));delete e.name,delete e.rollNo,delete e.phone;var c=new Date(this.date+" UTC").toISOString().slice(0,10);this.attendanceService.updateAttendance(Object.assign(Object.assign({},e),{batchId:this.batchId,date:c})).subscribe((function(e){e.success&&(t.modal.editAttendance=!1),t.dialog.showDialog({content:e.message})}))}}]),t}()).\u0275fac=function(t){return new(t||B)(r.dc(s),r.dc(u.a))},B.\u0275cmp=r.Xb({type:B,selectors:[["edit-attendance"]],inputs:{modal:"modal",attendanceEntry:"attendanceEntry",batchId:"batchId",date:"date"},decls:39,vars:12,consts:[[1,"pinnacle-table"],[1,"attendance-button-wrapper"],[3,"click"],["mat-raised-button","",1,"attendance-button",3,"ngClass","click"],[1,"submenu",3,"ngClass","click"],[3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(r.jc(0,"div"),r.jc(1,"table",0),r.jc(2,"tr"),r.jc(3,"th"),r.Wc(4,"Name"),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.ic(),r.jc(7,"tr"),r.jc(8,"th"),r.Wc(9,"RollNo"),r.ic(),r.jc(10,"td"),r.Wc(11),r.ic(),r.ic(),r.jc(12,"tr"),r.jc(13,"th"),r.Wc(14,"Attendance"),r.ic(),r.jc(15,"td"),r.jc(16,"div",1),r.jc(17,"mat-icon",2),r.rc("click",(function(){return e.showMenu=!e.showMenu})),r.Wc(18,"arrow_drop_down"),r.ic(),r.jc(19,"button",3),r.rc("click",(function(){return e.attendanceEntry.status="Present"==e.attendanceEntry.status?"Absent":"Absent"==e.attendanceEntry.status||"Leave"==e.attendanceEntry.status?"Present":""})),r.Wc(20),r.ic(),r.jc(21,"div",4),r.rc("click",(function(){return e.showMenu=!1})),r.jc(22,"div",2),r.rc("click",(function(){return e.attendanceEntry.status="Leave"})),r.Wc(23,"Leave"),r.ic(),r.jc(24,"div",2),r.rc("click",(function(){return e.attendanceEntry.status="Present"})),r.Wc(25,"Present"),r.ic(),r.jc(26,"div",2),r.rc("click",(function(){return e.attendanceEntry.status="Absent"})),r.Wc(27,"Absent"),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.jc(28,"tr"),r.jc(29,"th"),r.Wc(30,"Remarks"),r.ic(),r.jc(31,"td"),r.jc(32,"textarea",5),r.rc("ngModelChange",(function(t){return e.attendanceEntry.remarks=t})),r.ic(),r.ic(),r.ic(),r.jc(33,"tr"),r.jc(34,"th"),r.Wc(35,"Action"),r.ic(),r.jc(36,"td"),r.jc(37,"button",6),r.rc("click",(function(){return e.updateAttendance()})),r.Wc(38,"Update Attendance"),r.ic(),r.ic(),r.ic(),r.ic(),r.ic()),2&t&&(r.Pb(6),r.Xc(e.attendanceEntry.name),r.Pb(5),r.Xc(e.attendanceEntry.rollNo),r.Pb(8),r.Bc("ngClass",r.Fc(6,D,"Present"==e.attendanceEntry.status,"Absent"==e.attendanceEntry.status,"Leave"==e.attendanceEntry.status)),r.Pb(1),r.Yc(" ","Present"==e.attendanceEntry.status?"Present":"Absent"==e.attendanceEntry.status?"Absent":"Leave"==e.attendanceEntry.status?"Leave":""," "),r.Pb(1),r.Bc("ngClass",r.Dc(10,E,1==e.showMenu)),r.Pb(11),r.Bc("ngModel",e.attendanceEntry.remarks))},directives:[P.a,f.b,g.i,b.b,b.k,b.n],styles:["th[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7}td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:50px;width:100%}.attendance-button-wrapper[_ngcontent-%COMP%]{position:relative}mat-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:13px;color:#fff;z-index:2;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.attendance-button[_ngcontent-%COMP%]{line-height:45px;width:100%;border-radius:0;color:#fff}.present[_ngcontent-%COMP%]{background:#23d947}.absent[_ngcontent-%COMP%]{background:#d93321}.leave[_ngcontent-%COMP%]{background:#87ceeb}.submenu[_ngcontent-%COMP%]{transition:all .3s;max-height:0;overflow:hidden;position:absolute;width:100%;background:#fff;box-shadow:0 0 4px rgba(0,0,0,.25);top:45px;left:0;z-index:3}.submenu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px 10px;cursor:pointer;z-index:3}.submenu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:#e8e8e8}.show-submenu[_ngcontent-%COMP%]{max-height:140px}"]}),B);function L(t,e){if(1&t&&(r.jc(0,"mat-option",5),r.Wc(1),r.ic()),2&t){var c=e.$implicit;r.Bc("value",c.batchId),r.Pb(1),r.Zc("",c.course," ",c.batch,"")}}function N(t,e){if(1&t){var c=r.kc();r.jc(0,"div",22),r.jc(1,"mat-form-field"),r.jc(2,"input",23),r.rc("ngModelChange",(function(t){return r.Mc(c),r.vc().date=t})),r.ic(),r.jc(3,"span",24),r.Wc(4,"calendar_today"),r.ic(),r.ec(5,"owl-date-time",25,26),r.ic(),r.ic()}if(2&t){var n=r.Ic(6),a=r.vc();r.Pb(2),r.Bc("ngModel",a.date)("owlDateTime",n)("owlDateTimeTrigger",n),r.Pb(3),r.Bc("pickerType","calendar")}}function T(t,e){if(1&t){var c=r.kc();r.jc(0,"div",22),r.jc(1,"mat-form-field"),r.jc(2,"mat-label"),r.Wc(3,"Search By Name,RollNo"),r.ic(),r.jc(4,"input",27),r.rc("ngModelChange",(function(t){return r.Mc(c),r.vc().studentFilter=t})),r.ic(),r.ic(),r.ic()}if(2&t){var n=r.vc();r.Pb(4),r.Bc("ngModel",n.studentFilter)}}function F(t,e){if(1&t){var c=r.kc();r.jc(0,"tr"),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.jc(7,"td"),r.Wc(8),r.ic(),r.jc(9,"td"),r.Wc(10),r.ic(),r.jc(11,"td"),r.jc(12,"button",30),r.rc("click",(function(){r.Mc(c);var t=e.$implicit;return r.vc(2).editAttendance(t)})),r.jc(13,"mat-icon"),r.Wc(14,"create"),r.ic(),r.ic(),r.ic(),r.ic()}if(2&t){var n=e.$implicit;r.Pb(2),r.Xc(n.name),r.Pb(2),r.Xc(n.rollNo),r.Pb(2),r.Xc(n.phone),r.Pb(2),r.Xc(n.status),r.Pb(2),r.Xc(n.remarks)}}function X(t,e){if(1&t&&(r.hc(0),r.jc(1,"div",1),r.Wc(2,"Attendance By Batch"),r.ic(),r.jc(3,"div",2),r.jc(4,"table",28),r.jc(5,"tr"),r.jc(6,"th"),r.Wc(7,"Name"),r.ic(),r.jc(8,"th"),r.Wc(9,"RollNo"),r.ic(),r.jc(10,"th"),r.Wc(11,"Phone"),r.ic(),r.jc(12,"th"),r.Wc(13,"Status"),r.ic(),r.jc(14,"th"),r.Wc(15,"Remarks"),r.ic(),r.jc(16,"th"),r.Wc(17,"Action"),r.ic(),r.ic(),r.Vc(18,F,15,5,"tr",29),r.ic(),r.ic(),r.gc()),2&t){var c=r.vc();r.Pb(18),r.Bc("ngForOf",c.attendanceByBatch)}}function V(t,e){if(1&t){var c=r.kc();r.jc(0,"tr"),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.jc(7,"td"),r.jc(8,"button",31),r.rc("click",(function(){r.Mc(c);var t=e.$implicit;return r.vc(2).searchAttendanceByStudentIdAndBatchId(t)})),r.jc(9,"mat-icon"),r.Wc(10,"visibility"),r.ic(),r.ic(),r.ic(),r.ic()}if(2&t){var n=e.$implicit;r.Pb(2),r.Xc(n.name),r.Pb(2),r.Xc(n.rollNo),r.Pb(2),r.Xc(n.phone)}}function q(t,e){if(1&t&&(r.hc(0),r.jc(1,"div",1),r.Wc(2,"Students List"),r.ic(),r.jc(3,"div",2),r.jc(4,"table",28),r.jc(5,"tr"),r.jc(6,"th"),r.Wc(7,"Name"),r.ic(),r.jc(8,"th"),r.Wc(9,"RollNo"),r.ic(),r.jc(10,"th"),r.Wc(11,"Phone"),r.ic(),r.jc(12,"th"),r.Wc(13,"Action"),r.ic(),r.ic(),r.Vc(14,V,11,3,"tr",29),r.ic(),r.ic(),r.gc()),2&t){var c=r.vc();r.Pb(14),r.Bc("ngForOf",c.students)}}function U(t,e){if(1&t){var c=r.kc();r.hc(0),r.jc(1,"div",32),r.Wc(2,"Rajdeep Attendance "),r.jc(3,"button",33),r.rc("click",(function(){return r.Mc(c),r.vc().seeStudentAttendance=!1})),r.Wc(4,"Close"),r.ic(),r.ic(),r.jc(5,"div",2),r.jc(6,"div",34),r.jc(7,"div",35),r.jc(8,"div",36),r.ec(9,"full-calendar",37,38),r.ic(),r.ic(),r.jc(11,"div",35),r.ec(12,"google-chart",39),r.ic(),r.ic(),r.ic(),r.gc()}if(2&t){var n=r.vc();r.Pb(9),r.Bc("deepChangeDetection",!0)("options",n.calendarOptions),r.Pb(3),r.Bc("data",n.chartData)("options",n.options)}}function $(t,e){if(1&t&&r.ec(0,"edit-attendance",40),2&t){var c=r.vc();r.Bc("modal",c.modals)("batchId",c.batchId)("date",c.date)("attendanceEntry",c.activeAttendanceEntry)}}var z,G,J=function(){return{width:"400px"}},K=[{path:"",component:w},{path:"see",component:(z=function(){function t(e,c,n){_classCallCheck(this,t),this.coreService=e,this.studentAttendanceService=c,this.dialog=n,this.searchBy=1,this.batches=[],this.date=new Date,this.attendanceByBatch=[],this.students=[],this.modals={editAttendance:!1},this.seeStudentAttendance=!1,this.events=[],this.calendarOptions={initialView:"dayGridMonth",headerToolbar:{left:"prev,next",right:"dayGridMonth,timeGridWeek,timeGridDay"},footerToolbar:{center:"title"},events:this.events},this.chartData=[["Present",0],["Absent",0],["Leave",0]],this.options={pieHole:.4,legend:{position:"left"},colors:["#23d947","#d93321","skyblue"],sliceVisibilityThreshold:0}}return _createClass(t,[{key:"ngOnInit",value:function(){this.getAllBatches()}},{key:"getAllBatches",value:function(){var t=this;this.coreService.getRequest(o.a.API_URL+"courses/batches").subscribe((function(e){t.batches=e}))}},{key:"searchAttendanceByBatchAndDate",value:function(){var t=this;this.loading=!0,this.seeStudentAttendance=!1;var e=new Date(this.date+" UTC").toISOString().slice(0,10);this.studentAttendanceService.getAttendanceByBatchIdAndDate(this.batchId,e).subscribe((function(e){t.loading=!1,0==e.length&&(t.seeStudentAttendance=!1,t.dialog.showDialog({content:"Attendance not found"})),t.attendanceByBatch=e}))}},{key:"searchStudentsByStudentData",value:function(){var t=this;this.loading=!0,this.seeStudentAttendance=!1,this.studentAttendanceService.getStudentsByStudentData(this.batchId,this.studentFilter||"undefined").subscribe((function(e){t.students=e,t.loading=!1}))}},{key:"searchAttendanceByStudentIdAndBatchId",value:function(t){var e=this;this.loading=!0,this.studentAttendanceService.getAttendanceByStudentIdAndBatchId(t.studentId,t.batchId).subscribe((function(t){e.loading=!1,e.insertAttendanceInCalendar(t),e.seeStudentAttendance=!0;var c=0,n=0,a=0;t.forEach((function(t){"Present"==t.status&&c++,"Absent"==t.status&&n++,"On Leave"==t.status&&a++,e.chartData[0][1]=c,e.chartData[1][1]=n,e.chartData[2][1]=a}))}))}},{key:"getColor",value:function(t){return"Absent"==t?"#d93321":"Present"==t?"#23d947":"skyblue"}},{key:"insertAttendanceInCalendar",value:function(t){var e=this;this.events.length=0,t.forEach((function(t){e.events.push({title:t.status,date:t.attendanceDate,end:null,message:"Hello",backgroundColor:e.getColor(t.status)})}))}},{key:"editAttendance",value:function(t){this.activeAttendanceEntry=t,this.modals.editAttendance=!0}}]),t}(),z.\u0275fac=function(t){return new(t||z)(r.dc(d.a),r.dc(s),r.dc(u.a))},z.\u0275cmp=r.Xb({type:z,selectors:[["app-see-student-attendance"]],decls:36,vars:17,consts:[["id","page-content"],[1,"content-title"],[1,"content-box"],[3,"ngModel","ngModelChange","change"],["id","batchRadio",3,"value"],[3,"value"],[1,"row","filter"],[1,"col-sm-3","pr"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-sm-3 pr pl",4,"ngIf"],[1,"col-sm-3","pl"],["mat-raised-button","","color","primary",3,"disabled","click"],[2,"height","20px"],[4,"ngIf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"modal","batchId","date","attendanceEntry",4,"ngIf"],[3,"show"],[1,"col-sm-3","pr","pl"],["matInput","","placeholder","Date","required","",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["matSuffix","",1,"material-icons"],[3,"pickerType"],["dt1",""],["matInput","",3,"ngModel","ngModelChange"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",3,"click"],[1,"content-title","row","justify-content-between","align-items-center"],["mat-raised-button","","color","warn",3,"click"],[1,"row"],[1,"col-sm-6"],["id","full-calendar"],[3,"deepChangeDetection","options"],["mycal",""],["id","score-card-chart","type","PieChart",3,"data","options"],[3,"modal","batchId","date","attendanceEntry"]],template:function(t,e){1&t&&(r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.Wc(4,"Search Attendance By Batch or Student"),r.ic(),r.jc(5,"div",2),r.jc(6,"mat-radio-group",3),r.rc("ngModelChange",(function(t){return e.searchBy=t}))("change",(function(){return e.seeStudentAttendance=!1})),r.jc(7,"mat-radio-button",4),r.Wc(8,"By Batch(Today's)"),r.ic(),r.jc(9,"mat-radio-button",5),r.Wc(10,"By Student"),r.ic(),r.ic(),r.jc(11,"div",6),r.jc(12,"div",7),r.jc(13,"mat-form-field"),r.jc(14,"mat-label"),r.Wc(15,"Select Batch"),r.ic(),r.jc(16,"mat-select",8),r.rc("ngModelChange",(function(t){return e.batchId=t})),r.Vc(17,L,2,3,"mat-option",9),r.ic(),r.ic(),r.ic(),r.Vc(18,N,7,4,"div",10),r.Vc(19,T,5,1,"div",10),r.jc(20,"div",11),r.jc(21,"button",12),r.rc("click",(function(){return 1==e.searchBy?e.searchAttendanceByBatchAndDate():e.searchStudentsByStudentData()})),r.Wc(22,"Search"),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(23,"div",13),r.Vc(24,X,19,1,"ng-container",14),r.Vc(25,q,15,1,"ng-container",14),r.Vc(26,U,13,4,"ng-container",14),r.ic(),r.jc(27,"div",15),r.jc(28,"div",16),r.jc(29,"div",17),r.Wc(30),r.ic(),r.jc(31,"div",18),r.rc("click",(function(){return e.modals.editAttendance=!1})),r.Wc(32,"\xd7"),r.ic(),r.jc(33,"div",19),r.Vc(34,$,1,4,"edit-attendance",20),r.ic(),r.ic(),r.ic(),r.ec(35,"loading",21)),2&t&&(r.Pb(6),r.Bc("ngModel",e.searchBy),r.Pb(1),r.Bc("value",1),r.Pb(2),r.Bc("value",2),r.Pb(7),r.Bc("ngModel",e.batchId),r.Pb(1),r.Bc("ngForOf",e.batches),r.Pb(1),r.Bc("ngIf",1==e.searchBy),r.Pb(1),r.Bc("ngIf",2==e.searchBy),r.Pb(2),r.Bc("disabled",!e.batchId),r.Pb(3),r.Bc("ngIf",1==e.searchBy&&e.attendanceByBatch.length>0),r.Pb(1),r.Bc("ngIf",2==e.searchBy&&e.students.length>0&&!e.seeStudentAttendance),r.Pb(1),r.Bc("ngIf",e.seeStudentAttendance),r.Pb(1),r.Bc("show",e.modals.editAttendance)("options",r.Cc(16,J)),r.Pb(3),r.Yc("Edit Attendance of ",e.activeAttendanceEntry&&e.activeAttendanceEntry.name,""),r.Pb(4),r.Bc("ngIf",e.modals.editAttendance),r.Pb(1),r.Bc("show",e.loading))},directives:[l.a,h.a,I.b,b.k,b.n,I.a,v.b,v.e,S.a,g.j,g.k,f.b,W.a,j.a,_.h,p.a,b.b,m.b,b.r,m.d,v.f,m.a,P.a,O.a,x.a,R],styles:["#batchRadio[_ngcontent-%COMP%]{margin-right:15px}.filter[_ngcontent-%COMP%]{margin-top:20px}#full-calendar[_ngcontent-%COMP%]{max-width:650px;background:#fff;padding:15px}"]}),z)}],Q=((G=function t(){_classCallCheck(this,t)}).\u0275mod=r.bc({type:G}),G.\u0275inj=r.ac({factory:function(t){return new(t||G)},imports:[[a.a,i.f.forChild(K)]]}),G)}}]);