(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"I9y+":function(t,c,e){"use strict";e.d(c,"a",(function(){return r}));var i=e("fXoL"),n=e("ofXK"),s=e("tyNb"),o=e("NFeN");function a(t,c){if(1&t&&(i.jc(0,"div",3),i.jc(1,"div",4),i.jc(2,"div",5),i.jc(3,"div",6),i.ec(4,"img",7),i.ic(),i.jc(5,"div",8),i.jc(6,"div",9),i.Wc(7),i.ic(),i.jc(8,"div",10),i.Wc(9),i.ic(),i.ic(),i.ic(),i.jc(10,"div",11),i.jc(11,"mat-icon"),i.Wc(12,"add"),i.ic(),i.Wc(13),i.ic(),i.ic(),i.ic()),2&t){const t=c.$implicit;i.Pb(7),i.Xc(t.title),i.Pb(2),i.Xc(t.value),i.Pb(1),i.Bc("routerLink",t.link),i.Pb(3),i.Yc(" ",t.footerTitle," ")}}let r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=i.Xb({type:t,selectors:[["statistics-dashboard"]],inputs:{statisticsData:"statisticsData"},decls:3,vars:1,consts:[["id","page-content"],[1,"row"],["class","padding-box",4,"ngFor","ngForOf"],[1,"padding-box"],[1,"dashboard-item"],[1,"item-body","row"],[1,"item-icon"],["src","assets/images/question.png","id","question-img"],[1,"item-content"],[1,"total-title"],[1,"total-value"],[1,"item-footer",3,"routerLink"]],template:function(t,c){1&t&&(i.jc(0,"div",0),i.jc(1,"div",1),i.Vc(2,a,14,4,"div",2),i.ic(),i.ic()),2&t&&(i.Pb(2),i.Bc("ngForOf",c.statisticsData))},directives:[n.j,s.c,o.a],styles:["#page-content[_ngcontent-%COMP%]{padding:7.5px}.dashboard-item[_ngcontent-%COMP%]{position:relative;background:#fff;align-items:flex-start}.padding-box[_ngcontent-%COMP%]{width:25%;padding:7.5px}.item-body[_ngcontent-%COMP%]{padding:25px 0}.item-icon[_ngcontent-%COMP%]{width:25%;text-align:center}#question-img[_ngcontent-%COMP%]{width:44.5px}.item-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.item-content[_ngcontent-%COMP%]{width:75%}.total-title[_ngcontent-%COMP%]{font-size:20px;text-transform:uppercase;color:#555;margin-bottom:10px}.total-value[_ngcontent-%COMP%]{font-weight:500;font-size:24px;color:#333}.item-footer[_ngcontent-%COMP%]{background-color:var(--text-success);padding:5px;width:100%;color:#fff;font-weight:500;text-align:center}.item-footer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}@media screen and (max-width:1024px){.padding-box[_ngcontent-%COMP%]{width:33.33%}.item-icon[_ngcontent-%COMP%]{width:30%}.item-content[_ngcontent-%COMP%]{width:70%}}@media screen and (max-width:840px){.padding-box[_ngcontent-%COMP%]{width:50%}}@media screen and (max-width:570px){.padding-box[_ngcontent-%COMP%]{width:100%}}"]}),t})()},W2jB:function(t,c,e){"use strict";e.d(c,"a",(function(){return nt}));var i=e("mrSG"),n=e("+0xr"),s=e("0EQZ"),o=e("SP9e"),a=e("Dh3D"),r=e("M9IT"),d=e("byUP"),l=e("fXoL"),u=e("kMVN"),h=e("4KEQ"),p=e("QeEr"),b=e("tyNb"),g=e("FnMX"),m=e("aCk2"),f=e("G0I0"),j=e("3Pt+"),w=e("ofXK"),v=e("ZMsq"),x=e("bTqV"),C=e("V/o5"),M=e("NFeN"),P=e("bSwM"),_=e("kmnG"),k=e("qFsG");let O=(()=>{class t{constructor(t,c){this.coreService=t,this.comm=c}ngOnInit(){}onSubmit(){this.coreService.postRequest(o.a.API_URL+"subjects",{subject:this.subject}).subscribe(t=>{t.status?this.comm.saveSubject.next(t.data):this.status=t.message})}}return t.\u0275fac=function(c){return new(c||t)(l.dc(h.a),l.dc(u.a))},t.\u0275cmp=l.Xb({type:t,selectors:[["add-subject"]],decls:33,vars:3,consts:[[1,"row","mainrow"],[1,"col-12","col-lg-9","pr"],[1,"custom-shadow"],[1,"content-box"],[1,"border-box"],[1,"field-wrapper"],["matInput","","placeholder","Enter Subject Name","required","",3,"ngModel","focus","ngModelChange"],["sub","ngModel"],[1,"button-wrapper"],["mat-raised-button","","color","primary",3,"disabled","click"],[2,"font-weight","500","color","red","margin-top","10px"],[1,"col-12","col-lg-3","pl"],[1,"content-title"],["id","instructions"],[1,"material-icons"]],template:function(t,c){if(1&t&&(l.jc(0,"div",0),l.jc(1,"div",1),l.jc(2,"div",2),l.jc(3,"div",3),l.jc(4,"div",4),l.jc(5,"div",5),l.jc(6,"mat-form-field"),l.jc(7,"mat-label"),l.Wc(8,"Enter Subject Name"),l.ic(),l.jc(9,"input",6,7),l.rc("focus",(function(){return c.status=""}))("ngModelChange",(function(t){return c.subject=t})),l.ic(),l.ic(),l.ic(),l.jc(11,"div",8),l.jc(12,"button",9),l.rc("click",(function(){return c.onSubmit()})),l.Wc(13," Submit "),l.ic(),l.ic(),l.ic(),l.jc(14,"p",10),l.Wc(15),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(16,"div",11),l.jc(17,"div",2),l.jc(18,"div",12),l.Wc(19,"Important Instructions"),l.ic(),l.jc(20,"div",13),l.jc(21,"div"),l.jc(22,"div",14),l.Wc(23,"check_box"),l.ic(),l.Wc(24,"Add subject to the question bank."),l.ic(),l.jc(25,"div"),l.jc(26,"div",14),l.Wc(27,"check_box"),l.ic(),l.Wc(28,"Can define 4 level hierarchy to a created subject. "),l.ic(),l.jc(29,"div"),l.jc(30,"div",14),l.Wc(31,"check_box"),l.ic(),l.Wc(32,"Considering an example: add a subject, chapter, topic, sub-topic"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic()),2&t){const t=l.Ic(10);l.Pb(9),l.Bc("ngModel",c.subject),l.Pb(3),l.Bc("disabled",t.invalid),l.Pb(3),l.Xc(c.status)}},directives:[_.b,_.e,k.a,j.b,j.r,j.k,j.n,x.b],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",".content-title[_ngcontent-%COMP%]{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.custom-shadow[_ngcontent-%COMP%]{height:100%;box-shadow:0 0 5px -1px rgba(0,0,0,.25)}.border-box[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.label[_ngcontent-%COMP%]{margin-bottom:20px}.button-wrapper[_ngcontent-%COMP%], .field-wrapper[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:500px){.field-wrapper[_ngcontent-%COMP%]{width:calc(100% - 80px);padding-right:10px}.button-wrapper[_ngcontent-%COMP%]{width:80px}}@media screen and (max-width:992px){.mainrow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{padding-right:0}.mainrow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{padding-left:0;margin-top:20px}}"]}),t})();function S(t,c){if(1&t){const t=l.kc();l.jc(0,"div",19),l.jc(1,"div",20),l.jc(2,"mat-form-field"),l.jc(3,"mat-label"),l.Wc(4,"Enter Chapter Name"),l.ic(),l.jc(5,"input",21,22),l.rc("ngModelChange",(function(c){return l.Mc(t),l.vc().chapter=c})),l.ic(),l.ic(),l.ic(),l.jc(7,"div",23),l.jc(8,"button",9),l.rc("click",(function(){return l.Mc(t),l.vc().saveChapter()})),l.jc(9,"mat-icon",10),l.Wc(10,"save"),l.ic(),l.ic(),l.ic(),l.ic()}if(2&t){const t=l.Ic(6),c=l.vc();l.Pb(5),l.Bc("ngModel",c.chapter),l.Pb(3),l.Bc("disabled",t.invalid)}}function I(t,c){if(1&t){const t=l.kc();l.jc(0,"div",32),l.jc(1,"div",33),l.jc(2,"mat-form-field"),l.jc(3,"mat-label"),l.Wc(4,"Enter Topic Name"),l.ic(),l.jc(5,"input",21,22),l.rc("ngModelChange",(function(c){l.Mc(t);const e=l.vc().index;return l.vc().topics[e]=c})),l.ic(),l.ic(),l.ic(),l.jc(7,"div",34),l.jc(8,"button",9),l.rc("click",(function(){l.Mc(t);const c=l.vc(),e=c.$implicit,i=c.index;return l.vc().saveTopic(e.chapterId,i)})),l.jc(9,"mat-icon",10),l.Wc(10,"save"),l.ic(),l.ic(),l.ic(),l.ic()}if(2&t){const t=l.Ic(6),c=l.vc().index,e=l.vc();l.Pb(5),l.Bc("ngModel",e.topics[c]),l.Pb(3),l.Bc("disabled",t.invalid)}}function D(t,c){if(1&t){const t=l.kc();l.jc(0,"div",32),l.jc(1,"div",35),l.jc(2,"mat-form-field"),l.jc(3,"mat-label"),l.Wc(4,"Enter Topic Name"),l.ic(),l.jc(5,"input",21),l.rc("ngModelChange",(function(e){return l.Mc(t),c.$implicit.topic=e})),l.ic(),l.ic(),l.ic(),l.jc(6,"div",36),l.jc(7,"button",9),l.rc("click",(function(){l.Mc(t);const e=c.$implicit,i=c.index,n=l.vc().index;return l.vc().updateTopic(e.topicId,n,i)})),l.jc(8,"mat-icon",10),l.Wc(9,"save"),l.ic(),l.ic(),l.Wc(10," \xa0"),l.jc(11,"button",37),l.rc("click",(function(){l.Mc(t);const e=c.$implicit,i=c.index,n=l.vc().index;return l.vc().showTopicDelete(e.topicId,e.topic,n,i)})),l.jc(12,"mat-icon"),l.Wc(13,"delete"),l.ic(),l.ic(),l.ic(),l.ic()}if(2&t){const t=c.$implicit,e=c.index,i=l.vc().index,n=l.vc();l.Pb(5),l.Bc("ngModel",t.topic),l.Pb(2),l.Bc("disabled",n.masterChapters[i].topics[e].topic==t.topic)}}function y(t,c){if(1&t){const t=l.kc();l.jc(0,"div",19),l.jc(1,"div",24),l.jc(2,"div",25),l.jc(3,"mat-form-field"),l.jc(4,"mat-label"),l.Wc(5,"Enter Chapter Name"),l.ic(),l.jc(6,"input",21,26),l.rc("ngModelChange",(function(e){l.Mc(t);const i=c.index;return l.vc().chapters[i].chapter=e})),l.ic(),l.ic(),l.ic(),l.jc(8,"div",27),l.jc(9,"button",9),l.rc("click",(function(){l.Mc(t);const e=c.index;return l.vc().updateChapter(e)})),l.jc(10,"mat-icon",10),l.Wc(11,"save"),l.ic(),l.ic(),l.Wc(12," \xa0"),l.jc(13,"button",28),l.rc("click",(function(){l.Mc(t);const e=c.$implicit,i=c.index;return l.vc().showDelete(e.chapterId,e.chapter,i)})),l.jc(14,"mat-icon"),l.Wc(15,"delete"),l.ic(),l.ic(),l.Wc(16," \xa0"),l.jc(17,"button",29),l.rc("click",(function(){l.Mc(t);const e=c.index,i=l.vc();return i.showAddTopics[e]=!i.showAddTopics[e]})),l.jc(18,"mat-icon",10),l.Wc(19,"add"),l.ic(),l.Wc(20," Topic "),l.ic(),l.ic(),l.ic(),l.Vc(21,I,11,2,"div",30),l.Vc(22,D,14,2,"div",31),l.ic()}if(2&t){const t=c.$implicit,e=c.index,i=l.Ic(7),n=l.vc();l.Pb(6),l.Bc("ngModel",n.chapters[e].chapter),l.Pb(3),l.Bc("disabled",i.invalid||n.chapters[e].chapter==n.masterChapters[e].chapter),l.Pb(4),l.Bc("disabled",t.topics.length>0),l.Pb(8),l.Bc("ngIf",n.showAddTopics[e]),l.Pb(1),l.Bc("ngForOf",t.topics)}}let B=(()=>{class t{constructor(t,c,e){this.coreService=t,this.comm=c,this.dialog=e,this.masterChapters=[],this.showAddTopics=[],this.showdelete=!1,this.showTopicDeleteModal=!1,this.addchapter=!1,this.topics=[],this.chapters=[]}ngOnChanges(t){this.masterSubject=""+this.subjectData.subject,this.masterChapters=JSON.parse(JSON.stringify(this.chapters)),this.showAddTopics=new Array(this.masterChapters.length),this.addchapter=!1,this.topics=new Array(this.chapters.length)}ngOnInit(){}showStatus(t,c){this.dialog.showDialog({title:"Status",content:c})}saveChapter(){const t=o.a.API_URL+"subjects/chapters",c={chapter:this.chapter,subjectId:this.subjectData.subjectId};this.loading=!0,this.coreService.postRequest(t,c).subscribe(t=>{this.loading=!1,this.showStatus(t.status,t.message),t.data.topics=[],this.chapters.push(t.data),this.masterChapters.push(JSON.parse(JSON.stringify(t.data))),this.addchapter=!1,this.chapter="",this.comm.saveChapter.next(t.data)})}saveTopic(t,c){let e={chapterId:t,topic:this.topics[c]};this.loading=!0,this.coreService.postRequest(o.a.API_URL+"subjects/topics",e).subscribe(t=>{this.loading=!1,this.chapters[c].topics.push(t.data),this.masterChapters[c].topics.push(JSON.parse(JSON.stringify(t.data))),this.showAddTopics[c]=!1,this.showStatus(t.status,t.message),this.topics[c]=""})}updateChapter(t){let c=this.chapters[t];this.loading=!0,this.coreService.putRequest(o.a.API_URL+"subjects/chapters/"+c.chapterId,{chapter:c.chapter}).subscribe(e=>{this.loading=!1,this.showStatus(e.status,e.message),this.masterChapters[t].chapter=""+c.chapter})}updateSubject(){this.loading=!0,this.coreService.putRequest(o.a.API_URL+"subjects/"+this.subjectData.subjectId,{subject:this.subjectData.subject}).subscribe(t=>{this.loading=!1,this.showStatus(t.status,t.message),this.masterSubject=""+this.subjectData.subject})}updateTopic(t,c,e){let i=this.chapters[c].topics[e];const n=o.a.API_URL+"subjects/topics/"+t;this.loading=!0,this.coreService.putRequest(n,i).subscribe(t=>{this.loading=!1,this.showStatus(t.status,t.message),this.masterChapters[c].topics[e]=JSON.parse(JSON.stringify(this.chapters[c].topics[e]))})}showDelete(t,c,e){this.dialog.showDialog({title:"Confirm",content:` Are you sure to delete &ldquo;${c}&rdquo; ?`,width:"350px",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteChapter(t,e)}})}showTopicDelete(t,c,e,i){this.dialog.showDialog({title:"Confirm",content:` Are you sure to delete &ldquo;${c}&rdquo; ?`,width:"350px",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteTopic(t,e,i)}})}deleteChapter(t,c){const e=o.a.API_URL+"subjects/chapters/"+t;this.loading=!0,this.coreService.deleteRequest(e).subscribe(t=>{this.loading=!1,t.success?(this.chapters.splice(c,1),this.masterChapters.splice(c,1),this.showdelete=!1):this.dialog.showDialog({content:t.message})})}deleteTopic(t,c,e){this.loading=!0,this.coreService.deleteRequest(o.a.API_URL+"subjects/topics/"+t).subscribe(t=>{this.loading=!1,t.success?(this.chapters[c].topics.splice(e,1),this.masterChapters[c].topics.splice(e,1)):this.dialog.showDialog({content:t.message})})}}return t.\u0275fac=function(c){return new(c||t)(l.dc(h.a),l.dc(u.a),l.dc(p.a))},t.\u0275cmp=l.Xb({type:t,selectors:[["edit-subject"]],inputs:{chapters:"chapters",subjectData:"subjectData"},features:[l.Nb],decls:40,vars:5,consts:[[1,"row","mainrow"],[1,"col-12","col-lg-9"],[1,"custom-shadow"],[1,"content-box"],[1,"row","inner-rows"],[1,"update-subject-left","pr"],["matInput","","required","",3,"ngModel","ngModelChange"],["sub","ngModel"],[1,"update-subject-right","justify-space-between","pl"],["mat-mini-fab","","color","primary",3,"disabled","click"],[1,"btn-icons"],["color","primary","mat-raised-button","",3,"click"],["class","row inner-rows border-box",4,"ngIf"],["class","row inner-rows border-box",4,"ngFor","ngForOf"],[1,"col-12","col-lg-3"],[1,"content-title"],["id","instructions"],[1,"material-icons"],[3,"show"],[1,"row","inner-rows","border-box"],[1,"add-chapter-left","pr"],["matInput","","placeholder","Enter Chapter Name","required","",3,"ngModel","ngModelChange"],["top","ngModel"],[1,"add-chapter-right","pl"],[1,"row","col-12","chapters"],[1,"update-chapter-left","pr"],["edittop","ngModel"],[1,"update-chapter-right","justify-space-between","pl"],["mat-mini-fab","","color","warn",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],["class","row inner-rows border-box col-12",4,"ngIf"],["class","row inner-rows border-box col-12",4,"ngFor","ngForOf"],[1,"row","inner-rows","border-box","col-12"],[1,"add-topic-left","pr"],[1,"add-topic-right","pl"],[1,"update-topic-left","pr"],[1,"update-topic-right","justify-space-between","pl"],["mat-mini-fab","","color","warn",3,"click"]],template:function(t,c){if(1&t&&(l.jc(0,"div",0),l.jc(1,"div",1),l.jc(2,"div",2),l.jc(3,"div",3),l.jc(4,"div",4),l.jc(5,"div",5),l.jc(6,"mat-form-field"),l.jc(7,"mat-label"),l.Wc(8,"Enter Subject Name"),l.ic(),l.jc(9,"input",6,7),l.rc("ngModelChange",(function(t){return c.subjectData.subject=t})),l.ic(),l.ic(),l.ic(),l.jc(11,"div",8),l.jc(12,"button",9),l.rc("click",(function(){return c.updateSubject()})),l.jc(13,"mat-icon",10),l.Wc(14,"save"),l.ic(),l.ic(),l.Wc(15,"\xa0 "),l.jc(16,"button",11),l.rc("click",(function(){return c.addchapter=!c.addchapter})),l.jc(17,"mat-icon",10),l.Wc(18,"add"),l.ic(),l.Wc(19," Chapter "),l.ic(),l.ic(),l.ic(),l.Vc(20,S,11,2,"div",12),l.Vc(21,y,23,5,"div",13),l.ic(),l.ic(),l.ic(),l.jc(22,"div",14),l.jc(23,"div",2),l.jc(24,"div",15),l.Wc(25,"Important Instructions"),l.ic(),l.jc(26,"div",16),l.jc(27,"div"),l.jc(28,"div",17),l.Wc(29,"check_box"),l.ic(),l.Wc(30,"Add subject to the question bank."),l.ic(),l.jc(31,"div"),l.jc(32,"div",17),l.Wc(33,"check_box"),l.ic(),l.Wc(34,"Can define 4 level hierarchy to a created subject. "),l.ic(),l.jc(35,"div"),l.jc(36,"div",17),l.Wc(37,"check_box"),l.ic(),l.Wc(38,"Considering an example: add a subject, chapter, topic, sub-topic"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ec(39,"loading",18)),2&t){const t=l.Ic(10);l.Pb(9),l.Bc("ngModel",c.subjectData.subject),l.Pb(3),l.Bc("disabled",t.invalid||c.subjectData.subject==c.masterSubject),l.Pb(8),l.Bc("ngIf",c.addchapter),l.Pb(1),l.Bc("ngForOf",c.chapters),l.Pb(18),l.Bc("show",c.loading)}},directives:[_.b,_.e,k.a,j.b,j.r,j.k,j.n,x.b,M.a,w.k,w.j,C.a],styles:["#instructions{background-color:#feffa0;padding-right:10px}#instructions>div{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions>div>div.material-icons{position:absolute;left:-30px}#instructions>div:last-child{border-bottom:none}",".content-title{padding:10px;font-weight:500;background:#fff;border-bottom:1px solid #ddd}.content-box{padding:15px;background-color:#fff;max-height:65vh;overflow:auto;position:relative}.custom-shadow{height:100%;box-shadow:0 0 5px -1px rgba(0,0,0,.25)}.chapters{margin-bottom:10px}.mainrow>div:first-child{padding-right:5px}.mainrow>div:last-child{padding-left:5px}.border-box{border:1px solid #ddd;padding:10px}.inner-rows{margin-bottom:10px}.inner-rows:last-child{margin-bottom:0}.label{margin-bottom:20px}mat-icon.btn-icons{font-size:20px;margin-top:1px}.update-chapter-left,.update-chapter-right,.update-subject-left,.update-subject-right,.update-topic-left,.update-topic-right{width:100%}.add-chapter-left,.add-topic-left{width:calc(100% - 40px)}.add-chapter-right,.add-topic-right{width:40px}@media screen and (min-width:500px){.justify-space-between{display:flex;justify-content:space-between;align-items:center}.update-chapter-left{width:calc(100% - 205px)}.update-chapter-right{width:205px}.update-topic-left{width:calc(100% - 95px)}.update-topic-right{width:95px}.update-subject-left{width:calc(100% - 165px)}.update-subject-right{width:165px}}@media screen and (max-width:992px){.mainrow>div:first-child{padding-right:0;order:2}.mainrow>div:last-child{padding-left:0;margin-bottom:20px;order:1}}@media screen and (max-width:576px){#page-content{padding:5px}.content-box{padding:10px}.chapters{margin-bottom:20px}}"],encapsulation:2}),t})();function W(t,c){if(1&t){const t=l.kc();l.jc(0,"button",32),l.rc("click",(function(){return l.Mc(t),l.vc().showAddModal=!0})),l.jc(1,"mat-icon"),l.Wc(2,"add"),l.ic(),l.Wc(3," Add "),l.ic()}}function A(t,c){if(1&t){const t=l.kc();l.jc(0,"button",33),l.rc("click",(function(){return l.Mc(t),l.vc().showMultipleDelete()})),l.jc(1,"mat-icon"),l.Wc(2,"delete"),l.ic(),l.Wc(3," Delete "),l.ic()}if(2&t){const t=l.vc();l.Bc("disabled",0==t.selection.selected.length)}}function E(t,c){if(1&t){const t=l.kc();l.jc(0,"th",34),l.jc(1,"mat-checkbox",35),l.rc("change",(function(c){l.Mc(t);const e=l.vc();return c?e.masterToggle():null})),l.ic(),l.ic()}if(2&t){const t=l.vc();l.Pb(1),l.Bc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function V(t,c){if(1&t){const t=l.kc();l.jc(0,"td",36),l.jc(1,"mat-checkbox",37),l.rc("click",(function(c){return l.Mc(t),c.stopPropagation()}))("change",(function(e){l.Mc(t);const i=c.$implicit,n=l.vc();return e?n.selection.toggle(i):null})),l.ic(),l.ic()}if(2&t){const t=c.$implicit,e=l.vc();l.Pb(1),l.Bc("disabled",e.subject_chapters[t.subjectId].length>0)("checked",e.selection.isSelected(t))}}function T(t,c){1&t&&(l.jc(0,"th",38),l.Wc(1," Srno. "),l.ic())}function q(t,c){if(1&t&&(l.jc(0,"td",36),l.Wc(1),l.ic()),2&t){const t=c.index;l.Pb(1),l.Yc(" ",t+1," ")}}function R(t,c){1&t&&(l.jc(0,"th",39),l.Wc(1," Subject "),l.ic())}function F(t,c){if(1&t&&(l.jc(0,"li"),l.Wc(1),l.ic()),2&t){const t=c.$implicit;l.Pb(1),l.Xc(t.topic)}}function N(t,c){if(1&t){const t=l.kc();l.jc(0,"li"),l.jc(1,"span",46),l.rc("click",(function(c){return l.Mc(t),l.vc(3).openTree(c)})),l.Wc(2),l.ic(),l.jc(3,"ul",44),l.Vc(4,F,2,1,"li",45),l.ic(),l.ic()}if(2&t){const t=c.$implicit,e=l.vc(3);l.Pb(1),l.Bc("ngClass",null!=e.chapter_topics[t.chapterId]&&e.chapter_topics[t.chapterId].length>0?"caret":""),l.Pb(1),l.Yc("",t.chapter," "),l.Pb(2),l.Bc("ngForOf",e.chapter_topics[t.chapterId])}}function L(t,c){if(1&t){const t=l.kc();l.jc(0,"ul",42),l.jc(1,"li"),l.jc(2,"span",43),l.rc("click",(function(c){return l.Mc(t),l.vc(2).openTree(c)})),l.Wc(3),l.ic(),l.jc(4,"ul",44),l.Vc(5,N,5,3,"li",45),l.ic(),l.ic(),l.ic()}if(2&t){const t=l.vc().$implicit,c=l.vc();l.Pb(3),l.Xc(t.subject),l.Pb(2),l.Bc("ngForOf",c.subject_chapters[t.subjectId])}}function $(t,c){if(1&t&&(l.jc(0,"span",47),l.Wc(1),l.ic()),2&t){const t=l.vc().$implicit;l.Pb(1),l.Xc(t.subject)}}function X(t,c){if(1&t&&(l.jc(0,"td",36),l.Vc(1,L,6,2,"ul",40),l.Vc(2,$,2,1,"span",41),l.ic()),2&t){const t=c.$implicit,e=l.vc();l.Pb(1),l.Bc("ngIf",e.subject_chapters[t.subjectId].length>0),l.Pb(1),l.Bc("ngIf",0==e.subject_chapters[t.subjectId].length)}}function z(t,c){1&t&&(l.jc(0,"th",34),l.Wc(1," Action "),l.ic())}function U(t,c){if(1&t){const t=l.kc();l.jc(0,"button",51),l.rc("click",(function(){l.Mc(t);const c=l.vc().$implicit;return l.vc().showEdit(c.subjectId)})),l.jc(1,"mat-icon"),l.Wc(2,"create"),l.ic(),l.ic()}}function J(t,c){if(1&t){const t=l.kc();l.jc(0,"button",52),l.rc("click",(function(){l.Mc(t);const c=l.vc(),e=c.$implicit,i=c.index;return l.vc().showDelete(e.subjectId,e.subject,i)})),l.jc(1,"mat-icon"),l.Wc(2,"delete"),l.ic(),l.ic()}if(2&t){const t=l.vc().$implicit,c=l.vc();l.Bc("disabled",c.subject_chapters[t.subjectId].length>0)}}function H(t,c){if(1&t&&(l.jc(0,"td",48),l.Vc(1,U,3,0,"button",49),l.Wc(2," \xa0"),l.Vc(3,J,3,1,"button",50),l.ic()),2&t){const t=l.vc();l.Pb(1),l.Bc("ngIf",t.permissions.edit_subject),l.Pb(2),l.Bc("ngIf",t.permissions.delete_subject)}}function G(t,c){1&t&&l.ec(0,"tr",53)}function Q(t,c){1&t&&l.ec(0,"tr",54)}function K(t,c){1&t&&(l.jc(0,"div",55),l.Wc(1," No Records Found "),l.ic())}const Y=function(){return[8]};function Z(t,c){1&t&&l.ec(0,"mat-paginator",56),2&t&&l.Bc("pageSizeOptions",l.Cc(1,Y))}function tt(t,c){1&t&&l.ec(0,"add-subject")}function ct(t,c){if(1&t&&l.ec(0,"edit-subject",57),2&t){const t=l.vc();l.Bc("chapters",t.selectedChaptersForEdit)("subjectData",t.subjectDataForEdit)}}const et=function(){return{width:"90%"}},it=function(){return{width:"100%"}};let nt=(()=>{class t{constructor(t,c,e,i,o){this.comm=t,this.coreService=c,this.dialog=e,this.router=i,this.usersService=o,this.loading=!1,this.showAddModal=!1,this.showEditModal=!1,this.treeClass=[],this.openedClass=[],this.subjectname="",this.tableData=[],this.displayedColumns=["srno","subject"],this.dataSource=new n.k(this.tableData),this.selection=new s.c(!0,[]),this.permissions=d.a,this.subject_chapters={},this.chapter_topics={},this.selectedChaptersForEdit=[],this.subjectDataForEdit={subjectId:0,subject:null},this.headerToLoad=this.router.url}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.saveSubjectSubscribe=this.comm.saveSubject.subscribe(t=>{this.showAddModal=!1,this.subjectsData.push({subjectId:t.subjectId,subject:t.subject,chapters:[]}),this.tableData=[],this.subjectsData.forEach(t=>{this.subject_chapters[t.subjectId]=t.chapters,this.tableData.push({subjectId:t.subjectId,subject:t.subject})}),this.setDataSource(),this.dataSource.filter=this.subjectname.trim().toLowerCase()}),this.saveChapterSubscribe=this.comm.saveChapter.subscribe(t=>{this.chapter_topics[t.chapterId]=t.topics}),this.permissions=yield this.usersService.getUserPermissions(),(this.permissions.edit_subject||this.permissions.delete_subject)&&this.displayedColumns.push("action"),this.permissions.delete_subject&&this.displayedColumns.unshift("id"),this.getAllSubjects()}))}getAllSubjects(){this.loading=!0,this.coreService.getRequest(o.a.API_URL+"subjects").subscribe(t=>{this.loading=!1,this.treeClass=new Array(t.length),this.openedClass=new Array(t.length),this.parseSubjectsData(t)})}parseSubjectsData(t){this.subjectsData=t,this.tableData=[],t.forEach(t=>{this.subject_chapters[t.subjectId]=t.chapters,t.chapters.forEach(t=>{this.chapter_topics[t.chapterId]=t.topics}),this.tableData.push({subjectId:t.subjectId,subject:t.subject})}),this.setDataSource()}setDataSource(){this.dataSource=new n.k(this.tableData),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}isAllSelected(){var t=this.selection.selected.length,c=this.dataSource.data.length,e=0;return this.subjectsData.forEach(t=>{t.chapters.length>0&&e++}),t==c-e}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>{0==this.subject_chapters[t.subjectId].length&&this.selection.select(t)})}showEdit(t){this.selectedChaptersForEdit=this.subject_chapters[this.tableData.find(c=>c.subjectId==t).subjectId],this.showEditModal=!0,this.subjectDataForEdit=this.tableData.find(c=>c.subjectId==t)}showDelete(t,c,e){this.dialog.showDialog({title:"Confirm",content:`Are you sure to delete &ldquo;${c}&rdquo;?`,width:"340px",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteSubject(t,e)}})}deleteSubject(t,c){this.coreService.deleteRequest(o.a.API_URL+"subjects/"+t).subscribe(t=>{this.subjectsData.splice(c,1),this.tableData.splice(c,1),this.dataSource=new n.k(this.tableData)})}showMultipleDelete(){this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete these subjects?",width:"340px",callBackButtonColor:"warn",callBackButtonText:"Delete",callBack:()=>{this.deleteMultipleSubjects()}})}deleteMultipleSubjects(){let t=[];this.selection.selected.forEach(c=>{t.push(c.subjectId)}),this.coreService.deleteRequest(o.a.API_URL+"subjects/multiple/"+t).subscribe(()=>{this.subjectsData=this.subjectsData.filter(c=>!t.includes(c.subjectId)),this.tableData=this.tableData.filter(c=>!t.includes(c.subjectId)),this.selection.clear(),this.setDataSource()})}ngOnDestroy(){this.saveSubjectSubscribe.unsubscribe(),this.saveChapterSubscribe.unsubscribe(),this.tableData=[],this.setDataSource()}openTree(t){t.target.parentElement.querySelector(".nested").classList.toggle("active"),t.target.classList.toggle("caret-down")}}return t.\u0275fac=function(c){return new(c||t)(l.dc(u.a),l.dc(h.a),l.dc(p.a),l.dc(b.b),l.dc(g.a))},t.\u0275cmp=l.Xb({type:t,selectors:[["app-subjects-home"]],viewQuery:function(t,c){var e;1&t&&(l.Sc(a.a,!0),l.Sc(r.a,!0)),2&t&&(l.Hc(e=l.sc())&&(c.sort=e.first),l.Hc(e=l.sc())&&(c.paginator=e.first))},decls:50,vars:17,consts:[["id","page-content"],[1,"row","main-row"],[1,"col-lg-6","col-xl-3","search-wrapper"],["id","searchinput","placeholder","Enter Subject Name",1,"input-field",3,"ngModel","keyup","ngModelChange"],["name","ngModel"],[1,"col-lg-5","col-xl-3","right-btns-wrapper"],["mat-raised-button","","class","main-btns",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","class","main-btns",3,"disabled","click",4,"ngIf"],["mat-table","","matSort","",1,"shadow-sm",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srno"],["mat-header-cell","","mat-sort-header","","id","srnocol",4,"matHeaderCellDef"],["matColumnDef","subject"],["mat-header-cell","","mat-sort-header","","id","subjectcol",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-cell","","id","actioncol",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-table",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions",4,"ngIf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body","edit-modal-body"],[4,"ngIf"],[1,"modal-footer"],["mat-raised-button","","color","primary",3,"click"],[3,"chapters","subjectData",4,"ngIf"],[3,"show"],["mat-raised-button","",1,"main-btns",3,"click"],["mat-raised-button","","color","warn",1,"main-btns",3,"disabled","click"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"disabled","checked","click","change"],["mat-header-cell","","mat-sort-header","","id","srnocol"],["mat-header-cell","","mat-sort-header","","id","subjectcol"],["class","tree",4,"ngIf"],["class","single-subject",4,"ngIf"],[1,"tree"],[1,"caret",3,"click"],[1,"nested"],[4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"single-subject"],["mat-cell","","id","actioncol"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"empty-table"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"chapters","subjectData"]],template:function(t,c){1&t&&(l.ec(0,"admin-header"),l.ec(1,"admin-sidebar"),l.jc(2,"div",0),l.jc(3,"div",1),l.jc(4,"div",2),l.jc(5,"input",3,4),l.rc("keyup",(function(){return c.dataSource.filter=c.subjectname.trim().toLowerCase()}))("ngModelChange",(function(t){return c.subjectname=t})),l.ic(),l.ic(),l.jc(7,"div",5),l.Vc(8,W,4,0,"button",6),l.Vc(9,A,4,1,"button",7),l.ic(),l.ic(),l.jc(10,"table",8),l.hc(11,9),l.Vc(12,E,2,2,"th",10),l.Vc(13,V,2,2,"td",11),l.gc(),l.hc(14,12),l.Vc(15,T,2,0,"th",13),l.Vc(16,q,2,1,"td",11),l.gc(),l.hc(17,14),l.Vc(18,R,2,0,"th",15),l.Vc(19,X,3,2,"td",11),l.gc(),l.hc(20,16),l.Vc(21,z,2,0,"th",10),l.Vc(22,H,4,2,"td",17),l.gc(),l.Vc(23,G,1,0,"tr",18),l.Vc(24,Q,1,0,"tr",19),l.ic(),l.Vc(25,K,2,0,"div",20),l.Vc(26,Z,1,2,"mat-paginator",21),l.ic(),l.jc(27,"div",22),l.jc(28,"div",23),l.jc(29,"div",24),l.Wc(30,"Add Subject"),l.ic(),l.jc(31,"div",25),l.rc("click",(function(){return c.showAddModal=!1})),l.Wc(32,"\xd7"),l.ic(),l.jc(33,"div",26),l.Vc(34,tt,1,0,"add-subject",27),l.ic(),l.jc(35,"div",28),l.jc(36,"button",29),l.rc("click",(function(){return c.showAddModal=!1})),l.Wc(37,"Close"),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(38,"div",22),l.jc(39,"div",23),l.jc(40,"div",24),l.Wc(41,"Edit Subject"),l.ic(),l.jc(42,"div",25),l.rc("click",(function(){return c.showEditModal=!1})),l.Wc(43,"\xd7"),l.ic(),l.jc(44,"div",26),l.Vc(45,ct,1,2,"edit-subject",30),l.ic(),l.jc(46,"div",28),l.jc(47,"button",29),l.rc("click",(function(){return c.showEditModal=!1})),l.Wc(48,"Close"),l.ic(),l.ic(),l.ic(),l.ic(),l.ec(49,"loading",31)),2&t&&(l.Pb(5),l.Bc("ngModel",c.subjectname),l.Pb(3),l.Bc("ngIf",c.permissions.add_subject),l.Pb(1),l.Bc("ngIf",c.permissions.delete_subject),l.Pb(1),l.Bc("dataSource",c.dataSource),l.Pb(13),l.Bc("matHeaderRowDef",c.displayedColumns),l.Pb(1),l.Bc("matRowDefColumns",c.displayedColumns),l.Pb(1),l.Bc("ngIf",0==c.dataSource.filteredData.length),l.Pb(1),l.Bc("ngIf",c.dataSource.filteredData.length>0&&c.dataSource.data.length>0),l.Pb(1),l.Bc("show",c.showAddModal)("options",l.Cc(15,et)),l.Pb(7),l.Bc("ngIf",c.showAddModal),l.Pb(4),l.Bc("show",c.showEditModal)("options",l.Cc(16,it)),l.Pb(7),l.Bc("ngIf",c.showEditModal),l.Pb(4),l.Bc("show",c.loading))},directives:[m.a,f.a,j.b,j.k,j.n,w.k,n.j,a.a,n.c,n.e,n.b,n.g,n.i,v.a,x.b,C.a,M.a,n.d,P.a,n.a,a.b,w.j,w.i,n.f,n.h,r.a,O,B],styles:["#instructions[_ngcontent-%COMP%]{background-color:#feffa0;padding-right:10px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:20px 10px;border-bottom:1px solid #888;font-weight:400;color:#333;font-size:15px;margin-left:45px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.material-icons[_ngcontent-%COMP%]{position:absolute;left:-30px}#instructions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}",'table[_ngcontent-%COMP%]{width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}#subjectcol[_ngcontent-%COMP%]{width:80%}.empty-table[_ngcontent-%COMP%]{min-height:400px;background:#fff;font-size:1.2em;display:flex;justify-content:center;align-items:center}.main-row[_ngcontent-%COMP%]{padding:15px 0;margin-bottom:15px;justify-content:space-between}.right-btns-wrapper[_ngcontent-%COMP%], .search-wrapper[_ngcontent-%COMP%]{text-align:right;display:flex;justify-content:space-between;align-items:center}.main-btns[_ngcontent-%COMP%]{width:calc(50% - 5px)}.single-subject[_ngcontent-%COMP%]{color:#666;font-size:.9em}.opened[_ngcontent-%COMP%]{margin-top:13px}#myUL[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style-type:none}.tree[_ngcontent-%COMP%]{margin:0;padding:0}.tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:15px}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#666;font-weight:400;font-size:.9em}.caret[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative}.caret[_ngcontent-%COMP%]:before{position:absolute;left:-15px;content:"\\271A";color:#000;display:inline-block;margin-right:6px}.caret-down[_ngcontent-%COMP%]:before{content:"\\268A"}.nested[_ngcontent-%COMP%]{display:none}.active[_ngcontent-%COMP%]{display:block}.edit-modal-body[_ngcontent-%COMP%]{background-color:#fff}@media screen and (max-width:1200px){#subjectcol[_ngcontent-%COMP%]{width:70%}}@media screen and (max-width:1000px){.main-row[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:15px}.right-btns-wrapper[_ngcontent-%COMP%]{text-align:left}#searchinput[_ngcontent-%COMP%]{margin-bottom:10px}}@media screen and (max-width:800px){#subjectcol[_ngcontent-%COMP%]{width:60%}}@media screen and (max-width:600px){#subjectcol[_ngcontent-%COMP%]{width:auto}#srnocol[_ngcontent-%COMP%]{width:30px}#actioncol[_ngcontent-%COMP%]{width:120px}.action[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}']}),t})()}}]);