(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{XPJw:function(e,t,c){"use strict";c.r(t),c.d(t,"FeaturesModule",(function(){return I}));var i=c("ofXK"),a=c("n+G7"),n=c("tyNb"),s=c("SP9e"),r=c("fXoL"),o=c("FM/7"),u=c("QeEr"),d=c("aCk2"),l=c("G0I0"),m=c("1jcm"),g=c("3Pt+"),f=c("kmnG"),p=c("qFsG"),h=c("bTqV"),b=c("ZMsq"),j=c("NFeN");let F=(()=>{class e{constructor(e,t){this.cms=e,this.dialog=t}ngOnInit(){}setSelectedImage(e){this.selectedImage=e.target.files[0]}updateFeature(e){let t=new FormData;t.append("image",this.selectedImage),t.append("id",this.feature.id+"");for(let c in e)t.append(c,e[c]);this.cms.updateFeature(t).subscribe(e=>{e.success&&(this.modal.editFeatureModal=!1),this.dialog.showDialog({content:e.message})})}}return e.\u0275fac=function(t){return new(t||e)(r.dc(o.a),r.dc(u.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["edit-feature"]],inputs:{modal:"modal",feature:"feature"},decls:16,vars:2,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title",3,"ngModel","ngModelChange"],["matInput","","name","description",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(e,t){if(1&e){const e=r.kc();r.jc(0,"form",0,1),r.rc("ngSubmit",(function(){r.Mc(e);const c=r.Ic(1);return t.updateFeature(c.value)})),r.jc(2,"mat-form-field"),r.jc(3,"mat-label"),r.Wc(4,"Title"),r.ic(),r.jc(5,"input",2),r.rc("ngModelChange",(function(e){return t.feature.title=e})),r.ic(),r.ic(),r.jc(6,"mat-form-field"),r.jc(7,"mat-label"),r.Wc(8,"Description"),r.ic(),r.jc(9,"textarea",3),r.rc("ngModelChange",(function(e){return t.feature.description=e})),r.ic(),r.ic(),r.jc(10,"div",4),r.jc(11,"div",5),r.jc(12,"input",6),r.rc("change",(function(e){return t.setSelectedImage(e)})),r.ic(),r.ic(),r.jc(13,"div",5),r.jc(14,"button",7),r.Wc(15,"Submit"),r.ic(),r.ic(),r.ic(),r.ic()}2&e&&(r.Pb(5),r.Bc("ngModel",t.feature.title),r.Pb(4),r.Bc("ngModel",t.feature.description))},directives:[g.v,g.l,g.m,f.b,f.e,p.a,g.b,g.k,g.n,h.b],styles:[""]}),e})();function v(e,t){if(1&e){const e=r.kc();r.jc(0,"tr"),r.jc(1,"td"),r.ec(2,"img",22),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.jc(7,"td"),r.jc(8,"button",23),r.rc("click",(function(){r.Mc(e);const c=t.$implicit;return r.vc().setActiveFeature(c)})),r.jc(9,"mat-icon"),r.Wc(10,"create"),r.ic(),r.ic(),r.Wc(11,"\xa0 "),r.jc(12,"button",24),r.rc("click",(function(){r.Mc(e);const c=t.$implicit;return r.vc().deleteFeature(c.id)})),r.jc(13,"mat-icon"),r.Wc(14,"delete"),r.ic(),r.ic(),r.ic(),r.ic()}if(2&e){const e=t.$implicit,c=r.vc();r.Pb(2),r.Bc("src",c.WEBSITE_URL+"uploads/features/"+e.image,r.Pc),r.Pb(2),r.Xc(e.title),r.Pb(2),r.Xc(e.description)}}function M(e,t){if(1&e&&r.ec(0,"edit-feature",25),2&e){const e=r.vc();r.Bc("feature",e.activeFeature)("modal",e.modal)}}const w=function(){return{width:"60%"}},S=[{path:"",component:(()=>{class e{constructor(e,t){this.cms=e,this.dialog=t,this.WEBSITE_URL=s.a.WEBSITE_URL,this.features=[],this.modal={editFeatureModal:!1}}ngOnInit(){this.getFeatures(),this.getCMSStatus()}getCMSStatus(){this.cms.getCMSStatus("features").subscribe(e=>{this.showFeatures=e.status})}getFeatures(){this.cms.getActiveFeatures().subscribe(e=>{this.features=e})}setActiveFeature(e){this.activeFeature=e,this.modal.editFeatureModal=!0}setSelectedImage(e){this.selectedImage=e.target.files[0]}uploadFeature(e){let t=new FormData;t.append("image",this.selectedImage);for(let c in e)t.append(c,e[c]);this.cms.uploadFeature(t).subscribe(e=>{e.success&&this.features.unshift(e.feature),this.dialog.showDialog({content:e.message})})}deleteFeature(e){this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this feature?",callBack:()=>{this.cms.deleteFeature(e).subscribe(t=>{t.success&&this.features.splice(this.features.indexOf(this.features.find(t=>t.id==e)),1)})}})}changeStatus(){this.cms.changeCMSStatus("features",this.showFeatures).subscribe(()=>{})}}return e.\u0275fac=function(t){return new(t||e)(r.dc(o.a),r.dc(u.a))},e.\u0275cmp=r.Xb({type:e,selectors:[["app-upload-features"]],decls:45,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","title","ngModel",""],["matInput","","name","description","ngModel",""],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"feature","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"feature","modal"]],template:function(e,t){if(1&e){const e=r.kc();r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.Wc(4,"Upload Feature "),r.jc(5,"mat-slide-toggle",2),r.rc("ngModelChange",(function(e){return t.showFeatures=e}))("change",(function(){return t.changeStatus()})),r.ic(),r.ic(),r.jc(6,"div",3),r.jc(7,"form",4,5),r.rc("ngSubmit",(function(){r.Mc(e);const c=r.Ic(8);return t.uploadFeature(c.value)})),r.jc(9,"mat-form-field"),r.jc(10,"mat-label"),r.Wc(11,"Title"),r.ic(),r.ec(12,"input",6),r.ic(),r.jc(13,"mat-form-field"),r.jc(14,"mat-label"),r.Wc(15,"Description"),r.ic(),r.ec(16,"textarea",7),r.ic(),r.jc(17,"div",8),r.jc(18,"div",9),r.jc(19,"input",10),r.rc("change",(function(e){return t.setSelectedImage(e)})),r.ic(),r.ic(),r.jc(20,"div",9),r.jc(21,"button",11),r.Wc(22,"Submit"),r.ic(),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(23,"div",12),r.jc(24,"div",13),r.Wc(25,"Active Features"),r.ic(),r.jc(26,"table",14),r.jc(27,"tr"),r.jc(28,"th"),r.Wc(29,"Image"),r.ic(),r.jc(30,"th"),r.Wc(31,"Title"),r.ic(),r.jc(32,"th"),r.Wc(33,"Description"),r.ic(),r.jc(34,"th"),r.Wc(35,"Action"),r.ic(),r.ic(),r.Vc(36,v,15,3,"tr",15),r.ic(),r.ic(),r.jc(37,"div",16),r.jc(38,"div",17),r.jc(39,"div",18),r.Wc(40,"Edit Feature"),r.ic(),r.jc(41,"div",19),r.rc("click",(function(){return t.modal.editFeatureModal=!1})),r.Wc(42,"\xd7"),r.ic(),r.jc(43,"div",20),r.Vc(44,M,1,2,"edit-feature",21),r.ic(),r.ic(),r.ic()}2&e&&(r.Pb(5),r.Bc("ngModel",t.showFeatures),r.Pb(31),r.Bc("ngForOf",t.features),r.Pb(1),r.Bc("show",t.modal.editFeatureModal)("options",r.Cc(5,w)),r.Pb(7),r.Bc("ngIf",t.modal.editFeatureModal))},directives:[d.a,l.a,m.a,g.k,g.n,g.v,g.l,g.m,f.b,f.e,p.a,g.b,h.b,i.j,b.a,i.k,j.a,F],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=r.bc({type:e}),e.\u0275inj=r.ac({factory:function(t){return new(t||e)},imports:[[i.c,a.a,n.f.forChild(S)]]}),e})()}}]);