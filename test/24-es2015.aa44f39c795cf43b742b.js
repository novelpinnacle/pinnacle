(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"2P24":function(e,t,c){"use strict";c.r(t),c.d(t,"ToppersModule",(function(){return k}));var i=c("ofXK"),o=c("tyNb"),a=c("n+G7"),n=c("SP9e"),s=c("fXoL"),r=c("FM/7"),p=c("QeEr"),l=c("aCk2"),d=c("G0I0"),m=c("1jcm"),u=c("3Pt+"),g=c("kmnG"),h=c("qFsG"),f=c("bTqV"),b=c("ZMsq"),j=c("NFeN");let M=(()=>{class e{constructor(e,t){this.cms=e,this.dialog=t}ngOnInit(){}setSelectedImage(e){this.selectedImage=e.target.files[0]}updateTopper(e){let t=new FormData;t.append("image",this.selectedImage),t.append("id",this.topper.id+"");for(let c in e)t.append(c,e[c]);this.cms.updateTopper(t).subscribe(e=>{e.success&&(this.modal.editTopperModal=!1),this.dialog.showDialog({content:e.message})})}}return e.\u0275fac=function(t){return new(t||e)(s.dc(r.a),s.dc(p.a))},e.\u0275cmp=s.Xb({type:e,selectors:[["edit-topper"]],inputs:{modal:"modal",topper:"topper"},decls:20,vars:3,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name",3,"ngModel","ngModelChange"],["matInput","","name","classdetails",3,"ngModel","ngModelChange"],["matInput","","name","marks",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(e,t){if(1&e){const e=s.kc();s.jc(0,"form",0,1),s.rc("ngSubmit",(function(){s.Mc(e);const c=s.Ic(1);return t.updateTopper(c.value)})),s.jc(2,"mat-form-field"),s.jc(3,"mat-label"),s.Wc(4,"Name"),s.ic(),s.jc(5,"input",2),s.rc("ngModelChange",(function(e){return t.topper.name=e})),s.ic(),s.ic(),s.jc(6,"mat-form-field"),s.jc(7,"mat-label"),s.Wc(8,"Class Details"),s.ic(),s.jc(9,"textarea",3),s.rc("ngModelChange",(function(e){return t.topper.classdetails=e})),s.ic(),s.ic(),s.jc(10,"mat-form-field"),s.jc(11,"mat-label"),s.Wc(12,"Marks"),s.ic(),s.jc(13,"input",4),s.rc("ngModelChange",(function(e){return t.topper.marks=e})),s.ic(),s.ic(),s.jc(14,"div",5),s.jc(15,"div",6),s.jc(16,"input",7),s.rc("change",(function(e){return t.setSelectedImage(e)})),s.ic(),s.ic(),s.jc(17,"div",6),s.jc(18,"button",8),s.Wc(19,"Submit"),s.ic(),s.ic(),s.ic(),s.ic()}2&e&&(s.Pb(5),s.Bc("ngModel",t.topper.name),s.Pb(4),s.Bc("ngModel",t.topper.classdetails),s.Pb(4),s.Bc("ngModel",t.topper.marks))},directives:[u.v,u.l,u.m,g.b,g.e,h.a,u.b,u.k,u.n,f.b],styles:[""]}),e})();function v(e,t){if(1&e){const e=s.kc();s.jc(0,"tr"),s.jc(1,"td"),s.ec(2,"img",23),s.ic(),s.jc(3,"td"),s.Wc(4),s.ic(),s.jc(5,"td"),s.Wc(6),s.ic(),s.jc(7,"td"),s.Wc(8),s.ic(),s.jc(9,"td"),s.jc(10,"button",24),s.rc("click",(function(){s.Mc(e);const c=t.$implicit;return s.vc().setActiveTopper(c)})),s.jc(11,"mat-icon"),s.Wc(12,"create"),s.ic(),s.ic(),s.Wc(13,"\xa0 "),s.jc(14,"button",25),s.rc("click",(function(){s.Mc(e);const c=t.$implicit;return s.vc().deleteTopper(c.id)})),s.jc(15,"mat-icon"),s.Wc(16,"delete"),s.ic(),s.ic(),s.ic(),s.ic()}if(2&e){const e=t.$implicit,c=s.vc();s.Pb(2),s.Bc("src",c.WEBSITE_URL+"uploads/toppers/"+e.image,s.Pc),s.Pb(2),s.Xc(e.name),s.Pb(2),s.Xc(e.classdetails),s.Pb(2),s.Xc(e.marks)}}function T(e,t){if(1&e&&s.ec(0,"edit-topper",26),2&e){const e=s.vc();s.Bc("topper",e.activeTopper)("modal",e.modal)}}const w=function(){return{width:"60%"}},W=[{path:"",component:(()=>{class e{constructor(e,t){this.cms=e,this.dialog=t,this.WEBSITE_URL=n.a.WEBSITE_URL,this.toppers=[],this.modal={editTopperModal:!1}}ngOnInit(){this.getToppers(),this.getCMSStatus()}getCMSStatus(){this.cms.getCMSStatus("toppers").subscribe(e=>{this.showToppers=e.status})}getToppers(){this.cms.getActiveToppers().subscribe(e=>{this.toppers=e})}setActiveTopper(e){this.activeTopper=e,this.modal.editTopperModal=!0}setSelectedImage(e){this.selectedImage=e.target.files[0]}uploadTopper(e){let t=new FormData;t.append("image",this.selectedImage);for(let c in e)t.append(c,e[c]);this.cms.uploadTopper(t).subscribe(e=>{e.success&&this.toppers.unshift(e.topper),this.dialog.showDialog({content:e.message})})}deleteTopper(e){this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this topper?",callBack:()=>{this.cms.deleteTopper(e).subscribe(t=>{t.success&&this.toppers.splice(this.toppers.indexOf(this.toppers.find(t=>t.id==e)),1)})}})}changeStatus(){this.cms.changeCMSStatus("toppers",this.showToppers).subscribe(()=>{})}}return e.\u0275fac=function(t){return new(t||e)(s.dc(r.a),s.dc(p.a))},e.\u0275cmp=s.Xb({type:e,selectors:[["app-upload-toppers"]],decls:51,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name","ngModel",""],["matInput","","name","classdetails","ngModel",""],["matInput","","name","marks","ngModel",""],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"topper","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"topper","modal"]],template:function(e,t){if(1&e){const e=s.kc();s.ec(0,"admin-header"),s.ec(1,"admin-sidebar"),s.jc(2,"div",0),s.jc(3,"div",1),s.Wc(4,"Upload Topper "),s.jc(5,"mat-slide-toggle",2),s.rc("ngModelChange",(function(e){return t.showToppers=e}))("change",(function(){return t.changeStatus()})),s.ic(),s.ic(),s.jc(6,"div",3),s.jc(7,"form",4,5),s.rc("ngSubmit",(function(){s.Mc(e);const c=s.Ic(8);return t.uploadTopper(c.value)})),s.jc(9,"mat-form-field"),s.jc(10,"mat-label"),s.Wc(11,"Name"),s.ic(),s.ec(12,"input",6),s.ic(),s.jc(13,"mat-form-field"),s.jc(14,"mat-label"),s.Wc(15,"Class Details"),s.ic(),s.ec(16,"textarea",7),s.ic(),s.jc(17,"mat-form-field"),s.jc(18,"mat-label"),s.Wc(19,"Marks"),s.ic(),s.ec(20,"input",8),s.ic(),s.jc(21,"div",9),s.jc(22,"div",10),s.jc(23,"input",11),s.rc("change",(function(e){return t.setSelectedImage(e)})),s.ic(),s.ic(),s.jc(24,"div",10),s.jc(25,"button",12),s.Wc(26,"Submit"),s.ic(),s.ic(),s.ic(),s.ic(),s.ic(),s.ec(27,"div",13),s.jc(28,"div",14),s.Wc(29,"Active Toppers"),s.ic(),s.jc(30,"table",15),s.jc(31,"tr"),s.jc(32,"th"),s.Wc(33,"Image"),s.ic(),s.jc(34,"th"),s.Wc(35,"Name"),s.ic(),s.jc(36,"th"),s.Wc(37,"Class Details"),s.ic(),s.jc(38,"th"),s.Wc(39,"Marks"),s.ic(),s.jc(40,"th"),s.Wc(41,"Action"),s.ic(),s.ic(),s.Vc(42,v,17,4,"tr",16),s.ic(),s.ic(),s.jc(43,"div",17),s.jc(44,"div",18),s.jc(45,"div",19),s.Wc(46,"Edit Topper"),s.ic(),s.jc(47,"div",20),s.rc("click",(function(){return t.modal.editTopperModal=!1})),s.Wc(48,"\xd7"),s.ic(),s.jc(49,"div",21),s.Vc(50,T,1,2,"edit-topper",22),s.ic(),s.ic(),s.ic()}2&e&&(s.Pb(5),s.Bc("ngModel",t.showToppers),s.Pb(37),s.Bc("ngForOf",t.toppers),s.Pb(1),s.Bc("show",t.modal.editTopperModal)("options",s.Cc(5,w)),s.Pb(7),s.Bc("ngIf",t.modal.editTopperModal))},directives:[l.a,d.a,m.a,u.k,u.n,u.v,u.l,u.m,g.b,g.e,h.a,u.b,f.b,i.j,b.a,i.k,j.a,M],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=s.bc({type:e}),e.\u0275inj=s.ac({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.f.forChild(W)]]}),e})()}}]);