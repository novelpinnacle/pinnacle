(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"3VD/":function(t,i,e){"use strict";e.r(i),e.d(i,"TestimonialsModule",(function(){return I}));var c=e("ofXK"),n=e("n+G7"),a=e("tyNb"),o=e("SP9e"),s=e("fXoL"),l=e("FM/7"),m=e("QeEr"),d=e("aCk2"),r=e("G0I0"),g=e("1jcm"),u=e("3Pt+"),p=e("kmnG"),h=e("qFsG"),f=e("d3UM"),j=e("FKr1"),b=e("bTqV"),v=e("ZMsq"),M=e("NFeN");let T=(()=>{class t{constructor(t,i){this.cms=t,this.dialog=i}ngOnInit(){}setSelectedImage(t){this.selectedImage=t.target.files[0]}updateTestimonial(t){let i=new FormData;i.append("image",this.selectedImage),i.append("id",this.testimonial.id+"");for(let e in t)i.append(e,t[e]);this.cms.updateTestimonial(i).subscribe(t=>{t.success&&(this.modal.editTestimonialModal=!1),this.dialog.showDialog({content:t.message})})}}return t.\u0275fac=function(i){return new(i||t)(s.dc(l.a),s.dc(m.a))},t.\u0275cmp=s.Xb({type:t,selectors:[["edit-testimonial"]],inputs:{modal:"modal",testimonial:"testimonial"},decls:24,vars:3,consts:[[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name",3,"ngModel","ngModelChange"],["matInput","","name","description",3,"ngModel","ngModelChange"],["name","category",3,"ngModel","ngModelChange"],["value","s"],["value","p"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"]],template:function(t,i){if(1&t){const t=s.kc();s.jc(0,"form",0,1),s.rc("ngSubmit",(function(){s.Mc(t);const e=s.Ic(1);return i.updateTestimonial(e.value)})),s.jc(2,"mat-form-field"),s.jc(3,"mat-label"),s.Wc(4,"Name"),s.ic(),s.jc(5,"input",2),s.rc("ngModelChange",(function(t){return i.testimonial.name=t})),s.ic(),s.ic(),s.jc(6,"mat-form-field"),s.jc(7,"mat-label"),s.Wc(8,"Description"),s.ic(),s.jc(9,"textarea",3),s.rc("ngModelChange",(function(t){return i.testimonial.description=t})),s.ic(),s.ic(),s.jc(10,"mat-form-field"),s.jc(11,"mat-label"),s.Wc(12,"Select Category"),s.ic(),s.jc(13,"mat-select",4),s.rc("ngModelChange",(function(t){return i.testimonial.category=t})),s.jc(14,"mat-option",5),s.Wc(15,"Student"),s.ic(),s.jc(16,"mat-option",6),s.Wc(17,"Parent"),s.ic(),s.ic(),s.ic(),s.jc(18,"div",7),s.jc(19,"div",8),s.jc(20,"input",9),s.rc("change",(function(t){return i.setSelectedImage(t)})),s.ic(),s.ic(),s.jc(21,"div",8),s.jc(22,"button",10),s.Wc(23,"Submit"),s.ic(),s.ic(),s.ic(),s.ic()}2&t&&(s.Pb(5),s.Bc("ngModel",i.testimonial.name),s.Pb(4),s.Bc("ngModel",i.testimonial.description),s.Pb(4),s.Bc("ngModel",i.testimonial.category))},directives:[u.v,u.l,u.m,p.b,p.e,h.a,u.b,u.k,u.n,f.a,j.h,b.b],styles:[""]}),t})();function W(t,i){if(1&t){const t=s.kc();s.jc(0,"tr"),s.jc(1,"td"),s.ec(2,"img",25),s.ic(),s.jc(3,"td"),s.Wc(4),s.ic(),s.jc(5,"td"),s.Wc(6),s.ic(),s.jc(7,"td"),s.Wc(8),s.ic(),s.jc(9,"td"),s.jc(10,"button",26),s.rc("click",(function(){s.Mc(t);const e=i.$implicit;return s.vc().setActiveTestimonial(e)})),s.jc(11,"mat-icon"),s.Wc(12,"create"),s.ic(),s.ic(),s.Wc(13,"\xa0 "),s.jc(14,"button",27),s.rc("click",(function(){s.Mc(t);const e=i.$implicit;return s.vc().deleteTestimonial(e.id)})),s.jc(15,"mat-icon"),s.Wc(16,"delete"),s.ic(),s.ic(),s.ic(),s.ic()}if(2&t){const t=i.$implicit,e=s.vc();s.Pb(2),s.Bc("src",e.WEBSITE_URL+"uploads/testimonials/"+t.image,s.Pc),s.Pb(2),s.Xc(t.name),s.Pb(2),s.Xc(t.description),s.Pb(2),s.Xc(t.category)}}function S(t,i){if(1&t&&s.ec(0,"edit-testimonial",28),2&t){const t=s.vc();s.Bc("testimonial",t.activeTestimonial)("modal",t.modal)}}const w=function(){return{width:"60%"}},y=[{path:"",component:(()=>{class t{constructor(t,i){this.cms=t,this.dialog=i,this.WEBSITE_URL=o.a.WEBSITE_URL,this.testimonials=[],this.modal={editTestimonialModal:!1}}ngOnInit(){this.getTestimonials(),this.getCMSStatus()}getCMSStatus(){this.cms.getCMSStatus("testimonials").subscribe(t=>{this.showTestimonials=t.status})}getTestimonials(){this.cms.getActiveTestimonials().subscribe(t=>{this.testimonials=t})}setActiveTestimonial(t){this.activeTestimonial=t,this.modal.editTestimonialModal=!0}setSelectedImage(t){this.selectedImage=t.target.files[0]}uploadTestimonial(t){let i=new FormData;i.append("image",this.selectedImage);for(let e in t)i.append(e,t[e]);this.cms.uploadTestimonial(i).subscribe(t=>{t.success&&this.testimonials.unshift(t.testimonial),this.dialog.showDialog({content:t.message})})}deleteTestimonial(t){this.dialog.showDialog({title:"Confirm",content:"Are you sure to delete this Testimonial?",callBack:()=>{this.cms.deleteTestimonial(t).subscribe(i=>{i.success&&this.testimonials.splice(this.testimonials.indexOf(this.testimonials.find(i=>i.id==t)),1)})}})}changeStatus(){this.cms.changeCMSStatus("testimonials",this.showTestimonials).subscribe(()=>{})}}return t.\u0275fac=function(i){return new(i||t)(s.dc(l.a),s.dc(m.a))},t.\u0275cmp=s.Xb({type:t,selectors:[["app-upload-results"]],decls:55,vars:6,consts:[["id","page-content"],[1,"content-title","row","justify-content-between"],[3,"ngModel","ngModelChange","change"],[1,"content-box"],[3,"ngSubmit"],["form","ngForm"],["matInput","","name","name","ngModel",""],["matInput","","name","description","ngModel",""],["name","category","ngModel",""],["value","s"],["value","p"],[1,"row"],[1,"col-sm-6"],["type","file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["mat-raised-button","","color","primary"],[2,"height","20px"],[1,"content-title"],[1,"pinnacle-table"],[4,"ngFor","ngForOf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[3,"testimonial","modal",4,"ngIf"],[3,"src"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"testimonial","modal"]],template:function(t,i){if(1&t){const t=s.kc();s.ec(0,"admin-header"),s.ec(1,"admin-sidebar"),s.jc(2,"div",0),s.jc(3,"div",1),s.Wc(4,"Upload Testimonial "),s.jc(5,"mat-slide-toggle",2),s.rc("ngModelChange",(function(t){return i.showTestimonials=t}))("change",(function(){return i.changeStatus()})),s.ic(),s.ic(),s.jc(6,"div",3),s.jc(7,"form",4,5),s.rc("ngSubmit",(function(){s.Mc(t);const e=s.Ic(8);return i.uploadTestimonial(e.value)})),s.jc(9,"mat-form-field"),s.jc(10,"mat-label"),s.Wc(11,"Name"),s.ic(),s.ec(12,"input",6),s.ic(),s.jc(13,"mat-form-field"),s.jc(14,"mat-label"),s.Wc(15,"Description"),s.ic(),s.ec(16,"textarea",7),s.ic(),s.jc(17,"mat-form-field"),s.jc(18,"mat-label"),s.Wc(19,"Select Category"),s.ic(),s.jc(20,"mat-select",8),s.jc(21,"mat-option",9),s.Wc(22,"Student"),s.ic(),s.jc(23,"mat-option",10),s.Wc(24,"Parent"),s.ic(),s.ic(),s.ic(),s.jc(25,"div",11),s.jc(26,"div",12),s.jc(27,"input",13),s.rc("change",(function(t){return i.setSelectedImage(t)})),s.ic(),s.ic(),s.jc(28,"div",12),s.jc(29,"button",14),s.Wc(30,"Submit"),s.ic(),s.ic(),s.ic(),s.ic(),s.ic(),s.ec(31,"div",15),s.jc(32,"div",16),s.Wc(33,"Active Testimonials"),s.ic(),s.jc(34,"table",17),s.jc(35,"tr"),s.jc(36,"th"),s.Wc(37,"Image"),s.ic(),s.jc(38,"th"),s.Wc(39,"Name"),s.ic(),s.jc(40,"th"),s.Wc(41,"Description"),s.ic(),s.jc(42,"th"),s.Wc(43,"Category"),s.ic(),s.jc(44,"th"),s.Wc(45,"Action"),s.ic(),s.ic(),s.Vc(46,W,17,4,"tr",18),s.ic(),s.ic(),s.jc(47,"div",19),s.jc(48,"div",20),s.jc(49,"div",21),s.Wc(50,"Edit Testimonial"),s.ic(),s.jc(51,"div",22),s.rc("click",(function(){return i.modal.editTestimonialModal=!1})),s.Wc(52,"\xd7"),s.ic(),s.jc(53,"div",23),s.Vc(54,S,1,2,"edit-testimonial",24),s.ic(),s.ic(),s.ic()}2&t&&(s.Pb(5),s.Bc("ngModel",i.showTestimonials),s.Pb(41),s.Bc("ngForOf",i.testimonials),s.Pb(1),s.Bc("show",i.modal.editTestimonialModal)("options",s.Cc(5,w)),s.Pb(7),s.Bc("ngIf",i.modal.editTestimonialModal))},directives:[d.a,r.a,g.a,u.k,u.n,u.v,u.l,u.m,p.b,p.e,h.a,u.b,f.a,j.h,b.b,c.j,v.a,c.k,M.a,T],styles:["td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}"]}),t})()}];let I=(()=>{class t{}return t.\u0275mod=s.bc({type:t}),t.\u0275inj=s.ac({factory:function(i){return new(i||t)},imports:[[c.c,n.a,a.f.forChild(y)]]}),t})()}}]);