function _classCallCheck(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}function _createClass(c,e,t){return e&&_defineProperties(c.prototype,e),t&&_defineProperties(c,t),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ehjs:function(c,e,t){"use strict";t.r(e),t.d(e,"ManageAssignmentsModule",(function(){return tc}));var i=t("tyNb"),n=t("n+G7"),s=t("mrSG"),a=t("SP9e"),o=t("byUP"),r=t("fXoL"),u=t("4KEQ"),l=t("QeEr"),d=t("FnMX"),b=t("aCk2"),h=t("G0I0"),g=t("3Pt+"),f=t("ofXK"),m=t("bTqV"),j=t("ZMsq"),v=t("V/o5"),p=t("NFeN"),I=t("kmnG"),M=t("qFsG"),P=t("d3UM"),C=t("FKr1");function k(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.courseId),r.Pb(1),r.Yc("",t.course," ")}}function B(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.batchId),r.Pb(1),r.Xc(t.batch)}}function w(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.subjectId),r.Pb(1),r.Xc(t.subject)}}function _(c,e){if(1&c){var t=r.kc();r.jc(0,"button",21),r.rc("click",(function(c){r.Mc(t);var e=r.vc().index,i=r.vc();return c.preventDefault(),i.removeItem(e)})),r.jc(1,"mat-icon"),r.Wc(2,"remove"),r.ic(),r.ic()}}function y(c,e){if(1&c){var t=r.kc();r.jc(0,"div",12),r.jc(1,"div",9),r.jc(2,"mat-form-field"),r.jc(3,"mat-label"),r.Wc(4,"Select Course"),r.ic(),r.jc(5,"mat-select",13),r.rc("selectionChange",(function(){r.Mc(t);var c=e.$implicit,i=e.index;return r.vc().setBatches(c.courseId,i)}))("ngModelChange",(function(c){return r.Mc(t),e.$implicit.courseId=c})),r.Vc(6,k,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(7,"div",9),r.jc(8,"mat-form-field"),r.jc(9,"mat-label"),r.Wc(10,"Select Batch"),r.ic(),r.jc(11,"mat-select",15),r.rc("ngModelChange",(function(c){return r.Mc(t),e.$implicit.batchId=c}))("selectionChange",(function(){r.Mc(t);var c=e.$implicit,i=e.index;return r.vc().setSubjects(c.batchId,i)})),r.Vc(12,B,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(13,"div",9),r.jc(14,"mat-form-field"),r.jc(15,"mat-label"),r.Wc(16,"Select Subject"),r.ic(),r.jc(17,"mat-select",16),r.rc("ngModelChange",(function(c){return r.Mc(t),e.$implicit.subjectId=c})),r.Vc(18,w,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(19,"div",17),r.jc(20,"button",18),r.rc("click",(function(c){r.Mc(t);var e=r.vc();return c.preventDefault(),e.addMore()})),r.jc(21,"mat-icon"),r.Wc(22,"add"),r.ic(),r.ic(),r.Vc(23,_,3,0,"button",19),r.ic(),r.ic()}if(2&c){var i=e.$implicit,n=e.index;r.Pb(5),r.Bc("name","courseId"+n)("ngModel",i.courseId),r.Pb(1),r.Bc("ngForOf",i.courses),r.Pb(5),r.Bc("ngModel",i.batchId)("name","batchId"+n),r.Pb(1),r.Bc("ngForOf",i.batches),r.Pb(5),r.Bc("name","subjectId"+n)("ngModel",i.subjectId),r.Pb(1),r.Bc("ngForOf",i.subjects),r.Pb(5),r.Bc("ngIf",n>0)}}var S,W=((S=function(){function c(e,t){_classCallCheck(this,c),this.coreService=e,this.dialog=t,this.courses=[],this.batches_subjects=[],this.subjectsData=[{subjectId:null,subjects:[],courseId:null,courses:[],batchId:null,batches:[]}]}return _createClass(c,[{key:"ngOnInit",value:function(){this.getCourses(),this.getBatchesSubjects()}},{key:"getBatchesSubjects",value:function(){var c=this;this.loading=!0,this.coreService.getRequest(a.a.API_URL+"courses/batches/subjects").subscribe((function(e){c.loading=!1,c.batches_subjects=e}))}},{key:"setSubjects",value:function(c,e){var t=this.batches_subjects.find((function(e){return e.batchId==c}));t&&(this.subjectsData[e].subjects=t.subjects)}},{key:"getCourses",value:function(){var c=this;this.coreService.getRequest(a.a.API_URL+"courses").subscribe((function(e){c.subjectsData[0].courses=e,c.courses=e}))}},{key:"setBatches",value:function(c,e){var t=this.courses.find((function(e){return e.courseId==c}));t&&(this.subjectsData[e].batches=t.batches,this.subjectsData[e].batchId=null,this.subjectsData[e].subjects=[],this.subjectsData[e].subjectId=null)}},{key:"setSelectedFile",value:function(c){this.selectedFile=c.target.files[0]}},{key:"addMore",value:function(){this.subjectsData.push({subjectId:null,subjects:[],batchId:null,batches:[],courseId:null,courses:this.courses})}},{key:"removeItem",value:function(c){this.subjectsData.splice(c,1)}},{key:"submit",value:function(){var c=this,e=[];this.subjectsData.forEach((function(c){e.push({batchId:c.batchId,courseId:c.courseId,subjectId:c.subjectId})}));var t=new FormData;t.append("title",this.title),t.append("assignment",this.selectedFile),t.append("batchesSubjects",JSON.stringify(e)),this.loading=!0,this.coreService.uploadRequest(a.a.API_URL+"assignments",t).subscribe((function(e){c.loading=!1,c.dialog.showDialog({content:e.message})}))}}]),c}()).\u0275fac=function(c){return new(c||S)(r.dc(u.a),r.dc(l.a))},S.\u0275cmp=r.Xb({type:S,selectors:[["add-assignment"]],decls:22,vars:5,consts:[["assignmentForm","ngForm"],[1,"row"],[1,"col-sm-4"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],[1,"col-sm-8"],["type","file","required","","name","assignment","ngModel","",2,"position","absolute","left","-2000px",3,"change"],["file",""],["mat-raised-button","",3,"click"],["class","row align-items-center",4,"ngFor","ngForOf"],[1,"col-sm-3"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"show"],[1,"row","align-items-center"],["required","",3,"name","ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"ngModel","name","ngModelChange","selectionChange"],["required","",3,"name","ngModel","ngModelChange"],[1,"col-sm-3","btns-col"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value"],["mat-mini-fab","","color","warn",3,"click"]],template:function(c,e){if(1&c){var t=r.kc();r.jc(0,"form",null,0),r.jc(2,"div",1),r.jc(3,"div",2),r.jc(4,"mat-form-field"),r.jc(5,"mat-label"),r.Wc(6,"Assignment Title/Name"),r.ic(),r.jc(7,"input",3),r.rc("ngModelChange",(function(c){return e.title=c})),r.ic(),r.ic(),r.ic(),r.jc(8,"div",4),r.jc(9,"input",5,6),r.rc("change",(function(c){return e.setSelectedFile(c)})),r.ic(),r.jc(11,"button",7),r.rc("click",(function(c){r.Mc(t);var e=r.Ic(10);return c.preventDefault(),e.click()})),r.Wc(12,"Choose File"),r.ic(),r.Wc(13," \xa0 "),r.jc(14,"span"),r.Wc(15),r.ic(),r.ic(),r.ic(),r.Vc(16,y,24,10,"div",8),r.jc(17,"div",1),r.jc(18,"div",9),r.jc(19,"button",10),r.rc("click",(function(){return e.submit()})),r.Wc(20,"Upload"),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(21,"loading",11)}if(2&c){var i=r.Ic(1);r.Pb(7),r.Bc("ngModel",e.title),r.Pb(8),r.Xc(e.selectedFile&&"Choosed File : "+e.selectedFile.name),r.Pb(1),r.Bc("ngForOf",e.subjectsData),r.Pb(3),r.Bc("disabled",i.invalid),r.Pb(2),r.Bc("show",e.loading)}},directives:[g.v,g.l,g.m,I.b,I.e,M.a,g.b,g.r,g.k,g.n,m.b,f.j,v.a,P.a,p.a,f.k,C.h],styles:["[class*=col-][_ngcontent-%COMP%]{padding:0 7.5px}.btns-col[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}"]}),S);function F(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.courseId),r.Pb(1),r.Yc("",t.course," ")}}function O(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.batchId),r.Pb(1),r.Xc(t.batch)}}function x(c,e){if(1&c&&(r.jc(0,"mat-option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.subjectId),r.Pb(1),r.Xc(t.subject)}}function D(c,e){if(1&c){var t=r.kc();r.jc(0,"button",21),r.rc("click",(function(){r.Mc(t);var c=r.vc().index;return r.vc().removeItem(c)})),r.jc(1,"mat-icon"),r.Wc(2,"remove"),r.ic(),r.ic()}}function A(c,e){if(1&c){var t=r.kc();r.jc(0,"div",12),r.jc(1,"div",9),r.jc(2,"mat-form-field"),r.jc(3,"mat-label"),r.Wc(4,"Select Course"),r.ic(),r.jc(5,"mat-select",13),r.rc("selectionChange",(function(){r.Mc(t);var c=e.$implicit,i=e.index;return r.vc().setBatches(c.courseId,i)}))("ngModelChange",(function(c){return r.Mc(t),e.$implicit.courseId=c})),r.Vc(6,F,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(7,"div",9),r.jc(8,"mat-form-field"),r.jc(9,"mat-label"),r.Wc(10,"Select Batch"),r.ic(),r.jc(11,"mat-select",15),r.rc("ngModelChange",(function(c){return r.Mc(t),e.$implicit.batchId=c}))("selectionChange",(function(){r.Mc(t);var c=e.$implicit,i=e.index;return r.vc().setSubjects(c.batchId,i)})),r.Vc(12,O,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(13,"div",9),r.jc(14,"mat-form-field"),r.jc(15,"mat-label"),r.Wc(16,"Select Subject"),r.ic(),r.jc(17,"mat-select",16),r.rc("ngModelChange",(function(c){return r.Mc(t),e.$implicit.subjectId=c})),r.Vc(18,x,2,2,"mat-option",14),r.ic(),r.ic(),r.ic(),r.jc(19,"div",17),r.jc(20,"button",18),r.rc("click",(function(){return r.Mc(t),r.vc().addMore()})),r.jc(21,"mat-icon"),r.Wc(22,"add"),r.ic(),r.ic(),r.Vc(23,D,3,0,"button",19),r.ic(),r.ic()}if(2&c){var i=e.$implicit,n=e.index;r.Pb(5),r.Bc("name","courseId"+n)("ngModel",i.courseId),r.Pb(1),r.Bc("ngForOf",i.courses),r.Pb(5),r.Bc("ngModel",i.batchId)("name","batchId"+n),r.Pb(1),r.Bc("ngForOf",i.batches),r.Pb(5),r.Bc("name","subjectId"+n)("ngModel",i.subjectId),r.Pb(1),r.Bc("ngForOf",i.subjects),r.Pb(5),r.Bc("ngIf",n>0)}}var V,$=((V=function(){function c(e,t){_classCallCheck(this,c),this.coreService=e,this.dialog=t,this.courses=[],this.batches_subjects=[],this.subjectsData=[{subjectId:null,subjects:[],courseId:null,courses:[],batchId:null,batches:[]}],this.isInitially=!0}return _createClass(c,[{key:"ngOnInit",value:function(){this.getCourses(),this.getBatchesSubjects()}},{key:"putBatchesSubjects",value:function(){var c=this;this.assignment.courseBatchesSubjects.forEach((function(e,t){c.subjectsData.push({courses:c.courses,batches:[],subjects:[],subjectId:e.subjectId,courseId:e.courseId,batchId:e.batchId}),c.setBatches(e.courseId,t+1),c.setSubjects(e.batchId,t+1)})),this.isInitially=!1}},{key:"getBatchesSubjects",value:function(){var c=this;this.loading=!0,this.coreService.getRequest(a.a.API_URL+"courses/batches/subjects").subscribe((function(e){c.loading=!1,c.batches_subjects=e,c.putBatchesSubjects()}))}},{key:"setSubjects",value:function(c,e){var t=this.batches_subjects.find((function(e){return e.batchId==c}));t&&(this.subjectsData[e].subjects=t.subjects)}},{key:"getCourses",value:function(){var c=this;this.loading=!0,this.coreService.getRequest(a.a.API_URL+"courses").subscribe((function(e){c.subjectsData[0].courses=e,c.courses=e,c.loading=!1}))}},{key:"setBatches",value:function(c,e){var t=this.courses.find((function(e){return e.courseId==c}));t&&(this.subjectsData[e].batches=t.batches,this.isInitially||(this.subjectsData[e].batchId=null),this.subjectsData[e].subjects=[],this.isInitially||(this.subjectsData[e].subjectId=null))}},{key:"setSelectedFile",value:function(c){this.selectedFile=c.target.files[0]}},{key:"addMore",value:function(){this.subjectsData.push({subjectId:null,subjects:[],batchId:null,batches:[],courseId:null,courses:this.courses})}},{key:"removeItem",value:function(c){this.subjectsData.splice(c,1)}},{key:"submit",value:function(){var c=this,e=[];this.subjectsData.forEach((function(c){c.courseId&&c.batchId&&c.subjectId&&e.push({batchId:c.batchId,courseId:c.courseId,subjectId:c.subjectId})}));var t=new FormData;t.append("assignmentId",this.assignment.assignmentId+""),t.append("title",this.assignment.title),t.append("assignment",this.selectedFile),t.append("batchesSubjects",JSON.stringify(e)),0!=e.length?(this.loading=!0,this.coreService.uploadRequest(a.a.API_URL+"assignments/update",t).subscribe((function(e){c.loading=!1,c.dialog.showDialog({content:e.message})}))):this.dialog.showDialog({content:"Please Choose at least 1 Course,Batch and Subject"})}}]),c}()).\u0275fac=function(c){return new(c||V)(r.dc(u.a),r.dc(l.a))},V.\u0275cmp=r.Xb({type:V,selectors:[["edit-assignment"]],inputs:{assignment:"assignment"},decls:22,vars:4,consts:[["assignmentForm","ngForm"],[1,"row"],[1,"col-sm-4"],["matInput","","name","title",3,"ngModel","ngModelChange"],[1,"col-sm-8"],["type","file","name","assignment","ngModel","",2,"position","absolute","left","-2000px",3,"change"],["file",""],["mat-raised-button","",3,"click"],["class","row align-items-center",4,"ngFor","ngForOf"],[1,"col-sm-3"],["color","primary","mat-raised-button","",3,"click"],[3,"show"],[1,"row","align-items-center"],[3,"name","ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","name","ngModelChange","selectionChange"],[3,"name","ngModel","ngModelChange"],[1,"col-sm-3","btns-col"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[3,"value"],["mat-mini-fab","","color","warn",3,"click"]],template:function(c,e){if(1&c){var t=r.kc();r.jc(0,"form",null,0),r.jc(2,"div",1),r.jc(3,"div",2),r.jc(4,"mat-form-field"),r.jc(5,"mat-label"),r.Wc(6,"Assignment Title/Name"),r.ic(),r.jc(7,"input",3),r.rc("ngModelChange",(function(c){return e.assignment.title=c})),r.ic(),r.ic(),r.ic(),r.jc(8,"div",4),r.jc(9,"input",5,6),r.rc("change",(function(c){return e.setSelectedFile(c)})),r.ic(),r.jc(11,"button",7),r.rc("click",(function(c){r.Mc(t);var e=r.Ic(10);return c.preventDefault(),e.click()})),r.Wc(12,"Choose File"),r.ic(),r.Wc(13," \xa0 "),r.jc(14,"span"),r.Wc(15),r.ic(),r.ic(),r.ic(),r.Vc(16,A,24,10,"div",8),r.jc(17,"div",1),r.jc(18,"div",9),r.jc(19,"button",10),r.rc("click",(function(){return e.submit()})),r.Wc(20,"Upload"),r.ic(),r.ic(),r.ic(),r.ic(),r.ec(21,"loading",11)}2&c&&(r.Pb(7),r.Bc("ngModel",e.assignment.title),r.Pb(8),r.Xc(e.selectedFile&&"Choosed File : "+e.selectedFile.name),r.Pb(1),r.Bc("ngForOf",e.subjectsData),r.Pb(5),r.Bc("show",e.loading))},directives:[g.v,g.l,g.m,I.b,I.e,M.a,g.b,g.k,g.n,m.b,f.j,v.a,P.a,p.a,f.k,C.h],styles:["[class*=col-][_ngcontent-%COMP%]{padding:0 7.5px}.btns-col[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}"]}),V);function R(c,e){if(1&c&&(r.jc(0,"option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.courseId),r.Pb(1),r.Xc(t.course)}}function X(c,e){if(1&c&&(r.jc(0,"option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.batchId),r.Pb(1),r.Xc(t.batch)}}function q(c,e){if(1&c&&(r.jc(0,"option",20),r.Wc(1),r.ic()),2&c){var t=e.$implicit;r.Bc("value",t.subjectId),r.Pb(1),r.Xc(t.subject)}}function U(c,e){if(1&c){var t=r.kc();r.jc(0,"button",21),r.rc("click",(function(){return r.Mc(t),r.vc().showAddModal=!0})),r.jc(1,"mat-icon"),r.Wc(2,"add"),r.ic(),r.Wc(3," Add "),r.ic()}}function E(c,e){1&c&&(r.jc(0,"th"),r.Wc(1,"Action"),r.ic())}function L(c,e){if(1&c&&(r.jc(0,"tr"),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.Wc(4),r.ic(),r.jc(5,"td"),r.Wc(6),r.ic(),r.ic()),2&c){var t=e.$implicit;r.Pb(2),r.Xc(t.course),r.Pb(2),r.Xc(t.batch),r.Pb(2),r.Xc(t.subject)}}function N(c,e){if(1&c){var t=r.kc();r.jc(0,"button",29),r.rc("click",(function(){r.Mc(t);var c=r.vc(2).$implicit;return r.vc(2).editAssignment(c)})),r.jc(1,"mat-icon"),r.Wc(2,"create"),r.ic(),r.ic()}}function T(c,e){if(1&c){var t=r.kc();r.jc(0,"button",30),r.rc("click",(function(){r.Mc(t);var c=r.vc(2),e=c.$implicit,i=c.index;return r.vc(2).deleteAssignment(e,i)})),r.jc(1,"mat-icon"),r.Wc(2,"delete"),r.ic(),r.ic()}}function G(c,e){if(1&c&&(r.jc(0,"td",26),r.Vc(1,N,3,0,"button",27),r.Vc(2,T,3,0,"button",28),r.ic()),2&c){var t=r.vc(3);r.Pb(1),r.Bc("ngIf",t.permissions.edit_assignment),r.Pb(1),r.Bc("ngIf",t.permissions.delete_assignment)}}function J(c,e){if(1&c&&(r.jc(0,"tr"),r.jc(1,"td"),r.Wc(2),r.ic(),r.jc(3,"td"),r.jc(4,"table",24),r.jc(5,"tr"),r.jc(6,"th"),r.Wc(7,"Course"),r.ic(),r.jc(8,"th"),r.Wc(9,"Batch"),r.ic(),r.jc(10,"th"),r.Wc(11,"Subject"),r.ic(),r.ic(),r.Vc(12,L,7,3,"tr",23),r.ic(),r.ic(),r.jc(13,"td"),r.Wc(14),r.ic(),r.jc(15,"td"),r.Wc(16),r.ic(),r.Vc(17,G,3,2,"td",25),r.ic()),2&c){var t=e.$implicit,i=r.vc(2);r.Pb(2),r.Xc(t.title),r.Pb(10),r.Bc("ngForOf",t.courseBatchesSubjects),r.Pb(2),r.Xc(t.dateTime),r.Pb(2),r.Xc(t.uploaderName),r.Pb(1),r.Bc("ngIf",i.permissions.edit_assignment||i.permissions.delete_assignment)}}function K(c,e){if(1&c&&(r.jc(0,"table",22),r.jc(1,"tr"),r.jc(2,"th"),r.Wc(3,"Title"),r.ic(),r.jc(4,"th"),r.Wc(5,"Course - Batch - Subject"),r.ic(),r.jc(6,"th"),r.Wc(7,"Date"),r.ic(),r.jc(8,"th"),r.Wc(9,"Uploaded By"),r.ic(),r.Vc(10,E,2,0,"th",17),r.ic(),r.Vc(11,J,18,5,"tr",23),r.ic()),2&c){var t=r.vc();r.Pb(10),r.Bc("ngIf",t.permissions.edit_assignment||t.permissions.delete_assignment),r.Pb(1),r.Bc("ngForOf",t.assignments)}}function z(c,e){if(1&c&&(r.jc(0,"div",31),r.Wc(1),r.ic()),2&c){var t=r.vc();r.Pb(1),r.Xc(t.no_records)}}function Q(c,e){1&c&&r.ec(0,"add-assignment")}function Y(c,e){if(1&c&&r.ec(0,"edit-assignment",32),2&c){var t=r.vc();r.Bc("assignment",t.activeAssignment)}}var Z,H,cc=function(){return{width:"75%"}},ec=[{path:"",component:(Z=function(){function c(e,t,i){_classCallCheck(this,c),this.coreService=e,this.dialog=t,this.usersService=i,this.no_records="Please choose course,batch and subject to search",this.courseId="",this.batchId="",this.subjectId="",this.batches_subjects=[],this.assignments=[],this.permissions=o.a}return _createClass(c,[{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return this.getCourses(),this.getBatchesSubjects(),c.next=4,this.usersService.getUserPermissions();case 4:this.permissions=c.sent;case 5:case"end":return c.stop()}}),c,this)})))}},{key:"getCourses",value:function(){var c=this;this.coreService.getRequest(a.a.API_URL+"courses").subscribe((function(e){c.courses=e}))}},{key:"getBatchesSubjects",value:function(){var c=this;this.loading=!0,this.coreService.getRequest(a.a.API_URL+"courses/batches/subjects").subscribe((function(e){c.loading=!1,c.batches_subjects=e}))}},{key:"setBatches",value:function(){var c=this,e=this.courses.find((function(e){return e.courseId==+c.courseId}));this.batches=[],this.batchId="",this.subjects=[],this.subjectId="",e&&(this.batches=e.batches)}},{key:"setSubjects",value:function(){var c=this,e=this.batches_subjects.find((function(e){return e.batchId==c.batchId}));this.subjectId="",this.subjects=[],e&&(this.subjects=e.subjects)}},{key:"searchAssignments",value:function(){var c=this;this.loading=!0,this.coreService.getRequest(a.a.API_URL+"assignments/course/"+(this.courseId?this.courseId:0)+"/batch/"+(this.batchId?this.batchId:0)+"/subject/"+(this.subjectId?this.subjectId:0)).subscribe((function(e){c.assignments=e,c.loading=!1,0==e.length&&(c.no_records="No Records Found")}))}},{key:"editAssignment",value:function(c){this.activeAssignment=c,this.showEditModal=!0}},{key:"deleteAssignment",value:function(c,e){var t=this;this.dialog.showDialog({title:"Confirm Deletion",content:"Are you sure to delete this assignment?",callBack:function(){t.loading=!0,t.coreService.deleteRequest(a.a.API_URL+"assignments/"+c.assignmentId).subscribe((function(c){c.success&&t.assignments.splice(e,1),t.loading=!1}))}})}}]),c}(),Z.\u0275fac=function(c){return new(c||Z)(r.dc(u.a),r.dc(l.a),r.dc(d.a))},Z.\u0275cmp=r.Xb({type:Z,selectors:[["app-assignments-home"]],decls:40,vars:19,consts:[["id","page-content"],[1,"row","assignments-row"],["id","filter-box"],[1,"select",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"select",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"disabled","click"],["id","action-box"],["mat-raised-button","",3,"click",4,"ngIf"],["class","pinnacle-table big-heading",4,"ngIf"],["class","no-data perfect-centered",4,"ngIf"],["modal","",1,"modal",3,"show","options"],[1,"dialog"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-body"],[4,"ngIf"],[3,"assignment",4,"ngIf"],[3,"show"],[3,"value"],["mat-raised-button","",3,"click"],[1,"pinnacle-table","big-heading"],[4,"ngFor","ngForOf"],[1,"inner-table"],["class","action-colm",4,"ngIf"],[1,"action-colm"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[1,"no-data","perfect-centered"],[3,"assignment"]],template:function(c,e){1&c&&(r.ec(0,"admin-header"),r.ec(1,"admin-sidebar"),r.jc(2,"div",0),r.jc(3,"div",1),r.jc(4,"div",2),r.jc(5,"select",3),r.rc("ngModelChange",(function(c){return e.courseId=c}))("change",(function(){return e.setBatches()})),r.jc(6,"option",4),r.Wc(7,"Select Course"),r.ic(),r.Vc(8,R,2,2,"option",5),r.ic(),r.jc(9,"select",3),r.rc("ngModelChange",(function(c){return e.batchId=c}))("change",(function(){return e.setSubjects()})),r.jc(10,"option",4),r.Wc(11,"Select Batch"),r.ic(),r.Vc(12,X,2,2,"option",5),r.ic(),r.jc(13,"select",6),r.rc("ngModelChange",(function(c){return e.subjectId=c})),r.jc(14,"option",4),r.Wc(15,"Select Subject"),r.ic(),r.Vc(16,q,2,2,"option",5),r.ic(),r.jc(17,"button",7),r.rc("click",(function(){return e.searchAssignments()})),r.Wc(18,"Search"),r.ic(),r.ic(),r.jc(19,"div",8),r.Vc(20,U,4,0,"button",9),r.ic(),r.ic(),r.Vc(21,K,12,2,"table",10),r.Vc(22,z,2,1,"div",11),r.ic(),r.jc(23,"div",12),r.jc(24,"div",13),r.jc(25,"div",14),r.Wc(26,"Upload New Assignment"),r.ic(),r.jc(27,"div",15),r.rc("click",(function(){return e.showAddModal=!1})),r.Wc(28,"\xd7"),r.ic(),r.jc(29,"div",16),r.Vc(30,Q,1,0,"add-assignment",17),r.ic(),r.ic(),r.ic(),r.jc(31,"div",12),r.jc(32,"div",13),r.jc(33,"div",14),r.Wc(34,"Edit Assignment"),r.ic(),r.jc(35,"div",15),r.rc("click",(function(){return e.showEditModal=!1})),r.Wc(36,"\xd7"),r.ic(),r.jc(37,"div",16),r.Vc(38,Y,1,1,"edit-assignment",18),r.ic(),r.ic(),r.ic(),r.ec(39,"loading",19)),2&c&&(r.Pb(5),r.Bc("ngModel",e.courseId),r.Pb(3),r.Bc("ngForOf",e.courses),r.Pb(1),r.Bc("ngModel",e.batchId),r.Pb(3),r.Bc("ngForOf",e.batches),r.Pb(1),r.Bc("ngModel",e.subjectId),r.Pb(3),r.Bc("ngForOf",e.subjects),r.Pb(1),r.Bc("disabled",!e.subjectId),r.Pb(3),r.Bc("ngIf",e.permissions.new_assignment),r.Pb(1),r.Bc("ngIf",e.assignments.length>0),r.Pb(1),r.Bc("ngIf",0==e.assignments.length),r.Pb(1),r.Bc("show",e.showAddModal)("options",r.Cc(17,cc)),r.Pb(7),r.Bc("ngIf",e.showAddModal),r.Pb(1),r.Bc("show",e.showEditModal)("options",r.Cc(18,cc)),r.Pb(7),r.Bc("ngIf",e.showEditModal),r.Pb(1),r.Bc("show",e.loading))},directives:[b.a,h.a,g.s,g.k,g.n,g.o,g.u,f.j,m.b,f.k,j.a,v.a,p.a,W,$],styles:[".assignments-row[_ngcontent-%COMP%]{padding-bottom:15px;justify-content:space-between}#filter-box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;width:calc(100% - 87px)}#filter-box[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{width:25%;margin-right:10px}#action-box[_ngcontent-%COMP%]{width:87px}[class*=col-][_ngcontent-%COMP%]{padding-right:15px}.action-colm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.inner-table[_ngcontent-%COMP%]{border-collapse:collapse}.inner-table[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{padding:3px 5px;font-size:12px;font-weight:500;color:#666;border:1px solid #f1f1f1}.inner-table[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:2px 5px;font-size:10px;color:#888;border:1px solid #f1f1f1}@media screen and (max-width:768px){#filter-box[_ngcontent-%COMP%]{width:100%;height:83px;align-content:space-between}#filter-box[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{width:calc(50% - 10px)}#action-box[_ngcontent-%COMP%]{margin-top:10px}}"]}),Z)}],tc=((H=function c(){_classCallCheck(this,c)}).\u0275mod=r.bc({type:H}),H.\u0275inj=r.ac({factory:function(c){return new(c||H)},imports:[[n.a,i.f.forChild(ec)]]}),H)}}]);